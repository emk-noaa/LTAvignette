<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 4 Data processing | User’s guide for LTabundR</title>
  <meta name="description" content="vignette" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content=" 4 Data processing | User’s guide for LTabundR" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="vignette" />
  <meta name="github-repo" content="emk-noaa/emk-noaa.github.io" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 4 Data processing | User’s guide for LTabundR" />
  
  <meta name="twitter:description" content="vignette" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="das.html"/>
<link rel="next" href="maps.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.26/datatables.js"></script>
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="libs/dt-ext-fixedcolumns-1.12.1/css/fixedColumns.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-fixedcolumns-1.12.1/js/dataTables.fixedColumns.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Users's guide for <kbd>LTabundR</kbd></a></li>

<li class="divider"></li>
<li><a href="index.html#overview">Overview<span></span></a></li>
<li class="part"><span><b>I Data processing<span></span></b></span></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Install <code>LTabundR</code><span></span></a><ul>
<li><a href="install.html#option-1-install-from-github">Option 1: Install from GitHub<span></span></a></li>
<li><a href="install.html#option-2-install-locally">Option 2: Install locally<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="settings.html"><a href="settings.html"><i class="fa fa-check"></i><b>2</b> Settings<span></span></a><ul>
<li><a href="settings.html#survey-strata">Survey strata<span></span></a></li>
<li><a href="settings.html#survey-wide-settings">Survey-wide settings<span></span></a></li>
<li><a href="settings.html#cohort-specific-settings">Cohort-specific settings<span></span></a></li>
<li><a href="settings.html#example-code">Example code<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="das.html"><a href="das.html"><i class="fa fa-check"></i><b>3</b> DAS editing<span></span></a><ul>
<li><a href="das.html#reviewing-a-das-file">Reviewing a <code>DAS</code> file<span></span></a></li>
<li><a href="das.html#staging-edits">Staging edits<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="processing.html"><a href="processing.html"><i class="fa fa-check"></i><b>4</b> Data processing<span></span></a><ul>
<li><a href="processing.html#behind-the-scenes">Behind the scenes<span></span></a></li>
<li><a href="processing.html#review">Review<span></span></a></li>
<li><a href="processing.html#validation">Validation<span></span></a></li>
</ul></li>
<li class="part"><span><b>II Data exploration<span></span></b></span></li>
<li class="chapter" data-level="5" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>5</b> Maps<span></span></a><ul>
<li><a href="maps.html#publishable-maps">Publishable maps<span></span></a></li>
<li><a href="maps.html#interactive-maps">Interactive maps<span></span></a></li>
<li><a href="maps.html#interactive-dashboard">Interactive dashboard<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="filter.html"><a href="filter.html"><i class="fa fa-check"></i><b>6</b> Filter &amp; combine surveys<span></span></a><ul>
<li><a href="filter.html#filter-1">Filter<span></span></a></li>
<li><a href="filter.html#combine">Combine<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="summarize.html"><a href="summarize.html"><i class="fa fa-check"></i><b>7</b> Summarize survey<span></span></a><ul>
<li><a href="summarize.html#summarize-effort">Summarize effort<span></span></a></li>
<li><a href="summarize.html#summarize-by-beaufort">Summarize by Beaufort<span></span></a></li>
<li><a href="summarize.html#summarize-sightings">Summarize sightings<span></span></a></li>
<li><a href="summarize.html#summarize-certain-species">Summarize certain species<span></span></a></li>
<li><a href="summarize.html#cruz_explorer"><code>cruz_explorer()</code><span></span></a></li>
</ul></li>
<li class="part"><span><b>III Data analysis<span></span></b></span></li>
<li class="chapter" data-level="8" data-path="g0.html"><a href="g0.html"><i class="fa fa-check"></i><b>8</b> Estimating g(0)<span></span></a><ul>
<li><a href="g0.html#relative-g0">Relative <code>g(0)</code><span></span></a></li>
<li><a href="g0.html#weighted-average-g0">Weighted average <code>g(0)</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lta.html"><a href="lta.html"><i class="fa fa-check"></i><b>9</b> Line-transect analysis<span></span></a><ul>
<li><a href="lta.html#key-inputs">Key inputs<span></span></a></li>
<li><a href="lta.html#variance-estimation">Variance estimation<span></span></a></li>
<li><a href="lta.html#other-inputs">Other inputs<span></span></a></li>
<li><a href="lta.html#output">Output<span></span></a></li>
<li><a href="lta.html#unusual-estimate-scenarios">Unusual estimate scenarios<span></span></a></li>
<li><a href="lta.html#behind-the-scenes-1">Behind the scenes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="destratify.html"><a href="destratify.html"><i class="fa fa-check"></i><b>10</b> Stratified analysis<span></span></a></li>
<li class="chapter" data-level="11" data-path="trend-analysis.html"><a href="trend-analysis.html"><i class="fa fa-check"></i><b>11</b> Trend analysis<span></span></a></li>
<li class="chapter" data-level="12" data-path="subgroup-based-analysis.html"><a href="subgroup-based-analysis.html"><i class="fa fa-check"></i><b>12</b> Subgroup-based analysis<span></span></a><ul>
<li><a href="subgroup-based-analysis.html#inputs-1">Inputs<span></span></a></li>
<li><a href="subgroup-based-analysis.html#outputs-1">Outputs<span></span></a></li>
<li><a href="subgroup-based-analysis.html#behind-the-scenes-2">Behind the scenes<span></span></a></li>
</ul></li>
<li class="part"><span><b>IV Results<span></span></b></span></li>
<li class="chapter" data-level="13" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>13</b> Tables<span></span></a><ul>
<li><a href="tables.html#summary-tables">Summary tables<span></span></a></li>
<li><a href="tables.html#appendix-tables">Appendix tables<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="plots.html"><a href="plots.html"><i class="fa fa-check"></i><b>14</b> Plots<span></span></a><ul>
<li><a href="plots.html#abundance-plots">Abundance plots<span></span></a></li>
<li><a href="plots.html#detection-function-plots">Detection function plots<span></span></a></li>
</ul></li>
<li class="part"><span><b>V Case studies<span></span></b></span></li>
<li class="chapter" data-level="15" data-path="whiceas.html"><a href="whiceas.html"><i class="fa fa-check"></i><b>15</b> WHICEAS<span></span></a><ul>
<li><a href="whiceas.html#data-processing">Data processing<span></span></a></li>
<li><a href="whiceas.html#data-exploration">Data exploration<span></span></a></li>
<li><a href="whiceas.html#rg0-1">Rg0<span></span></a></li>
<li><a href="whiceas.html#density-abundance">Density &amp; abundance<span></span></a></li>
<li><a href="whiceas.html#results">Results<span></span></a></li>
<li><a href="whiceas.html#validation-1">Validation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="case_cnp.html"><a href="case_cnp.html"><i class="fa fa-check"></i><b>16</b> Central North Pacific<span></span></a><ul>
<li><a href="case_cnp.html#data-processing-1">Data processing<span></span></a></li>
<li><a href="case_cnp.html#data-exploration-1">Data exploration<span></span></a></li>
<li><a href="case_cnp.html#rg0-2">Rg0<span></span></a></li>
<li><a href="case_cnp.html#density-abundance-1">Density &amp; abundance<span></span></a></li>
<li><a href="case_cnp.html#stratified-results">Stratified results<span></span></a></li>
<li><a href="case_cnp.html#de-stratified-results">De-stratified results<span></span></a></li>
<li><a href="case_cnp.html#plots-2">Plots<span></span></a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="california-current-system.html"><a href="california-current-system.html"><i class="fa fa-check"></i><b>17</b> California Current System<span></span></a></li>
<li class="part"><span><b>VI Appendix<span></span></b></span></li>
<li class="chapter" data-level="18" data-path="stratagallery.html"><a href="stratagallery.html"><i class="fa fa-check"></i><b>18</b> Strata gallery<span></span></a><ul>
<li><a href="stratagallery.html#central-north-pacific">Central North Pacific<span></span></a></li>
<li><a href="stratagallery.html#california-current">California Current<span></span></a></li>
<li><a href="stratagallery.html#etp">ETP<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="segmentizing.html"><a href="segmentizing.html"><i class="fa fa-check"></i><b>19</b> Segmentizing<span></span></a><ul>
<li><a href="segmentizing.html#approach">Approach<span></span></a></li>
<li><a href="segmentizing.html#defaults-2">Defaults<span></span></a></li>
<li><a href="segmentizing.html#day-vs-equal-length">Day vs Equal Length<span></span></a></li>
<li><a href="segmentizing.html#contiguous-vs.-non-contiguous-effort">Contiguous vs. non-contiguous effort<span></span></a></li>
<li><a href="segmentizing.html#segment-remainder-handling">Segment remainder handling<span></span></a></li>
<li><a href="segmentizing.html#typical-settings">Typical settings<span></span></a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="abund9_compare.html"><a href="abund9_compare.html"><i class="fa fa-check"></i><b>20</b> <code>LTabundR</code> vs. <code>ABUND9</code><span></span></a><ul>
<li><a href="abund9_compare.html#differences-in-total-effort">Differences in total effort<span></span></a></li>
<li><a href="abund9_compare.html#differences-in-on-effort-distance">Differences in on-effort distance<span></span></a></li>
<li><a href="abund9_compare.html#differences-in-total-sightings">Differences in total sightings<span></span></a></li>
<li><a href="abund9_compare.html#differences-in-on-effort-sightings">Differences in on-effort sightings<span></span></a></li>
<li><a href="abund9_compare.html#differences-in-school-size-estimation">Differences in school size estimation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="spp_codes.html"><a href="spp_codes.html"><i class="fa fa-check"></i><b>21</b> NOAA/NMFS species codes<span></span></a><ul>
<li><a href="spp_codes.html#table">Table<span></span></a></li>
<li><a href="spp_codes.html#species_translator"><code>species_translator()</code><span></span></a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/emk-noaa/emk-noaa.github.io" target="blank">Eric & Amanda</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">User’s guide for <code>LTabundR</code></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="processing" class="section level1 hasAnchor">
<h1><span class="header-section-number"> 4</span> Data processing<a href="processing.html#processing" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In our WHICEAS case study example, we are interested in estimating density/abundance for 2017 and 2020 only, but we want to use surveys from previous years to help model species detection functions. We will therefore be using a dataset of NOAA surveys in the Central North Pacific from 1986 to 2020.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="processing.html#cb53-1"></a>das_file &lt;-<span class="st"> &#39;data/surveys/CenPac1986-2020_Final_alb.das&#39;</span></span></code></pre></div>
<p>You can process your survey data using a single function, <strong><code>process_surveys()</code></strong>, which takes two primary arguments: the filepath(s) to your <code>DAS</code> survey data, and your <code>settings</code> object. For example:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="processing.html#cb54-1"></a>cruz &lt;-<span class="st"> </span><span class="kw">process_surveys</span>(das_file, </span>
<span id="cb54-2"><a href="processing.html#cb54-2"></a>                        settings)</span></code></pre></div>
<p>That single command will convert your raw <code>DAS</code> data to a “<code>cruz</code>” object, a list of polished datasets that are prepared to be passed to subsequent analyses.</p>
<p>In our case we will use a third argument to apply edits to the <code>DAS</code> data before processing (see previous page for details on those edits):</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="processing.html#cb55-1"></a>edits &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="st">&#39;cnp_1986_2020_edits.RData&#39;</span>)</span>
<span id="cb55-2"><a href="processing.html#cb55-2"></a></span>
<span id="cb55-3"><a href="processing.html#cb55-3"></a>cruz &lt;-<span class="st"> </span><span class="kw">process_surveys</span>(das_file, </span>
<span id="cb55-4"><a href="processing.html#cb55-4"></a>                        settings,</span>
<span id="cb55-5"><a href="processing.html#cb55-5"></a>                        edits)</span></code></pre></div>
<div id="behind-the-scenes" class="section level2 unnumbered hasAnchor">
<h2>Behind the scenes<a href="processing.html#behind-the-scenes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>process_surveys()</code> function is a wrapper for several discrete stages of data formatting/processing. Behind the scenes, each of those stages is carried out using a specific <code>LTabundR</code> function. The remainder of this page is a detailed step-by-step explanation of the data processing that occurs when you call <code>process_surveys()</code>.</p>
<div id="edit-cruise-data" class="section level3 unnumbered hasAnchor">
<h3>Edit cruise data<a href="processing.html#edit-cruise-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If the <code>edits</code> input argument is supplied to <code>process_surveys()</code>, temporary copies of the <code>DAS</code> file(s) ar made and edited before processing. This step is discussed on the previous page.</p>
</div>
<div id="bring-in-cruise-data" class="section level3 unnumbered hasAnchor">
<h3>Bring in cruise data<a href="processing.html#bring-in-cruise-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Read in and process your <code>.DAS</code> file using the functions in Sam Woodward’s <code>swfscDAS</code> package. To do so quickly, we built a wrapper function that makes this quick and easy:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="processing.html#cb56-1"></a>das &lt;-<span class="st"> </span><span class="kw">das_load</span>(das_file, </span>
<span id="cb56-2"><a href="processing.html#cb56-2"></a>                <span class="dt">perform_checks =</span> <span class="ot">TRUE</span>,</span>
<span id="cb56-3"><a href="processing.html#cb56-3"></a>                <span class="dt">print_glimpse =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
</div>
<div id="process-strata" class="section level3 unnumbered hasAnchor">
<h3>Process strata<a href="processing.html#process-strata" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Run the following function to add strata and study-area information to each row of <code>DAS</code> data:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="processing.html#cb57-1"></a>das_strata &lt;-<span class="st"> </span><span class="kw">process_strata</span>(das, settings)</span></code></pre></div>
<p>This function loops through each stratum <code>data.frame</code> you have provided it in <code>settings$strata</code>, formats the stratum, and asks whether each DAS row occurs within it. For each stratum, a column named <code>stratum_&lt;StratumName&gt;</code> is added to the <code>das</code> object; each row in this column is <code>TRUE</code> (included) or <code>FALSE</code>.</p>
<p>A similar procedure is run if a dataframe is provided in <code>settings$study_area</code>. A column named <code>study_area</code> is added to <code>das</code> containing a boolean (<code>TRUE</code> if the sub-segment or sighting occurs within the study area).</p>
</div>
<div id="format-das-data-into-a-cruz-object" class="section level3 unnumbered hasAnchor">
<h3>Format <code>DAS</code> data into a <code>cruz</code> object<a href="processing.html#format-das-data-into-a-cruz-object" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The function <code>das_format()</code> takes care of some final formatting and initiates the <code>cruz</code> object data structure.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="processing.html#cb58-1"></a>cruz &lt;-<span class="st"> </span><span class="kw">das_format</span>(das_strata, <span class="dt">verbose=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p>This function (1) remove rows with invalid Cruise numbers, times, or locations; (ii) calculate the distance, in km, between each row of data; (iii) adds a <code>ship</code> column to the dataset, with initials for the ship corresponding to each cruise; (iv) creates a new list, <code>cohorts</code>, which copies the cruise data for each cohort specified in your settings; and (v) adds a <code>stratum</code> column to the data in each cohort. That column specifies
a single stratum assignment for each row of <code>DAS</code> data in the event of overlapping strata, based upon the cohort setting <code>stratum_overlap_handling</code>.</p>
</div>
<div id="the-cruz-object" class="section level3 unnumbered hasAnchor">
<h3>The <code>cruz</code> object<a href="processing.html#the-cruz-object" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The function <code>format_das()</code> returns a list, which we have saved in an object named <code>cruz</code>, with several slots:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="processing.html#cb59-1"></a>cruz <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb59-2"><a href="processing.html#cb59-2"></a>[<span class="dv">1</span>] <span class="st">&quot;settings&quot;</span> <span class="st">&quot;strata&quot;</span>   <span class="st">&quot;cohorts&quot;</span> </span></code></pre></div>
<p>The slots <code>strata</code> and <code>study_area</code> provide the area, in square km, of each polygon being used:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="processing.html#cb60-1"></a>cruz<span class="op">$</span>strata</span>
<span id="cb60-2"><a href="processing.html#cb60-2"></a>           stratum         area</span>
<span id="cb60-3"><a href="processing.html#cb60-3"></a><span class="dv">1</span>           HI_EEZ  <span class="fl">2474595.769</span></span>
<span id="cb60-4"><a href="processing.html#cb60-4"></a><span class="dv">2</span>         OtherCNP <span class="fl">34215265.219</span></span>
<span id="cb60-5"><a href="processing.html#cb60-5"></a><span class="dv">3</span>              MHI   <span class="fl">212033.063</span></span>
<span id="cb60-6"><a href="processing.html#cb60-6"></a><span class="dv">4</span>          WHICEAS   <span class="fl">402948.734</span></span>
<span id="cb60-7"><a href="processing.html#cb60-7"></a><span class="dv">5</span>       Spotted_OU     <span class="fl">5102.666</span></span>
<span id="cb60-8"><a href="processing.html#cb60-8"></a><span class="dv">6</span>       Spotted_FI    <span class="fl">10509.869</span></span>
<span id="cb60-9"><a href="processing.html#cb60-9"></a><span class="dv">7</span>       Spotted_BI    <span class="fl">39454.720</span></span>
<span id="cb60-10"><a href="processing.html#cb60-10"></a><span class="dv">8</span>  Bottlenose_KaNi     <span class="fl">2755.024</span></span>
<span id="cb60-11"><a href="processing.html#cb60-11"></a><span class="dv">9</span>  Bottlenose_OUFI    <span class="fl">14417.035</span></span>
<span id="cb60-12"><a href="processing.html#cb60-12"></a><span class="dv">10</span>   Bottlenose_BI     <span class="fl">4668.072</span></span>
<span id="cb60-13"><a href="processing.html#cb60-13"></a><span class="dv">11</span>            NWHI   <span class="fl">449375.569</span></span></code></pre></div>
<p>The slot <code>cohorts</code> is itself a list with one slot for each cohort. The slots are named using the <code>id</code> cohort setting.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="processing.html#cb61-1"></a>cruz<span class="op">$</span>cohorts <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb61-2"><a href="processing.html#cb61-2"></a>[<span class="dv">1</span>] <span class="st">&quot;all&quot;</span>        <span class="st">&quot;bottlenose&quot;</span> <span class="st">&quot;spotted&quot;</span>   </span></code></pre></div>
<p>Each cohort slot has a copy of the <code>DAS</code> data with a new <code>stratum</code> column, which contains a stratum assignment tailored to its cohort-specific settings. For instance, the <code>all</code> cohort, whose <code>stratum_overlap_handling</code> is set to <code>"smallest"</code>, assigns the smallest stratum in the event of overlapping or nested strata:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="processing.html#cb62-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>stratum <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">table</span>(<span class="dt">useNA=</span><span class="st">&#39;ifany&#39;</span>)</span>
<span id="cb62-2"><a href="processing.html#cb62-2"></a>.</span>
<span id="cb62-3"><a href="processing.html#cb62-3"></a>  HI_EEZ OtherCNP  WHICEAS </span>
<span id="cb62-4"><a href="processing.html#cb62-4"></a>  <span class="dv">117715</span>   <span class="dv">126248</span>    <span class="dv">85669</span> </span></code></pre></div>
<p>Since the <code>bottlenose</code> cohort uses a different subset of geostrata, its distribution of stratum assignments will also differ:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="processing.html#cb63-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>bottlenose<span class="op">$</span>stratum <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">table</span>(<span class="dt">useNA=</span><span class="st">&#39;ifany&#39;</span>)</span>
<span id="cb63-2"><a href="processing.html#cb63-2"></a>.</span>
<span id="cb63-3"><a href="processing.html#cb63-3"></a>  Bottlenose_BI Bottlenose_KaNi Bottlenose_OUFI          HI_EEZ        OtherCNP </span>
<span id="cb63-4"><a href="processing.html#cb63-4"></a>           <span class="dv">3415</span>            <span class="dv">1495</span>            <span class="dv">6862</span>          <span class="dv">117715</span>          <span class="dv">126248</span> </span>
<span id="cb63-5"><a href="processing.html#cb63-5"></a>        WHICEAS </span>
<span id="cb63-6"><a href="processing.html#cb63-6"></a>          <span class="dv">73897</span> </span></code></pre></div>
<p>This list, with these five primary slots, will be referred to from hereon as a <code>cruz</code> object.</p>
</div>
<div id="segmentize-the-data" class="section level3 unnumbered hasAnchor">
<h3>Segmentize the data<a href="processing.html#segmentize-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To allocate survey data into discrete ‘effort segments’, which are used in variance estimation in subsequent steps, run the function <code>segmentize()</code>. This process is controlled by both survey-wide and cohort-specific <span id="settings">settings</span>, which are now carried in a slot within the <code>cruz</code> object. The process is outlined in detail in the <a href="segmentizing.html#segmentizing">Appendix on Segmentizing</a>.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="processing.html#cb64-1"></a>cruz &lt;-<span class="st"> </span><span class="kw">segmentize</span>(cruz, <span class="dt">verbose=</span><span class="ot">FALSE</span>)</span></code></pre></div>
<p>This function does not change the high-level structure of the <code>cruz</code> object …</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="processing.html#cb65-1"></a>cruz <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb65-2"><a href="processing.html#cb65-2"></a>[<span class="dv">1</span>] <span class="st">&quot;settings&quot;</span> <span class="st">&quot;strata&quot;</span>   <span class="st">&quot;cohorts&quot;</span> </span></code></pre></div>
<p>… or the cohort names in the <code>cohorts</code> slot:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="processing.html#cb66-1"></a>cruz<span class="op">$</span>cohorts <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb66-2"><a href="processing.html#cb66-2"></a>[<span class="dv">1</span>] <span class="st">&quot;all&quot;</span>        <span class="st">&quot;bottlenose&quot;</span> <span class="st">&quot;spotted&quot;</span>   </span></code></pre></div>
<p>For each <code>cohorts</code> slot, the list structure is the same:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="processing.html#cb67-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>all <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb67-2"><a href="processing.html#cb67-2"></a>[<span class="dv">1</span>] <span class="st">&quot;segments&quot;</span> <span class="st">&quot;das&quot;</span>     </span>
<span id="cb67-3"><a href="processing.html#cb67-3"></a></span>
<span id="cb67-4"><a href="processing.html#cb67-4"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>bottlenose <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb67-5"><a href="processing.html#cb67-5"></a>[<span class="dv">1</span>] <span class="st">&quot;segments&quot;</span> <span class="st">&quot;das&quot;</span>     </span>
<span id="cb67-6"><a href="processing.html#cb67-6"></a></span>
<span id="cb67-7"><a href="processing.html#cb67-7"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>spotted <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb67-8"><a href="processing.html#cb67-8"></a>[<span class="dv">1</span>] <span class="st">&quot;segments&quot;</span> <span class="st">&quot;das&quot;</span>     </span></code></pre></div>
<p>The <code>segments</code> slot contains summary data for each effort segment, including start/mid/end coordinates, average conditions, and segment distance:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="processing.html#cb68-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>segments <span class="op">%&gt;%</span><span class="st"> </span>glimpse</span>
<span id="cb68-2"><a href="processing.html#cb68-2"></a>Rows<span class="op">:</span><span class="st"> </span><span class="dv">1</span>,<span class="dv">890</span></span>
<span id="cb68-3"><a href="processing.html#cb68-3"></a>Columns<span class="op">:</span><span class="st"> </span><span class="dv">37</span></span>
<span id="cb68-4"><a href="processing.html#cb68-4"></a><span class="op">$</span><span class="st"> </span>Cruise       <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">901</span>, <span class="dv">901</span>, <span class="dv">901</span>, <span class="dv">901</span>, <span class="dv">901</span>, <span class="dv">901</span>, <span class="dv">901</span>, <span class="dv">901</span>, <span class="dv">901</span>, <span class="dv">901</span>, <span class="dv">901</span>, 90…</span>
<span id="cb68-5"><a href="processing.html#cb68-5"></a><span class="op">$</span><span class="st"> </span>ship         <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> &quot;Mc2&quot;</span>, <span class="st">&quot;Mc2&quot;</span>, <span class="st">&quot;Mc2&quot;</span>, <span class="st">&quot;Mc2&quot;</span>, <span class="st">&quot;Mc2&quot;</span>, <span class="st">&quot;Mc2&quot;</span>, <span class="st">&quot;Mc2&quot;</span>, <span class="st">&quot;Mc2&quot;</span>, <span class="st">&quot;…</span></span>
<span id="cb68-6"><a href="processing.html#cb68-6"></a><span class="st">$ stratum      &lt;chr&gt; &quot;</span>WHICEAS<span class="st">&quot;, &quot;</span>WHICEAS<span class="st">&quot;, &quot;</span>WHICEAS<span class="st">&quot;, &quot;</span>WHICEAS<span class="st">&quot;, &quot;</span>WHICEAS<span class="st">&quot;, &quot;</span>W…</span>
<span id="cb68-7"><a href="processing.html#cb68-7"></a><span class="op">$</span><span class="st"> </span>seg_id       <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>, <span class="dv">16</span>, 17…</span>
<span id="cb68-8"><a href="processing.html#cb68-8"></a><span class="op">$</span><span class="st"> </span>yday         <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">37</span>, <span class="dv">41</span>, <span class="dv">41</span>, <span class="dv">44</span>, <span class="dv">49</span>, <span class="dv">51</span>, <span class="dv">37</span>, <span class="dv">37</span>, <span class="dv">41</span>, <span class="dv">43</span>, <span class="dv">46</span>, <span class="dv">47</span>, <span class="dv">48</span>, <span class="dv">37</span>, 3…</span>
<span id="cb68-9"><a href="processing.html#cb68-9"></a><span class="op">$</span><span class="st"> </span>dist         <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">149.851072</span>, <span class="fl">3.848268</span>, <span class="fl">149.477608</span>, <span class="fl">150.656675</span>, <span class="fl">16.254889</span>, …</span>
<span id="cb68-10"><a href="processing.html#cb68-10"></a><span class="op">$</span><span class="st"> </span>lat1         <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">21.99817</span>, <span class="fl">21.14833</span>, <span class="fl">21.14817</span>, <span class="fl">19.19833</span>, <span class="fl">20.40850</span>, <span class="fl">21.4130</span>…</span>
<span id="cb68-11"><a href="processing.html#cb68-11"></a><span class="op">$</span><span class="st"> </span>lon1         <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">-159.1487</span>, <span class="fl">-158.0103</span>, <span class="fl">-158.0943</span>, <span class="fl">-156.0760</span>, <span class="fl">-156.1288</span>, <span class="op">-</span>1…</span>
<span id="cb68-12"><a href="processing.html#cb68-12"></a><span class="op">$</span><span class="st"> </span>DateTime1    <span class="op">&lt;</span>dttm<span class="op">&gt;</span><span class="st"> </span><span class="dv">2009-02-06</span> <span class="dv">07</span><span class="op">:</span><span class="dv">33</span><span class="op">:</span><span class="dv">52</span>, <span class="dv">2009-02-10</span> <span class="dv">09</span><span class="op">:</span><span class="dv">41</span><span class="op">:</span><span class="dv">09</span>, <span class="dv">2009-02-10</span> <span class="dv">10</span><span class="op">:</span>…</span>
<span id="cb68-13"><a href="processing.html#cb68-13"></a><span class="op">$</span><span class="st"> </span>timestamp1   <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">1233905632</span>, <span class="dv">1234258869</span>, <span class="dv">1234262132</span>, <span class="dv">1234548006</span>, 123498100…</span>
<span id="cb68-14"><a href="processing.html#cb68-14"></a><span class="op">$</span><span class="st"> </span>lat2         <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">21.14850</span>, <span class="fl">21.14967</span>, <span class="fl">19.19783</span>, <span class="fl">20.40850</span>, <span class="fl">21.41083</span>, <span class="fl">21.6810</span>…</span>
<span id="cb68-15"><a href="processing.html#cb68-15"></a><span class="op">$</span><span class="st"> </span>lon2         <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">-158.0097</span>, <span class="fl">-158.0918</span>, <span class="fl">-156.0758</span>, <span class="fl">-156.1288</span>, <span class="fl">-157.2680</span>, <span class="op">-</span>1…</span>
<span id="cb68-16"><a href="processing.html#cb68-16"></a><span class="op">$</span><span class="st"> </span>DateTime2    <span class="op">&lt;</span>dttm<span class="op">&gt;</span><span class="st"> </span><span class="dv">2009-02-10</span> <span class="dv">09</span><span class="op">:</span><span class="dv">40</span><span class="op">:</span><span class="dv">54</span>, <span class="dv">2009-02-10</span> <span class="dv">10</span><span class="op">:</span><span class="dv">33</span><span class="op">:</span><span class="dv">32</span>, <span class="dv">2009-02-13</span> <span class="dv">17</span><span class="op">:</span>…</span>
<span id="cb68-17"><a href="processing.html#cb68-17"></a><span class="op">$</span><span class="st"> </span>timestamp2   <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">1234258854</span>, <span class="dv">1234262012</span>, <span class="dv">1234547957</span>, <span class="dv">1234981000</span>, 123514077…</span>
<span id="cb68-18"><a href="processing.html#cb68-18"></a><span class="op">$</span><span class="st"> </span>mlat         <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">19.57617</span>, <span class="fl">21.16417</span>, <span class="fl">21.33983</span>, <span class="fl">19.80333</span>, <span class="fl">21.40417</span>, <span class="fl">21.9613</span>…</span>
<span id="cb68-19"><a href="processing.html#cb68-19"></a><span class="op">$</span><span class="st"> </span>mlon         <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">-156.0153</span>, <span class="fl">-158.0875</span>, <span class="fl">-160.2627</span>, <span class="fl">-155.0388</span>, <span class="fl">-157.2693</span>, <span class="op">-</span>1…</span>
<span id="cb68-20"><a href="processing.html#cb68-20"></a><span class="op">$</span><span class="st"> </span>mDateTime    <span class="op">&lt;</span>dttm<span class="op">&gt;</span><span class="st"> </span><span class="dv">2009-02-08</span> <span class="dv">07</span><span class="op">:</span><span class="dv">57</span><span class="op">:</span><span class="dv">43</span>, <span class="dv">2009-02-10</span> <span class="dv">10</span><span class="op">:</span><span class="dv">13</span><span class="op">:</span><span class="dv">32</span>, <span class="dv">2009-02-11</span> <span class="dv">11</span><span class="op">:</span>…</span>
<span id="cb68-21"><a href="processing.html#cb68-21"></a><span class="op">$</span><span class="st"> </span>mtimestamp   <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">1233905632</span>, <span class="dv">1234258869</span>, <span class="dv">1234262132</span>, <span class="dv">1234548006</span>, 123498100…</span>
<span id="cb68-22"><a href="processing.html#cb68-22"></a><span class="op">$</span><span class="st"> </span>use          <span class="op">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, TRU…</span>
<span id="cb68-23"><a href="processing.html#cb68-23"></a><span class="op">$</span><span class="st"> </span>Mode         <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> &quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C…</span></span>
<span id="cb68-24"><a href="processing.html#cb68-24"></a><span class="st">$ EffType      &lt;chr&gt; NA, &quot;</span>N<span class="st">&quot;, &quot;</span>S<span class="st">&quot;, &quot;</span>S<span class="st">&quot;, &quot;</span>S<span class="st">&quot;, &quot;</span>S<span class="st">&quot;, &quot;</span>N<span class="st">&quot;, &quot;</span>N<span class="st">&quot;, &quot;</span>N<span class="st">&quot;, &quot;</span>N<span class="st">&quot;, &quot;</span>N<span class="st">&quot;, &quot;</span>N<span class="st">&quot;…</span></span>
<span id="cb68-25"><a href="processing.html#cb68-25"></a><span class="st">$ OnEffort     &lt;lgl&gt; TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE…</span></span>
<span id="cb68-26"><a href="processing.html#cb68-26"></a><span class="st">$ ESWsides     &lt;dbl&gt; NA, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,…</span></span>
<span id="cb68-27"><a href="processing.html#cb68-27"></a><span class="st">$ year         &lt;dbl&gt; 2009, 2009, 2009, 2009, 2009, 2009, 2009, 2009, 2009, 200…</span></span>
<span id="cb68-28"><a href="processing.html#cb68-28"></a><span class="st">$ month        &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …</span></span>
<span id="cb68-29"><a href="processing.html#cb68-29"></a><span class="st">$ day          &lt;int&gt; 6, 10, 10, 13, 18, 20, 6, 6, 10, 12, 15, 16, 17, 6, 7, 7,…</span></span>
<span id="cb68-30"><a href="processing.html#cb68-30"></a><span class="st">$ min_line     &lt;int&gt; 424489, 425732, 425764, 426976, 428376, 428554, 424728, 4…</span></span>
<span id="cb68-31"><a href="processing.html#cb68-31"></a><span class="st">$ max_line     &lt;int&gt; 425731, 425763, 426975, 428375, 428553, 429845, 424824, 4…</span></span>
<span id="cb68-32"><a href="processing.html#cb68-32"></a><span class="st">$ n_rows       &lt;int&gt; 588, 21, 611, 611, 82, 476, 74, 31, 51, 211, 62, 22, 95, …</span></span>
<span id="cb68-33"><a href="processing.html#cb68-33"></a><span class="st">$ avgBft       &lt;dbl&gt; 3.937522, 2.000000, 2.693855, 4.236977, 5.650836, 5.42778…</span></span>
<span id="cb68-34"><a href="processing.html#cb68-34"></a><span class="st">$ avgSwellHght &lt;dbl&gt; 3.665611, 2.000000, 2.990173, 4.295680, 6.000000, 5.91794…</span></span>
<span id="cb68-35"><a href="processing.html#cb68-35"></a><span class="st">$ avgHorizSun  &lt;dbl&gt; 5.476773, 7.386038, 5.251324, 7.670550, 7.650836, 4.41183…</span></span>
<span id="cb68-36"><a href="processing.html#cb68-36"></a><span class="st">$ avgVertSun   &lt;dbl&gt; 1.510175, 2.806981, 1.581961, 1.660281, 1.000000, 1.56607…</span></span>
<span id="cb68-37"><a href="processing.html#cb68-37"></a><span class="st">$ avgGlare     &lt;dbl&gt; 0.01104594, 0.00000000, 0.24616396, 0.11466734, 0.0000000…</span></span>
<span id="cb68-38"><a href="processing.html#cb68-38"></a><span class="st">$ avgVis       &lt;dbl&gt; 6.707940, 6.500000, 5.839215, 5.630527, 6.500000, 5.76905…</span></span>
<span id="cb68-39"><a href="processing.html#cb68-39"></a><span class="st">$ avgCourse    &lt;dbl&gt; 182.5003, 244.8516, 149.4506, 204.8376, 284.8100, 147.147…</span></span>
<span id="cb68-40"><a href="processing.html#cb68-40"></a><span class="st">$ avgSpdKt     &lt;dbl&gt; 8.296386, 7.427145, 9.226427, 9.395206, 9.681004, 9.17516…</span></span></code></pre></div>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="processing.html#cb69-1"></a><span class="co"># Number of segments</span></span>
<span id="cb69-2"><a href="processing.html#cb69-2"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>segments <span class="op">%&gt;%</span><span class="st"> </span>nrow</span>
<span id="cb69-3"><a href="processing.html#cb69-3"></a>[<span class="dv">1</span>] <span class="dv">1890</span></span>
<span id="cb69-4"><a href="processing.html#cb69-4"></a></span>
<span id="cb69-5"><a href="processing.html#cb69-5"></a><span class="co"># Segment length distribution</span></span>
<span id="cb69-6"><a href="processing.html#cb69-6"></a>x &lt;-<span class="st"> </span>cruz<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>segments<span class="op">$</span>dist</span>
<span id="cb69-7"><a href="processing.html#cb69-7"></a><span class="kw">hist</span>(x,</span>
<span id="cb69-8"><a href="processing.html#cb69-8"></a>     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>,<span class="kw">ceiling</span>(<span class="kw">max</span>(x, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)),<span class="dt">by=</span><span class="dv">1</span>),</span>
<span id="cb69-9"><a href="processing.html#cb69-9"></a>     <span class="dt">xlab=</span><span class="st">&#39;Segment lengths (km)&#39;</span>,</span>
<span id="cb69-10"><a href="processing.html#cb69-10"></a>     <span class="dt">main=</span><span class="kw">paste0</span>(<span class="st">&#39;Target km: &#39;</span>,settings<span class="op">$</span>survey<span class="op">$</span>segment_target_km))</span></code></pre></div>
<p><img src="figures/unnamed-chunk-78-1.png" width="672" /></p>
<p>And the <code>das</code> slot holds the original <code>data.frame</code> of <code>DAS</code> data, modified slightly: the column <code>OnEffort</code> has been modified according to Beaufort range conditions, and the column <code>seg_id</code> indicates which segment the event occurs within</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="processing.html#cb70-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>das <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb70-2"><a href="processing.html#cb70-2"></a> [<span class="dv">1</span>] <span class="st">&quot;Event&quot;</span>            <span class="st">&quot;DateTime&quot;</span>         <span class="st">&quot;Lat&quot;</span>              <span class="st">&quot;Lon&quot;</span>             </span>
<span id="cb70-3"><a href="processing.html#cb70-3"></a> [<span class="dv">5</span>] <span class="st">&quot;OnEffort&quot;</span>         <span class="st">&quot;Cruise&quot;</span>           <span class="st">&quot;Mode&quot;</span>             <span class="st">&quot;OffsetGMT&quot;</span>       </span>
<span id="cb70-4"><a href="processing.html#cb70-4"></a> [<span class="dv">9</span>] <span class="st">&quot;EffType&quot;</span>          <span class="st">&quot;ESWsides&quot;</span>         <span class="st">&quot;Course&quot;</span>           <span class="st">&quot;SpdKt&quot;</span>           </span>
<span id="cb70-5"><a href="processing.html#cb70-5"></a>[<span class="dv">13</span>] <span class="st">&quot;Bft&quot;</span>              <span class="st">&quot;SwellHght&quot;</span>        <span class="st">&quot;WindSpdKt&quot;</span>        <span class="st">&quot;RainFog&quot;</span>         </span>
<span id="cb70-6"><a href="processing.html#cb70-6"></a>[<span class="dv">17</span>] <span class="st">&quot;HorizSun&quot;</span>         <span class="st">&quot;VertSun&quot;</span>          <span class="st">&quot;Glare&quot;</span>            <span class="st">&quot;Vis&quot;</span>             </span>
<span id="cb70-7"><a href="processing.html#cb70-7"></a>[<span class="dv">21</span>] <span class="st">&quot;ObsL&quot;</span>             <span class="st">&quot;Rec&quot;</span>              <span class="st">&quot;ObsR&quot;</span>             <span class="st">&quot;ObsInd&quot;</span>          </span>
<span id="cb70-8"><a href="processing.html#cb70-8"></a>[<span class="dv">25</span>] <span class="st">&quot;Data1&quot;</span>            <span class="st">&quot;Data2&quot;</span>            <span class="st">&quot;Data3&quot;</span>            <span class="st">&quot;Data4&quot;</span>           </span>
<span id="cb70-9"><a href="processing.html#cb70-9"></a>[<span class="dv">29</span>] <span class="st">&quot;Data5&quot;</span>            <span class="st">&quot;Data6&quot;</span>            <span class="st">&quot;Data7&quot;</span>            <span class="st">&quot;Data8&quot;</span>           </span>
<span id="cb70-10"><a href="processing.html#cb70-10"></a>[<span class="dv">33</span>] <span class="st">&quot;Data9&quot;</span>            <span class="st">&quot;Data10&quot;</span>           <span class="st">&quot;Data11&quot;</span>           <span class="st">&quot;Data12&quot;</span>          </span>
<span id="cb70-11"><a href="processing.html#cb70-11"></a>[<span class="dv">37</span>] <span class="st">&quot;EffortDot&quot;</span>        <span class="st">&quot;EventNum&quot;</span>         <span class="st">&quot;file_das&quot;</span>         <span class="st">&quot;line_num&quot;</span>        </span>
<span id="cb70-12"><a href="processing.html#cb70-12"></a>[<span class="dv">41</span>] <span class="st">&quot;stratum_HI_EEZ&quot;</span>   <span class="st">&quot;stratum_OtherCNP&quot;</span> <span class="st">&quot;stratum_WHICEAS&quot;</span>  <span class="st">&quot;year&quot;</span>            </span>
<span id="cb70-13"><a href="processing.html#cb70-13"></a>[<span class="dv">45</span>] <span class="st">&quot;month&quot;</span>            <span class="st">&quot;day&quot;</span>              <span class="st">&quot;yday&quot;</span>             <span class="st">&quot;km_int&quot;</span>          </span>
<span id="cb70-14"><a href="processing.html#cb70-14"></a>[<span class="dv">49</span>] <span class="st">&quot;km_cum&quot;</span>           <span class="st">&quot;ship&quot;</span>             <span class="st">&quot;stratum&quot;</span>          <span class="st">&quot;seg_id&quot;</span>          </span>
<span id="cb70-15"><a href="processing.html#cb70-15"></a>[<span class="dv">53</span>] <span class="st">&quot;use&quot;</span>             </span></code></pre></div>
<p>The <code>segmentize()</code> function and its associated settings were designed to give researchers full control over how data are segmented, be it for design-based density analysis (which tend to use long segments of 100 km or more and allow for non-contiguous effort to be included in the same segment) or for habitat modeling (which tend to use short segments of 5 - 10 km and disallow non-contiguous effort to be pooled into the same segment). To demonstrate that versatility, checkout the <a href="segmentizing.html#segmentizing">appendix on segmentizing</a>.</p>
</div>
<div id="process-sightings" class="section level3 unnumbered hasAnchor">
<h3>Process sightings<a href="processing.html#process-sightings" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To process sightings for each cohort of species, use the function <code>process_sightings()</code>. This function has three basic steps: for each cohort, the function (1) prepares a sightings table using the function <code>das_sight()</code> from <code>swfscDAS</code>; (2) filters those sightings to species codes specified for the cohort in your <code>settings</code> input; and (3) evaluates each of those sightings, asking if each should be included in the analysis according to your <code>settings</code>.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="processing.html#cb71-1"></a>cruz &lt;-<span class="st"> </span><span class="kw">process_sightings</span>(cruz)</span></code></pre></div>
<p>The function produces a formatted dataset and adds it to a new <code>sightings</code> slot.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="processing.html#cb72-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>all <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb72-2"><a href="processing.html#cb72-2"></a>[<span class="dv">1</span>] <span class="st">&quot;segments&quot;</span>  <span class="st">&quot;das&quot;</span>       <span class="st">&quot;sightings&quot;</span></span>
<span id="cb72-3"><a href="processing.html#cb72-3"></a></span>
<span id="cb72-4"><a href="processing.html#cb72-4"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>bottlenose <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb72-5"><a href="processing.html#cb72-5"></a>[<span class="dv">1</span>] <span class="st">&quot;segments&quot;</span>  <span class="st">&quot;das&quot;</span>       <span class="st">&quot;sightings&quot;</span></span>
<span id="cb72-6"><a href="processing.html#cb72-6"></a></span>
<span id="cb72-7"><a href="processing.html#cb72-7"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>spotted <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb72-8"><a href="processing.html#cb72-8"></a>[<span class="dv">1</span>] <span class="st">&quot;segments&quot;</span>  <span class="st">&quot;das&quot;</span>       <span class="st">&quot;sightings&quot;</span></span></code></pre></div>
<p>Note that the <code>sightings</code> table has a column named <code>included</code> (<code>TRUE</code> = yes, use it in the analysis). Any sightings that do not meet the inclusion criteria as specified in your settings will be <code>included = FALSE</code>, but they won’t be removed from the data.</p>
<p>The <code>sightings</code> table also has a new column, <code>ss_valid</code>,
indicating whether or not the school size estimate for this sighting
is valid and appropriate for use in abundance estimation and detection function fitting
when school size is used as a covariate.</p>
<p>Since the sightings in each cohort are processed slightly differently according to the cohort’s specific settings – most importantly the species that will be included – you should expect different numbers of included/excluded sightings in each cohort dataset:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="processing.html#cb73-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>sightings<span class="op">$</span>included <span class="op">%&gt;%</span><span class="st"> </span>table</span>
<span id="cb73-2"><a href="processing.html#cb73-2"></a>.</span>
<span id="cb73-3"><a href="processing.html#cb73-3"></a><span class="ot">FALSE</span>  <span class="ot">TRUE</span> </span>
<span id="cb73-4"><a href="processing.html#cb73-4"></a>  <span class="dv">810</span>  <span class="dv">3124</span> </span>
<span id="cb73-5"><a href="processing.html#cb73-5"></a></span>
<span id="cb73-6"><a href="processing.html#cb73-6"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>bottlenose<span class="op">$</span>sightings<span class="op">$</span>included <span class="op">%&gt;%</span><span class="st"> </span>table</span>
<span id="cb73-7"><a href="processing.html#cb73-7"></a>.</span>
<span id="cb73-8"><a href="processing.html#cb73-8"></a><span class="ot">FALSE</span>  <span class="ot">TRUE</span> </span>
<span id="cb73-9"><a href="processing.html#cb73-9"></a>  <span class="dv">114</span>   <span class="dv">409</span> </span></code></pre></div>
<p>When this function’s <code>verbose</code> argument is <code>TRUE</code> (the default), a message is printed each time a sighting does not meet the inclusion criteria.</p>
<div id="sightings-data-structure" class="section level4 unnumbered hasAnchor">
<h4>Sightings data structure<a href="processing.html#sightings-data-structure" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>sightings</code> table has many other variables:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="processing.html#cb74-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>sightings <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb74-2"><a href="processing.html#cb74-2"></a> [<span class="dv">1</span>] <span class="st">&quot;Event&quot;</span>            <span class="st">&quot;DateTime&quot;</span>         <span class="st">&quot;Lat&quot;</span>              <span class="st">&quot;Lon&quot;</span>             </span>
<span id="cb74-3"><a href="processing.html#cb74-3"></a> [<span class="dv">5</span>] <span class="st">&quot;OnEffort&quot;</span>         <span class="st">&quot;Cruise&quot;</span>           <span class="st">&quot;Mode&quot;</span>             <span class="st">&quot;OffsetGMT&quot;</span>       </span>
<span id="cb74-4"><a href="processing.html#cb74-4"></a> [<span class="dv">9</span>] <span class="st">&quot;EffType&quot;</span>          <span class="st">&quot;ESWsides&quot;</span>         <span class="st">&quot;Course&quot;</span>           <span class="st">&quot;SpdKt&quot;</span>           </span>
<span id="cb74-5"><a href="processing.html#cb74-5"></a>[<span class="dv">13</span>] <span class="st">&quot;Bft&quot;</span>              <span class="st">&quot;SwellHght&quot;</span>        <span class="st">&quot;WindSpdKt&quot;</span>        <span class="st">&quot;RainFog&quot;</span>         </span>
<span id="cb74-6"><a href="processing.html#cb74-6"></a>[<span class="dv">17</span>] <span class="st">&quot;HorizSun&quot;</span>         <span class="st">&quot;VertSun&quot;</span>          <span class="st">&quot;Glare&quot;</span>            <span class="st">&quot;Vis&quot;</span>             </span>
<span id="cb74-7"><a href="processing.html#cb74-7"></a>[<span class="dv">21</span>] <span class="st">&quot;ObsL&quot;</span>             <span class="st">&quot;Rec&quot;</span>              <span class="st">&quot;ObsR&quot;</span>             <span class="st">&quot;ObsInd&quot;</span>          </span>
<span id="cb74-8"><a href="processing.html#cb74-8"></a>[<span class="dv">25</span>] <span class="st">&quot;EffortDot&quot;</span>        <span class="st">&quot;EventNum&quot;</span>         <span class="st">&quot;file_das&quot;</span>         <span class="st">&quot;line_num&quot;</span>        </span>
<span id="cb74-9"><a href="processing.html#cb74-9"></a>[<span class="dv">29</span>] <span class="st">&quot;stratum_HI_EEZ&quot;</span>   <span class="st">&quot;stratum_OtherCNP&quot;</span> <span class="st">&quot;stratum_WHICEAS&quot;</span>  <span class="st">&quot;year&quot;</span>            </span>
<span id="cb74-10"><a href="processing.html#cb74-10"></a>[<span class="dv">33</span>] <span class="st">&quot;month&quot;</span>            <span class="st">&quot;day&quot;</span>              <span class="st">&quot;yday&quot;</span>             <span class="st">&quot;km_int&quot;</span>          </span>
<span id="cb74-11"><a href="processing.html#cb74-11"></a>[<span class="dv">37</span>] <span class="st">&quot;km_cum&quot;</span>           <span class="st">&quot;ship&quot;</span>             <span class="st">&quot;stratum&quot;</span>          <span class="st">&quot;seg_id&quot;</span>          </span>
<span id="cb74-12"><a href="processing.html#cb74-12"></a>[<span class="dv">41</span>] <span class="st">&quot;use&quot;</span>              <span class="st">&quot;SightNo&quot;</span>          <span class="st">&quot;Subgroup&quot;</span>         <span class="st">&quot;SightNoDaily&quot;</span>    </span>
<span id="cb74-13"><a href="processing.html#cb74-13"></a>[<span class="dv">45</span>] <span class="st">&quot;Obs&quot;</span>              <span class="st">&quot;ObsStd&quot;</span>           <span class="st">&quot;Bearing&quot;</span>          <span class="st">&quot;Reticle&quot;</span>         </span>
<span id="cb74-14"><a href="processing.html#cb74-14"></a>[<span class="dv">49</span>] <span class="st">&quot;DistNm&quot;</span>           <span class="st">&quot;Cue&quot;</span>              <span class="st">&quot;Method&quot;</span>           <span class="st">&quot;Photos&quot;</span>          </span>
<span id="cb74-15"><a href="processing.html#cb74-15"></a>[<span class="dv">53</span>] <span class="st">&quot;Birds&quot;</span>            <span class="st">&quot;CalibSchool&quot;</span>      <span class="st">&quot;PhotosAerial&quot;</span>     <span class="st">&quot;Biopsy&quot;</span>          </span>
<span id="cb74-16"><a href="processing.html#cb74-16"></a>[<span class="dv">57</span>] <span class="st">&quot;CourseSchool&quot;</span>     <span class="st">&quot;TurtleSp&quot;</span>         <span class="st">&quot;TurtleGs&quot;</span>         <span class="st">&quot;TurtleJFR&quot;</span>       </span>
<span id="cb74-17"><a href="processing.html#cb74-17"></a>[<span class="dv">61</span>] <span class="st">&quot;TurtleAge&quot;</span>        <span class="st">&quot;TurtleCapt&quot;</span>       <span class="st">&quot;PinnipedSp&quot;</span>       <span class="st">&quot;PinnipedGs&quot;</span>      </span>
<span id="cb74-18"><a href="processing.html#cb74-18"></a>[<span class="dv">65</span>] <span class="st">&quot;BoatType&quot;</span>         <span class="st">&quot;BoatGs&quot;</span>           <span class="st">&quot;PerpDistKm&quot;</span>       <span class="st">&quot;species&quot;</span>         </span>
<span id="cb74-19"><a href="processing.html#cb74-19"></a>[<span class="dv">69</span>] <span class="st">&quot;best&quot;</span>             <span class="st">&quot;low&quot;</span>              <span class="st">&quot;high&quot;</span>             <span class="st">&quot;prob&quot;</span>            </span>
<span id="cb74-20"><a href="processing.html#cb74-20"></a>[<span class="dv">73</span>] <span class="st">&quot;mixed&quot;</span>            <span class="st">&quot;ss_tot&quot;</span>           <span class="st">&quot;lnsstot&quot;</span>          <span class="st">&quot;ss_percent&quot;</span>      </span>
<span id="cb74-21"><a href="processing.html#cb74-21"></a>[<span class="dv">77</span>] <span class="st">&quot;n_sp&quot;</span>             <span class="st">&quot;n_obs&quot;</span>            <span class="st">&quot;n_best&quot;</span>           <span class="st">&quot;n_low&quot;</span>           </span>
<span id="cb74-22"><a href="processing.html#cb74-22"></a>[<span class="dv">81</span>] <span class="st">&quot;n_high&quot;</span>           <span class="st">&quot;calibr&quot;</span>           <span class="st">&quot;ss_valid&quot;</span>         <span class="st">&quot;mixed_max&quot;</span>       </span>
<span id="cb74-23"><a href="processing.html#cb74-23"></a>[<span class="dv">85</span>] <span class="st">&quot;spp_max&quot;</span>          <span class="st">&quot;included&quot;</span>        </span></code></pre></div>
<p>Columns 42 onwards correspond to sightings information. Columns of note:</p>
<ul>
<li><p><code>species</code> contains the species code. There is only one species-code per row (i.e, multi-species sightings have been expanded to multiple rows).</p></li>
<li><p><code>best</code>, <code>low</code>, and <code>high</code> contain the refined group size estimates, averaged across observers and calibrated according to the cohort’s settings specifications. For multi-species sightings, these numbers represent the number of individuals for the single species represented in the row (i.e., the original group size estimate has been scaled by the percentage attritbuted to this species).</p></li>
<li><p>The columns following those group size estimates (<code>prob</code> through <code>spp_max</code>) detail how group sizes were estimated: <code>prob</code> indicates whether probable species codes were accepted; <code>mixed</code> indicates whether this species’ sighting is part of a mixed-species sighting; <code>n_sp</code> provides the number of species occurring in this sighitng; <code>n_obs</code> gives the number of observers who contributed group size estimates; <code>n_best</code> through <code>n_high</code> gives the number of valid group size estimates given; and <code>calibr</code> indicates whether or not calibration was attempted for this sighting based on the settings (see next section); <code>mixed_max</code> indicates whether this species was the most abundant in the sighting (if multi-species); <code>spp_max</code> indicates the species code for the most abundant species in the sighting (if multi-species).</p></li>
<li><p>As explained above, the final column, <code>included</code>, indicates whether this species should be included in the analysis.</p></li>
</ul>
<p>Here is a glimpse of the data:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="processing.html#cb75-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>sightings <span class="op">%&gt;%</span><span class="st"> </span>glimpse</span>
<span id="cb75-2"><a href="processing.html#cb75-2"></a>Rows<span class="op">:</span><span class="st"> </span><span class="dv">3</span>,<span class="dv">934</span></span>
<span id="cb75-3"><a href="processing.html#cb75-3"></a>Columns<span class="op">:</span><span class="st"> </span><span class="dv">86</span></span>
<span id="cb75-4"><a href="processing.html#cb75-4"></a><span class="op">$</span><span class="st"> </span>Event            <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> &quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>…</span>
<span id="cb75-5"><a href="processing.html#cb75-5"></a><span class="op">$</span><span class="st"> </span>DateTime         <span class="op">&lt;</span>dttm<span class="op">&gt;</span><span class="st"> </span><span class="dv">1986-11-26</span> <span class="dv">09</span><span class="op">:</span><span class="dv">00</span><span class="op">:</span><span class="dv">00</span>, <span class="dv">1986-11-26</span> <span class="dv">14</span><span class="op">:</span><span class="dv">40</span><span class="op">:</span><span class="dv">00</span>, <span class="dv">1986-11</span><span class="op">-</span>26…</span>
<span id="cb75-6"><a href="processing.html#cb75-6"></a><span class="op">$</span><span class="st"> </span>Lat              <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">4.983333</span>, <span class="fl">5.616667</span>, <span class="fl">5.866667</span>, <span class="fl">7.050000</span>, <span class="fl">7.466667</span>, <span class="fl">9.4</span>…</span>
<span id="cb75-7"><a href="processing.html#cb75-7"></a><span class="op">$</span><span class="st"> </span>Lon              <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">-120.9500</span>, <span class="fl">-121.6667</span>, <span class="fl">-121.9833</span>, <span class="fl">-123.5000</span>, <span class="fl">-123.9167</span>…</span>
<span id="cb75-8"><a href="processing.html#cb75-8"></a><span class="op">$</span><span class="st"> </span>OnEffort         <span class="op">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>,…</span>
<span id="cb75-9"><a href="processing.html#cb75-9"></a><span class="op">$</span><span class="st"> </span>Cruise           <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">989</span>, <span class="dv">989</span>, <span class="dv">989</span>, <span class="dv">989</span>, <span class="dv">989</span>, <span class="dv">989</span>, <span class="dv">989</span>, <span class="dv">989</span>, <span class="dv">989</span>, <span class="dv">989</span>, 989…</span>
<span id="cb75-10"><a href="processing.html#cb75-10"></a><span class="op">$</span><span class="st"> </span>Mode             <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> &quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;C&quot;</span>…</span>
<span id="cb75-11"><a href="processing.html#cb75-11"></a><span class="op">$</span><span class="st"> </span>OffsetGMT        <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-12"><a href="processing.html#cb75-12"></a><span class="op">$</span><span class="st"> </span>EffType          <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> &quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;S&quot;</span>…</span>
<span id="cb75-13"><a href="processing.html#cb75-13"></a><span class="op">$</span><span class="st"> </span>ESWsides         <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>,…</span>
<span id="cb75-14"><a href="processing.html#cb75-14"></a><span class="op">$</span><span class="st"> </span>Course           <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">310</span>, <span class="dv">316</span>, <span class="dv">313</span>, <span class="dv">310</span>, <span class="dv">310</span>, <span class="dv">305</span>, <span class="dv">305</span>, <span class="dv">305</span>, <span class="dv">305</span>, <span class="dv">305</span>, 305…</span>
<span id="cb75-15"><a href="processing.html#cb75-15"></a><span class="op">$</span><span class="st"> </span>SpdKt            <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">10.2</span>, <span class="fl">9.9</span>, <span class="fl">9.6</span>, <span class="fl">10.2</span>, <span class="fl">10.3</span>, <span class="fl">9.8</span>, <span class="fl">9.8</span>, <span class="fl">9.6</span>, <span class="fl">10.1</span>, <span class="fl">10.1</span>…</span>
<span id="cb75-16"><a href="processing.html#cb75-16"></a><span class="op">$</span><span class="st"> </span>Bft              <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>,…</span>
<span id="cb75-17"><a href="processing.html#cb75-17"></a><span class="op">$</span><span class="st"> </span>SwellHght        <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-18"><a href="processing.html#cb75-18"></a><span class="op">$</span><span class="st"> </span>WindSpdKt        <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-19"><a href="processing.html#cb75-19"></a><span class="op">$</span><span class="st"> </span>RainFog          <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>,…</span>
<span id="cb75-20"><a href="processing.html#cb75-20"></a><span class="op">$</span><span class="st"> </span>HorizSun         <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="ot">NA</span>, <span class="dv">7</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="ot">NA</span>, <span class="dv">4</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-21"><a href="processing.html#cb75-21"></a><span class="op">$</span><span class="st"> </span>VertSun          <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="ot">NA</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="ot">NA</span>, <span class="dv">1</span>, <span class="ot">NA</span>, NA…</span>
<span id="cb75-22"><a href="processing.html#cb75-22"></a><span class="op">$</span><span class="st"> </span>Glare            <span class="op">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">NA</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, …</span>
<span id="cb75-23"><a href="processing.html#cb75-23"></a><span class="op">$</span><span class="st"> </span>Vis              <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-24"><a href="processing.html#cb75-24"></a><span class="op">$</span><span class="st"> </span>ObsL             <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> &quot;004&quot;</span>, <span class="st">&quot;022&quot;</span>, <span class="st">&quot;056&quot;</span>, <span class="st">&quot;056&quot;</span>, <span class="st">&quot;004&quot;</span>, <span class="st">&quot;031&quot;</span>, <span class="st">&quot;031&quot;</span>, <span class="st">&quot;004…</span></span>
<span id="cb75-25"><a href="processing.html#cb75-25"></a><span class="st">$ Rec              &lt;chr&gt; &quot;</span><span class="dv">056</span><span class="st">&quot;, &quot;</span><span class="dv">031</span><span class="st">&quot;, &quot;</span><span class="dv">062</span><span class="st">&quot;, &quot;</span><span class="dv">062</span><span class="st">&quot;, &quot;</span><span class="dv">056</span><span class="st">&quot;, &quot;</span><span class="dv">022</span><span class="st">&quot;, &quot;</span><span class="dv">022</span><span class="st">&quot;, &quot;</span>056…</span>
<span id="cb75-26"><a href="processing.html#cb75-26"></a><span class="op">$</span><span class="st"> </span>ObsR             <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> &quot;062&quot;</span>, <span class="st">&quot;057&quot;</span>, <span class="st">&quot;004&quot;</span>, <span class="st">&quot;004&quot;</span>, <span class="st">&quot;062&quot;</span>, <span class="st">&quot;057&quot;</span>, <span class="st">&quot;057&quot;</span>, <span class="st">&quot;062…</span></span>
<span id="cb75-27"><a href="processing.html#cb75-27"></a><span class="st">$ ObsInd           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb75-28"><a href="processing.html#cb75-28"></a><span class="st">$ EffortDot        &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE,…</span></span>
<span id="cb75-29"><a href="processing.html#cb75-29"></a><span class="st">$ EventNum         &lt;chr&gt; &quot;</span><span class="dv">18</span><span class="st">&quot;, &quot;</span><span class="dv">43</span><span class="st">&quot;, &quot;</span><span class="dv">59</span><span class="st">&quot;, &quot;</span><span class="dv">9</span><span class="st">&quot;, &quot;</span><span class="dv">32</span><span class="st">&quot;, &quot;</span><span class="dv">10</span><span class="st">&quot;, &quot;</span><span class="dv">10</span><span class="st">&quot;, &quot;</span><span class="dv">22</span><span class="st">&quot;, &quot;</span><span class="dv">34</span><span class="st">&quot;, …</span></span>
<span id="cb75-30"><a href="processing.html#cb75-30"></a><span class="st">$ file_das         &lt;chr&gt; &quot;</span>CenPac1986<span class="dv">-2020</span>_Final_alb.das<span class="st">&quot;, &quot;</span>CenPac1986<span class="dv">-2020</span>_Fin…</span>
<span id="cb75-31"><a href="processing.html#cb75-31"></a><span class="op">$</span><span class="st"> </span>line_num         <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="dv">10295</span>, <span class="dv">10321</span>, <span class="dv">10340</span>, <span class="dv">10358</span>, <span class="dv">10384</span>, <span class="dv">10451</span>, <span class="dv">10451</span>, 1046…</span>
<span id="cb75-32"><a href="processing.html#cb75-32"></a><span class="op">$</span><span class="st"> </span>stratum_HI_EEZ   <span class="op">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, FALS…</span>
<span id="cb75-33"><a href="processing.html#cb75-33"></a><span class="op">$</span><span class="st"> </span>stratum_OtherCNP <span class="op">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>,…</span>
<span id="cb75-34"><a href="processing.html#cb75-34"></a><span class="op">$</span><span class="st"> </span>stratum_WHICEAS  <span class="op">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, FALS…</span>
<span id="cb75-35"><a href="processing.html#cb75-35"></a><span class="op">$</span><span class="st"> </span>year             <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">1986</span>, <span class="dv">1986</span>, <span class="dv">1986</span>, <span class="dv">1986</span>, <span class="dv">1986</span>, <span class="dv">1986</span>, <span class="dv">1986</span>, <span class="dv">1986</span>, <span class="dv">1986</span>,…</span>
<span id="cb75-36"><a href="processing.html#cb75-36"></a><span class="op">$</span><span class="st"> </span>month            <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, <span class="dv">11</span>, 1…</span>
<span id="cb75-37"><a href="processing.html#cb75-37"></a><span class="op">$</span><span class="st"> </span>day              <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="dv">26</span>, <span class="dv">26</span>, <span class="dv">26</span>, <span class="dv">27</span>, <span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">28</span>, <span class="dv">28</span>, <span class="dv">28</span>, <span class="dv">28</span>, <span class="dv">28</span>, <span class="dv">29</span>, <span class="dv">29</span>, 3…</span>
<span id="cb75-38"><a href="processing.html#cb75-38"></a><span class="op">$</span><span class="st"> </span>yday             <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">330</span>, <span class="dv">330</span>, <span class="dv">330</span>, <span class="dv">331</span>, <span class="dv">331</span>, <span class="dv">332</span>, <span class="dv">332</span>, <span class="dv">332</span>, <span class="dv">332</span>, <span class="dv">332</span>, 332…</span>
<span id="cb75-39"><a href="processing.html#cb75-39"></a><span class="op">$</span><span class="st"> </span>km_int           <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>,…</span>
<span id="cb75-40"><a href="processing.html#cb75-40"></a><span class="op">$</span><span class="st"> </span>km_cum           <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">64.38787</span>, <span class="fl">172.92124</span>, <span class="fl">221.24918</span>, <span class="fl">248.23899</span>, <span class="fl">317.83407</span>,…</span>
<span id="cb75-41"><a href="processing.html#cb75-41"></a><span class="op">$</span><span class="st"> </span>ship             <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> &quot;DSJ&quot;</span>, <span class="st">&quot;DSJ&quot;</span>, <span class="st">&quot;DSJ&quot;</span>, <span class="st">&quot;DSJ&quot;</span>, <span class="st">&quot;DSJ&quot;</span>, <span class="st">&quot;DSJ&quot;</span>, <span class="st">&quot;DSJ&quot;</span>, <span class="st">&quot;DSJ…</span></span>
<span id="cb75-42"><a href="processing.html#cb75-42"></a><span class="st">$ stratum          &lt;chr&gt; &quot;</span>OtherCNP<span class="st">&quot;, &quot;</span>OtherCNP<span class="st">&quot;, &quot;</span>OtherCNP<span class="st">&quot;, &quot;</span>OtherCNP<span class="st">&quot;, &quot;</span>Othe…</span>
<span id="cb75-43"><a href="processing.html#cb75-43"></a><span class="op">$</span><span class="st"> </span>seg_id           <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="dv">34</span>, <span class="dv">35</span>, <span class="dv">35</span>, <span class="dv">35</span>, <span class="dv">36</span>, <span class="dv">37</span>, <span class="dv">37</span>, <span class="dv">37</span>, <span class="dv">37</span>, <span class="dv">37</span>, <span class="dv">29</span>, <span class="dv">38</span>, <span class="dv">38</span>, 3…</span>
<span id="cb75-44"><a href="processing.html#cb75-44"></a><span class="op">$</span><span class="st"> </span>use              <span class="op">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>,…</span>
<span id="cb75-45"><a href="processing.html#cb75-45"></a><span class="op">$</span><span class="st"> </span>SightNo          <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> &quot;01&quot;</span>, <span class="st">&quot;02&quot;</span>, <span class="st">&quot;03&quot;</span>, <span class="st">&quot;01&quot;</span>, <span class="st">&quot;02&quot;</span>, <span class="st">&quot;01&quot;</span>, <span class="st">&quot;01&quot;</span>, <span class="st">&quot;02&quot;</span>, <span class="st">&quot;03&quot;</span>,…</span>
<span id="cb75-46"><a href="processing.html#cb75-46"></a><span class="op">$</span><span class="st"> </span>Subgroup         <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-47"><a href="processing.html#cb75-47"></a><span class="op">$</span><span class="st"> </span>SightNoDaily     <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> &quot;19861126_1&quot;</span>, <span class="st">&quot;19861126_2&quot;</span>, <span class="st">&quot;19861126_3&quot;</span>, <span class="st">&quot;19861127_1…</span></span>
<span id="cb75-48"><a href="processing.html#cb75-48"></a><span class="st">$ Obs              &lt;chr&gt; &quot;</span><span class="dv">004</span><span class="st">&quot;, &quot;</span><span class="dv">057</span><span class="st">&quot;, &quot;</span><span class="dv">004</span><span class="st">&quot;, &quot;</span><span class="dv">056</span><span class="st">&quot;, &quot;</span><span class="dv">004</span><span class="st">&quot;, &quot;</span><span class="dv">031</span><span class="st">&quot;, &quot;</span><span class="dv">031</span><span class="st">&quot;, &quot;</span>004…</span>
<span id="cb75-49"><a href="processing.html#cb75-49"></a><span class="op">$</span><span class="st"> </span>ObsStd           <span class="op">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>,…</span>
<span id="cb75-50"><a href="processing.html#cb75-50"></a><span class="op">$</span><span class="st"> </span>Bearing          <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">335</span>, <span class="dv">354</span>, <span class="dv">336</span>, <span class="dv">18</span>, <span class="dv">332</span>, <span class="dv">333</span>, <span class="dv">333</span>, <span class="dv">6</span>, <span class="dv">312</span>, <span class="dv">312</span>, <span class="dv">38</span>, 80…</span>
<span id="cb75-51"><a href="processing.html#cb75-51"></a><span class="op">$</span><span class="st"> </span>Reticle          <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">8.41</span>, <span class="fl">3.88</span>, <span class="fl">0.50</span>, <span class="fl">11.40</span>, <span class="fl">0.80</span>, <span class="fl">0.30</span>, <span class="fl">0.30</span>, <span class="fl">2.98</span>, <span class="fl">0.40</span>…</span>
<span id="cb75-52"><a href="processing.html#cb75-52"></a><span class="op">$</span><span class="st"> </span>DistNm           <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">0.4</span>, <span class="fl">0.8</span>, <span class="fl">3.2</span>, <span class="fl">0.3</span>, <span class="fl">2.5</span>, <span class="fl">3.8</span>, <span class="fl">3.8</span>, <span class="fl">1.0</span>, <span class="fl">3.5</span>, <span class="fl">3.5</span>, <span class="fl">7.0</span>…</span>
<span id="cb75-53"><a href="processing.html#cb75-53"></a><span class="op">$</span><span class="st"> </span>Cue              <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>,…</span>
<span id="cb75-54"><a href="processing.html#cb75-54"></a><span class="op">$</span><span class="st"> </span>Method           <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>,…</span>
<span id="cb75-55"><a href="processing.html#cb75-55"></a><span class="op">$</span><span class="st"> </span>Photos           <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-56"><a href="processing.html#cb75-56"></a><span class="op">$</span><span class="st"> </span>Birds            <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> &quot;N&quot;</span>, <span class="st">&quot;N&quot;</span>, <span class="st">&quot;N&quot;</span>, <span class="st">&quot;N&quot;</span>, <span class="st">&quot;N&quot;</span>, <span class="st">&quot;Y&quot;</span>, <span class="st">&quot;Y&quot;</span>, <span class="st">&quot;N&quot;</span>, <span class="st">&quot;Y&quot;</span>, <span class="st">&quot;Y&quot;</span>, <span class="st">&quot;N&quot;</span>…</span>
<span id="cb75-57"><a href="processing.html#cb75-57"></a><span class="op">$</span><span class="st"> </span>CalibSchool      <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-58"><a href="processing.html#cb75-58"></a><span class="op">$</span><span class="st"> </span>PhotosAerial     <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-59"><a href="processing.html#cb75-59"></a><span class="op">$</span><span class="st"> </span>Biopsy           <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-60"><a href="processing.html#cb75-60"></a><span class="op">$</span><span class="st"> </span>CourseSchool     <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-61"><a href="processing.html#cb75-61"></a><span class="op">$</span><span class="st"> </span>TurtleSp         <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-62"><a href="processing.html#cb75-62"></a><span class="op">$</span><span class="st"> </span>TurtleGs         <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-63"><a href="processing.html#cb75-63"></a><span class="op">$</span><span class="st"> </span>TurtleJFR        <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-64"><a href="processing.html#cb75-64"></a><span class="op">$</span><span class="st"> </span>TurtleAge        <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-65"><a href="processing.html#cb75-65"></a><span class="op">$</span><span class="st"> </span>TurtleCapt       <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-66"><a href="processing.html#cb75-66"></a><span class="op">$</span><span class="st"> </span>PinnipedSp       <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-67"><a href="processing.html#cb75-67"></a><span class="op">$</span><span class="st"> </span>PinnipedGs       <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-68"><a href="processing.html#cb75-68"></a><span class="op">$</span><span class="st"> </span>BoatType         <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-69"><a href="processing.html#cb75-69"></a><span class="op">$</span><span class="st"> </span>BoatGs           <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, N…</span>
<span id="cb75-70"><a href="processing.html#cb75-70"></a><span class="op">$</span><span class="st"> </span>PerpDistKm       <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">0.3130756</span>, <span class="fl">0.1548694</span>, <span class="fl">2.4104840</span>, <span class="fl">0.1716898</span>, <span class="fl">2.1736533</span>…</span>
<span id="cb75-71"><a href="processing.html#cb75-71"></a><span class="op">$</span><span class="st"> </span>species          <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st"> &quot;049&quot;</span>, <span class="st">&quot;015&quot;</span>, <span class="st">&quot;077&quot;</span>, <span class="st">&quot;002&quot;</span>, <span class="st">&quot;002&quot;</span>, <span class="st">&quot;033&quot;</span>, <span class="st">&quot;018&quot;</span>, <span class="st">&quot;037…</span></span>
<span id="cb75-72"><a href="processing.html#cb75-72"></a><span class="st">$ best             &lt;dbl&gt; 2.318841, 8.843199, 4.637681, 27.517262, 21.826776, 3…</span></span>
<span id="cb75-73"><a href="processing.html#cb75-73"></a><span class="st">$ low              &lt;dbl&gt; 2.000000, 6.253644, 4.637681, 17.139473, 14.144886, 1…</span></span>
<span id="cb75-74"><a href="processing.html#cb75-74"></a><span class="st">$ high             &lt;dbl&gt; 2.000000, 10.711798, NA, 35.140620, 27.788449, 45.560…</span></span>
<span id="cb75-75"><a href="processing.html#cb75-75"></a><span class="st">$ prob             &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALS…</span></span>
<span id="cb75-76"><a href="processing.html#cb75-76"></a><span class="st">$ mixed            &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, TRUE, TRUE, FALSE,…</span></span>
<span id="cb75-77"><a href="processing.html#cb75-77"></a><span class="st">$ ss_tot           &lt;dbl&gt; 2.318841, 8.843199, 4.637681, 27.517262, 21.826776, 3…</span></span>
<span id="cb75-78"><a href="processing.html#cb75-78"></a><span class="st">$ lnsstot          &lt;dbl&gt; 0.8410673, 2.1796487, 1.5342145, 3.3148135, 3.0831375…</span></span>
<span id="cb75-79"><a href="processing.html#cb75-79"></a><span class="st">$ ss_percent       &lt;dbl&gt; 1.0000000, 1.0000000, 1.0000000, 1.0000000, 1.0000000…</span></span>
<span id="cb75-80"><a href="processing.html#cb75-80"></a><span class="st">$ n_sp             &lt;dbl&gt; 1, 1, 1, 1, 1, 2, 2, 1, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span id="cb75-81"><a href="processing.html#cb75-81"></a><span class="st">$ n_obs            &lt;int&gt; 1, 3, 1, 3, 3, 3, 3, 5, 5, 5, 1, 1, 3, 4, 2, 2, 2, 5,…</span></span>
<span id="cb75-82"><a href="processing.html#cb75-82"></a><span class="st">$ n_best           &lt;int&gt; 1, 2, 0, 3, 3, 1, 1, 4, 5, 5, 0, 1, 3, 3, 1, 2, 2, 4,…</span></span>
<span id="cb75-83"><a href="processing.html#cb75-83"></a><span class="st">$ n_low            &lt;int&gt; 1, 3, 1, 3, 3, 3, 3, 5, 5, 5, 1, 1, 3, 4, 2, 2, 2, 5,…</span></span>
<span id="cb75-84"><a href="processing.html#cb75-84"></a><span class="st">$ n_high           &lt;int&gt; 1, 2, 0, 3, 3, 1, 1, 4, 5, 5, 0, 1, 3, 3, 1, 2, 2, 4,…</span></span>
<span id="cb75-85"><a href="processing.html#cb75-85"></a><span class="st">$ calibr           &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE,…</span></span>
<span id="cb75-86"><a href="processing.html#cb75-86"></a><span class="st">$ ss_valid         &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE,…</span></span>
<span id="cb75-87"><a href="processing.html#cb75-87"></a><span class="st">$ mixed_max        &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, TRUE, FALS…</span></span>
<span id="cb75-88"><a href="processing.html#cb75-88"></a><span class="st">$ spp_max          &lt;chr&gt; &quot;</span><span class="dv">049</span><span class="st">&quot;, &quot;</span><span class="dv">015</span><span class="st">&quot;, &quot;</span><span class="dv">077</span><span class="st">&quot;, &quot;</span><span class="dv">002</span><span class="st">&quot;, &quot;</span><span class="dv">002</span><span class="st">&quot;, &quot;</span><span class="dv">033</span><span class="st">&quot;, &quot;</span><span class="dv">033</span><span class="st">&quot;, &quot;</span>037…</span>
<span id="cb75-89"><a href="processing.html#cb75-89"></a><span class="op">$</span><span class="st"> </span>included         <span class="op">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>,…</span></code></pre></div>
<p>Note that the <code>process_sightings()</code> function draws upon <code>cruz$settings</code> for inclusion criteria, but some of those settings can be overridden with the function’s manual inputs if you want to explore your options (see below).</p>
</div>
<div id="ss_calibration" class="section level4 unnumbered hasAnchor">
<h4>School size estimates<a href="processing.html#ss_calibration" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the settings we are using in this tutorial, school size estimates are adjusted using the calibration models from <a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C43&amp;q=barlow+1998+group+size+caliration&amp;btnG=">Barlow, Gerrodette, and Perryman (1998)</a> (their analysis is refined slightly and further explained in <a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C43&amp;q=barlow+1998+group+size+caliration&amp;btnG=">Gerrodette, Perryman and Barlow, 2002</a>). These calibration corrections are observer-specific. Most observers tend to underestimate school size and their estimates are adjusted up; others tend to overestimate and their estimates are adjusted down. Some observers do not have calibration coefficients, and for them a generic adjustment (upwards, by dividing estimates by 0.8625) is used. In <code>LTabundR</code>, each observer’s estimate is calibrated, then all observer estimates are averaged. To do that averaging, our <code>settings</code> specify that we shall use a geometric weighted mean, instead of an arithmetic mean, that weights school size estimates from multiple observers according to the variance of their calibration coefficients.</p>
<p>Here are our current best estimates of school size:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="processing.html#cb76-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>sightings<span class="op">$</span>best <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">20</span>)</span>
<span id="cb76-2"><a href="processing.html#cb76-2"></a> [<span class="dv">1</span>]   <span class="fl">2.318841</span>   <span class="fl">8.843199</span>   <span class="fl">4.637681</span>  <span class="fl">27.517262</span>  <span class="fl">21.826776</span>  <span class="fl">31.713333</span></span>
<span id="cb76-3"><a href="processing.html#cb76-3"></a> [<span class="dv">7</span>]   <span class="fl">3.786667</span>   <span class="fl">3.478261</span>  <span class="fl">21.284389</span> <span class="fl">221.965766</span>   <span class="fl">2.318841</span>   <span class="fl">1.159420</span></span>
<span id="cb76-4"><a href="processing.html#cb76-4"></a>[<span class="dv">13</span>]  <span class="fl">13.758964</span>   <span class="fl">6.242983</span>  <span class="fl">16.940000</span>  <span class="fl">18.247174</span>   <span class="fl">1.159420</span>  <span class="fl">38.004297</span></span>
<span id="cb76-5"><a href="processing.html#cb76-5"></a>[<span class="dv">19</span>]  <span class="fl">35.000000</span>  <span class="fl">16.596526</span></span></code></pre></div>
<p>Let’s compare those estimates to unadjusted ones, in which calibration (and therefore weighted geometric mean) is turned off:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="processing.html#cb77-1"></a>cruz_demo &lt;-<span class="st"> </span><span class="kw">process_sightings</span>(cruz, </span>
<span id="cb77-2"><a href="processing.html#cb77-2"></a>                               <span class="dt">calibrate =</span> <span class="ot">FALSE</span>,</span>
<span id="cb77-3"><a href="processing.html#cb77-3"></a>                               <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="processing.html#cb78-1"></a>cruz_demo<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>sightings<span class="op">$</span>best <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">20</span>)</span>
<span id="cb78-2"><a href="processing.html#cb78-2"></a> [<span class="dv">1</span>]   <span class="fl">2.000000</span>   <span class="fl">8.485281</span>   <span class="fl">4.000000</span>  <span class="fl">21.897596</span>  <span class="fl">16.570558</span>  <span class="fl">23.226667</span></span>
<span id="cb78-3"><a href="processing.html#cb78-3"></a> [<span class="dv">7</span>]   <span class="fl">2.773333</span>   <span class="fl">3.000000</span>  <span class="fl">20.885620</span> <span class="fl">217.807182</span>   <span class="fl">2.000000</span>   <span class="fl">1.000000</span></span>
<span id="cb78-4"><a href="processing.html#cb78-4"></a>[<span class="dv">13</span>]  <span class="fl">11.744603</span>   <span class="fl">5.517848</span>  <span class="fl">12.000000</span>  <span class="fl">15.000000</span>   <span class="fl">1.000000</span>  <span class="fl">38.985490</span></span>
<span id="cb78-5"><a href="processing.html#cb78-5"></a>[<span class="dv">19</span>]  <span class="fl">35.000000</span>  <span class="fl">14.642958</span></span></code></pre></div>
<p>Note that, since calibration is only used for schools above a certain size, the difference between calibration and non-calibrated estimates becomes clearer in larger groups.</p>
<p>You can also carry out calibration corrections without using a geometric weighted mean (the arithmetic mean will be used instead):</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="processing.html#cb79-1"></a>cruz_demo &lt;-<span class="st"> </span><span class="kw">process_sightings</span>(cruz, </span>
<span id="cb79-2"><a href="processing.html#cb79-2"></a>                               <span class="dt">calibrate =</span> <span class="ot">TRUE</span>,</span>
<span id="cb79-3"><a href="processing.html#cb79-3"></a>                               <span class="dt">geometric_mean =</span> <span class="ot">FALSE</span>,</span>
<span id="cb79-4"><a href="processing.html#cb79-4"></a>                               <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="processing.html#cb80-1"></a>cruz_demo<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>sightings<span class="op">$</span>best <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">20</span>)</span>
<span id="cb80-2"><a href="processing.html#cb80-2"></a> [<span class="dv">1</span>]   <span class="fl">2.318841</span>   <span class="fl">9.217391</span>   <span class="fl">4.637681</span>  <span class="fl">27.866184</span>  <span class="fl">22.455556</span>  <span class="fl">31.713333</span></span>
<span id="cb80-3"><a href="processing.html#cb80-3"></a> [<span class="dv">7</span>]   <span class="fl">3.786667</span>   <span class="fl">3.478261</span>  <span class="fl">24.139715</span> <span class="fl">251.742745</span>   <span class="fl">2.318841</span>   <span class="fl">1.159420</span></span>
<span id="cb80-4"><a href="processing.html#cb80-4"></a>[<span class="dv">13</span>]  <span class="fl">13.744928</span>   <span class="fl">6.198068</span>  <span class="fl">16.940000</span>  <span class="fl">18.095652</span>   <span class="fl">1.159420</span>  <span class="fl">46.792494</span></span>
<span id="cb80-5"><a href="processing.html#cb80-5"></a>[<span class="dv">19</span>]  <span class="fl">35.000000</span>  <span class="fl">17.131014</span></span></code></pre></div>
<p>Note that when <code>geometric_mean = TRUE</code> but calibration is not carried out, the simple geometric mean is calculated instead of the <em>weighted</em> geometric mean, since the weights are the variance estimates from the calibration routine.</p>
<p>Also note that school size calibration is only carried out if <code>settings$group_size_calibration</code> is not <code>NULL</code>. However, even when calibration coefficients <em>are</em> provided, it is possible to specify that calibration should only be carried out for raw estimates above a minimum threshold (see cohort setting <code>calibration_floor</code>, whose default is <code>0</code>), since observers may be unlikely to mis-estimate the school size of a lone whale or pair. For observers who have calibration coefficients in the <code>settings$group_size_coefficients</code> table, that minimum is specified for each observer individually. For observers not in that table, calibration will only be applied to raw school size estimates above <code>settings$cohorts[[i]]$calibration_floor</code> or above.</p>
</div>
<div id="subgroups" class="section level4 unnumbered hasAnchor">
<h4>Subgroup size estimates<a href="processing.html#subgroups" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>After sightings data are processed, the <code>process_surveys()</code> function calls the subroutine <code>process_subgroups()</code> to find and calculate subgroup school size estimates for false killer whales, if any occur in the <code>DAS</code> data (Event code “<code>G</code>”).</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="processing.html#cb81-1"></a>cruz &lt;-<span class="st"> </span><span class="kw">process_subgroups</span>(cruz) </span></code></pre></div>
<p>If subgroups are found, a <code>subgroups</code> slot is added to the analysis list for a cohort.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="processing.html#cb82-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>all <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb82-2"><a href="processing.html#cb82-2"></a>[<span class="dv">1</span>] <span class="st">&quot;segments&quot;</span>  <span class="st">&quot;das&quot;</span>       <span class="st">&quot;sightings&quot;</span> <span class="st">&quot;subgroups&quot;</span></span></code></pre></div>
<p>This <code>subgroups</code> slot holds a list with three dataframes: <code>events</code> (each row is a school size estimate for a single subgroup during a single phase – 1 or 2 – within a single sighting; this is effectively the raw data); <code>subgroups</code> (each row is a single phase for a single subgroup, with all school size estimates averaged together (both arithmetically and geometrically); and <code>sightings</code> (each row is a school size estimate for a single phase for a single sighting, with all subgroup school sizes summed together).</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="processing.html#cb83-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>subgroups <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb83-2"><a href="processing.html#cb83-2"></a>[<span class="dv">1</span>] <span class="st">&quot;sightings&quot;</span> <span class="st">&quot;subgroups&quot;</span> <span class="st">&quot;events&quot;</span>   </span></code></pre></div>
<p>See the case study on false killer whales for detailed examples.</p>
</div>
</div>
</div>
<div id="review" class="section level2 unnumbered hasAnchor">
<h2>Review<a href="processing.html#review" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>By the end of this process, you have a single data object, <code>cruz</code>, with all the data you need to move forward into the next stages of mapping and analysis.</p>
<p>The <code>LTabundR</code> function <code>cruz_structure()</code> provides a synopsis of the data structure:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="processing.html#cb84-1"></a><span class="kw">cruz_structure</span>(cruz)</span>
<span id="cb84-2"><a href="processing.html#cb84-2"></a><span class="st">&quot;cruz&quot;</span> list structure <span class="op">==</span><span class="er">======================</span></span>
<span id="cb84-3"><a href="processing.html#cb84-3"></a></span>
<span id="cb84-4"><a href="processing.html#cb84-4"></a><span class="er">$</span>settings</span>
<span id="cb84-5"><a href="processing.html#cb84-5"></a>         <span class="op">$</span>strata <span class="op">---</span><span class="st"> </span>with <span class="dv">11</span> polygon coordinate sets</span>
<span id="cb84-6"><a href="processing.html#cb84-6"></a>         <span class="op">$</span>survey <span class="op">---</span><span class="st"> </span>with <span class="dv">10</span> input arguments</span>
<span id="cb84-7"><a href="processing.html#cb84-7"></a>         <span class="op">$</span>cohorts <span class="op">---</span><span class="st"> </span>with <span class="dv">3</span> cohorts specified, each with <span class="dv">19</span> input arguments</span>
<span id="cb84-8"><a href="processing.html#cb84-8"></a></span>
<span id="cb84-9"><a href="processing.html#cb84-9"></a><span class="op">$</span>strata</span>
<span id="cb84-10"><a href="processing.html#cb84-10"></a>       ... containing a summary dataframe of <span class="dv">11</span> geostrata and their spatial areas</span>
<span id="cb84-11"><a href="processing.html#cb84-11"></a>       ... geostratum names<span class="op">:</span></span>
<span id="cb84-12"><a href="processing.html#cb84-12"></a><span class="st">           </span>HI_EEZ, OtherCNP, MHI, WHICEAS, Spotted_OU, Spotted_FI, Spotted_BI, Bottlenose_KaNi, Bottlenose_OUFI, Bottlenose_BI, NWHI</span>
<span id="cb84-13"><a href="processing.html#cb84-13"></a></span>
<span id="cb84-14"><a href="processing.html#cb84-14"></a><span class="op">$</span>cohorts</span>
<span id="cb84-15"><a href="processing.html#cb84-15"></a></span>
<span id="cb84-16"><a href="processing.html#cb84-16"></a>        <span class="op">$</span>all</span>
<span id="cb84-17"><a href="processing.html#cb84-17"></a>            geostrata<span class="op">:</span><span class="st"> </span>WHICEAS, HI_EEZ, OtherCNP</span>
<span id="cb84-18"><a href="processing.html#cb84-18"></a>            <span class="op">$</span>segments  <span class="op">---</span><span class="st"> </span>with <span class="dv">1890</span> <span class="kw">segments</span> (<span class="dt">median =</span> <span class="fl">149.3</span> km)</span>
<span id="cb84-19"><a href="processing.html#cb84-19"></a>            <span class="op">$</span>das       <span class="op">---</span><span class="st"> </span>with <span class="dv">329632</span> data rows</span>
<span id="cb84-20"><a href="processing.html#cb84-20"></a>            <span class="op">$</span>sightings <span class="op">---</span><span class="st"> </span>with <span class="dv">3934</span> detections</span>
<span id="cb84-21"><a href="processing.html#cb84-21"></a>            <span class="op">$</span>subgroups <span class="op">---</span><span class="st"> </span>with <span class="dv">255</span> subgroups, <span class="dv">49</span> sightings, and <span class="dv">389</span> events</span>
<span id="cb84-22"><a href="processing.html#cb84-22"></a></span>
<span id="cb84-23"><a href="processing.html#cb84-23"></a>        <span class="op">$</span>bottlenose</span>
<span id="cb84-24"><a href="processing.html#cb84-24"></a>            geostrata<span class="op">:</span><span class="st"> </span>WHICEAS, HI_EEZ, OtherCNP, Bottlenose_BI, Bottlenose_OUFI, Bottlenose_KaNi</span>
<span id="cb84-25"><a href="processing.html#cb84-25"></a>            <span class="op">$</span>segments  <span class="op">---</span><span class="st"> </span>with <span class="dv">2049</span> <span class="kw">segments</span> (<span class="dt">median =</span> <span class="fl">148.6</span> km)</span>
<span id="cb84-26"><a href="processing.html#cb84-26"></a>            <span class="op">$</span>das       <span class="op">---</span><span class="st"> </span>with <span class="dv">329632</span> data rows</span>
<span id="cb84-27"><a href="processing.html#cb84-27"></a>            <span class="op">$</span>sightings <span class="op">---</span><span class="st"> </span>with <span class="dv">523</span> detections</span>
<span id="cb84-28"><a href="processing.html#cb84-28"></a></span>
<span id="cb84-29"><a href="processing.html#cb84-29"></a>        <span class="op">$</span>spotted</span>
<span id="cb84-30"><a href="processing.html#cb84-30"></a>            geostrata<span class="op">:</span><span class="st"> </span>WHICEAS, HI_EEZ, OtherCNP, Spotted_OU, Spotted_FI, Spotted_BI</span>
<span id="cb84-31"><a href="processing.html#cb84-31"></a>            <span class="op">$</span>segments  <span class="op">---</span><span class="st"> </span>with <span class="dv">2057</span> <span class="kw">segments</span> (<span class="dt">median =</span> <span class="fl">148.5</span> km)</span>
<span id="cb84-32"><a href="processing.html#cb84-32"></a>            <span class="op">$</span>das       <span class="op">---</span><span class="st"> </span>with <span class="dv">329632</span> data rows</span>
<span id="cb84-33"><a href="processing.html#cb84-33"></a>            <span class="op">$</span>sightings <span class="op">---</span><span class="st"> </span>with <span class="dv">527</span> detections</span></code></pre></div>
<p>Each species-specific cohort has its own list under <code>cruz$cohorts</code>, and each of these cohorts has the same list structure:</p>
<ul>
<li><p><code>segments</code> is a summary table of segments.</p></li>
<li><p><code>das</code> is the raw <code>DAS</code> data, modified with <code>seg_id</code> to associate each row with a segment.</p></li>
<li><p><code>sightings</code> is a dataframe of sightings processed according to this cohort’s settings.</p></li>
<li><p><code>subgroups</code> (if any subgroup data exist in your survey) is a list with subgroup details.</p></li>
</ul>
<p>In each of these <code>data.frame</code>’s, there are three critically important columns to keep in mind:</p>
<ul>
<li><p><strong><code>seg_id</code></strong>: this column is used to indicate the segment ID that a row of data belongs to.</p></li>
<li><p><strong><code>use</code></strong>: this column indicates whether a row of effort should be used in the line-transect analysis Every row of data within a single segment with have the same <code>use</code> value.</p></li>
<li><p><strong><code>included</code></strong>: this column occurs in the <code>sightings</code> dataframe only. It indicates whether the sightings should be included in line-transect analysis based on the specified settings. Any sighting with <code>use == FALSE</code> will also have <code>included == FALSE</code>, but it <em>is</em> possible for sightings to have <code>use == TRUE</code> with <code>included == FALSE</code>. For example, if the setting <code>abeam_sightings</code> is set to <code>FALSE</code>, a sighting with a bearing angle beyond the ship’s beam can be excluded from the analysis (<code>included == FALSE</code>) even though the effort segment it occurs within will still be used (<code>use == TRUE</code>).</p></li>
</ul>
<p>Finally, let’s save this <code>cruz</code> object locally, to use in downstream scripts:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="processing.html#cb85-1"></a><span class="kw">save</span>(cruz,<span class="dt">file=</span><span class="st">&#39;whiceas_cruz.RData&#39;</span>)</span></code></pre></div>
</div>
<div id="validation" class="section level2 unnumbered hasAnchor">
<h2>Validation<a href="processing.html#validation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To validate these <code>LTabundR</code> functions, we can compare its output to that of <code>ABUND9</code>, written by Jay Barlow (NOAA-NMFS). First, we bring in the <code>ABUND9</code> output files for the same <code>DAS</code> data:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="processing.html#cb86-1"></a>SIGHTS &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/SIGHTS.csv&#39;</span>)</span>
<span id="cb86-2"><a href="processing.html#cb86-2"></a>EFFORT &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;data/EFFORT.csv&#39;</span>)</span></code></pre></div>
<div id="sightings" class="section level3 unnumbered hasAnchor">
<h3>Sightings<a href="processing.html#sightings" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pivot and format the <code>ABUND</code> <code>SIGHTS</code> data…</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="processing.html#cb87-1"></a>abund &lt;-</span>
<span id="cb87-2"><a href="processing.html#cb87-2"></a><span class="st">  </span>SIGHTS <span class="op">%&gt;%</span></span>
<span id="cb87-3"><a href="processing.html#cb87-3"></a><span class="st">  </span>tidyr<span class="op">::</span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="dv">31</span><span class="op">:</span><span class="dv">101</span>,</span>
<span id="cb87-4"><a href="processing.html#cb87-4"></a>                      <span class="dt">names_to =</span> <span class="st">&#39;species&#39;</span>,</span>
<span id="cb87-5"><a href="processing.html#cb87-5"></a>                      <span class="dt">values_to =</span> <span class="st">&#39;best&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb87-6"><a href="processing.html#cb87-6"></a><span class="st">  </span><span class="kw">filter</span>(best <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></span>
<span id="cb87-7"><a href="processing.html#cb87-7"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Region =</span> <span class="kw">gsub</span>(<span class="st">&#39; &#39;</span>,<span class="st">&#39;&#39;</span>,Region)) <span class="op">%&gt;%</span></span>
<span id="cb87-8"><a href="processing.html#cb87-8"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">DateTime =</span> <span class="kw">paste0</span>(Yr,<span class="st">&#39;-&#39;</span>,Mo,<span class="st">&#39;-&#39;</span>,Da,<span class="st">&#39; &#39;</span>,Hr,<span class="st">&#39;:&#39;</span>,Min))</span></code></pre></div>
<p>…then summarize counts of species within each cruise:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="processing.html#cb88-1"></a>abund_summ &lt;-</span>
<span id="cb88-2"><a href="processing.html#cb88-2"></a><span class="st">  </span>abund <span class="op">%&gt;%</span></span>
<span id="cb88-3"><a href="processing.html#cb88-3"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="dt">cruise =</span> CruzNo, species) <span class="op">%&gt;%</span></span>
<span id="cb88-4"><a href="processing.html#cb88-4"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">ntot_abund =</span> <span class="kw">n</span>(),</span>
<span id="cb88-5"><a href="processing.html#cb88-5"></a>            <span class="dt">nsys_abund =</span> <span class="kw">length</span>(<span class="kw">which</span>(<span class="op">!</span><span class="st"> </span>Region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;NONE&#39;</span>, </span>
<span id="cb88-6"><a href="processing.html#cb88-6"></a>                                                      <span class="st">&#39;Off-Transect&#39;</span>) <span class="op">&amp;</span><span class="st"> </span></span>
<span id="cb88-7"><a href="processing.html#cb88-7"></a><span class="st">                                        </span>EffortSeg <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>))) <span class="op">%&gt;%</span></span>
<span id="cb88-8"><a href="processing.html#cb88-8"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">species =</span> <span class="kw">gsub</span>(<span class="st">&#39;SP&#39;</span>,<span class="st">&#39;&#39;</span>,species))</span></code></pre></div>
<p>Then do the same for <code>LTabundR</code> output:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="processing.html#cb89-1"></a>ltabundr &lt;-<span class="st"> </span></span>
<span id="cb89-2"><a href="processing.html#cb89-2"></a><span class="st">  </span>cruz<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>sightings <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb89-3"><a href="processing.html#cb89-3"></a><span class="st">  </span><span class="co"># Filter out species that ABUND ignored based on its INP file</span></span>
<span id="cb89-4"><a href="processing.html#cb89-4"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span>species <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;CU&#39;</span>, <span class="st">&#39;PU&#39;</span>))</span>
<span id="cb89-5"><a href="processing.html#cb89-5"></a>  </span>
<span id="cb89-6"><a href="processing.html#cb89-6"></a>ltabundr_summ &lt;-</span>
<span id="cb89-7"><a href="processing.html#cb89-7"></a><span class="st">  </span>ltabundr <span class="op">%&gt;%</span></span>
<span id="cb89-8"><a href="processing.html#cb89-8"></a><span class="st">  </span><span class="kw">filter</span>(OnEffort <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb89-9"><a href="processing.html#cb89-9"></a><span class="st">  </span><span class="kw">group_by</span>(<span class="dt">cruise =</span> Cruise, species) <span class="op">%&gt;%</span></span>
<span id="cb89-10"><a href="processing.html#cb89-10"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">ntot_ltabundr =</span> <span class="kw">n</span>(),</span>
<span id="cb89-11"><a href="processing.html#cb89-11"></a>            <span class="dt">nsys_ltabundr =</span> <span class="kw">length</span>(<span class="kw">which</span>(included <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span> <span class="op">&amp;</span><span class="st"> </span></span>
<span id="cb89-12"><a href="processing.html#cb89-12"></a><span class="st">                                           </span>EffType <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;S&#39;</span>,<span class="st">&#39;F&#39;</span>))))</span></code></pre></div>
<p>Now join these two datasets by cruise and species code:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="processing.html#cb90-1"></a>mr &lt;-<span class="st"> </span><span class="kw">full_join</span>(abund_summ, ltabundr_summ, <span class="dt">by=</span><span class="kw">c</span>(<span class="st">&#39;cruise&#39;</span>, <span class="st">&#39;species&#39;</span>))</span>
<span id="cb90-2"><a href="processing.html#cb90-2"></a></span>
<span id="cb90-3"><a href="processing.html#cb90-3"></a>mr <span class="op">%&gt;%</span><span class="st"> </span>head</span>
<span id="cb90-4"><a href="processing.html#cb90-4"></a><span class="co"># A tibble: 6 × 6</span></span>
<span id="cb90-5"><a href="processing.html#cb90-5"></a><span class="co"># Groups:   cruise [1]</span></span>
<span id="cb90-6"><a href="processing.html#cb90-6"></a>  cruise species ntot_abund nsys_abund ntot_ltabundr nsys_ltabundr</span>
<span id="cb90-7"><a href="processing.html#cb90-7"></a>   <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb90-8"><a href="processing.html#cb90-8"></a><span class="dv">1</span>    <span class="dv">901</span> <span class="dv">002</span>              <span class="dv">3</span>          <span class="dv">2</span>             <span class="dv">3</span>             <span class="dv">2</span></span>
<span id="cb90-9"><a href="processing.html#cb90-9"></a><span class="dv">2</span>    <span class="dv">901</span> <span class="dv">013</span>              <span class="dv">4</span>          <span class="dv">4</span>             <span class="dv">4</span>             <span class="dv">4</span></span>
<span id="cb90-10"><a href="processing.html#cb90-10"></a><span class="dv">3</span>    <span class="dv">901</span> <span class="dv">015</span>              <span class="dv">2</span>          <span class="dv">1</span>             <span class="dv">2</span>             <span class="dv">1</span></span>
<span id="cb90-11"><a href="processing.html#cb90-11"></a><span class="dv">4</span>    <span class="dv">901</span> <span class="dv">018</span>              <span class="dv">2</span>          <span class="dv">1</span>             <span class="dv">2</span>             <span class="dv">1</span></span>
<span id="cb90-12"><a href="processing.html#cb90-12"></a><span class="dv">5</span>    <span class="dv">901</span> <span class="dv">031</span>              <span class="dv">1</span>          <span class="dv">1</span>             <span class="dv">1</span>             <span class="dv">1</span></span>
<span id="cb90-13"><a href="processing.html#cb90-13"></a><span class="dv">6</span>    <span class="dv">901</span> <span class="dv">032</span>              <span class="dv">2</span>          <span class="dv">0</span>             <span class="dv">2</span>             <span class="dv">0</span></span></code></pre></div>
<p>Compare the total On-Effort sightings in both outputs:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="processing.html#cb91-1"></a>mr<span class="op">$</span>ntot_abund <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sum</span>(<span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span>
<span id="cb91-2"><a href="processing.html#cb91-2"></a>[<span class="dv">1</span>] <span class="dv">3223</span></span>
<span id="cb91-3"><a href="processing.html#cb91-3"></a>mr<span class="op">$</span>ntot_ltabundr <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sum</span>(<span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span>
<span id="cb91-4"><a href="processing.html#cb91-4"></a>[<span class="dv">1</span>] <span class="dv">3225</span></span></code></pre></div>
<p>Compare total sightings valid for use in density estimation (<code>EffType</code> <code>"S"</code> or <code>"F"</code> only, as well as other criteria such as Bft 0 - 6):</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="processing.html#cb92-1"></a>mr<span class="op">$</span>nsys_abund <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sum</span>(<span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span>
<span id="cb92-2"><a href="processing.html#cb92-2"></a>[<span class="dv">1</span>] <span class="dv">2478</span></span>
<span id="cb92-3"><a href="processing.html#cb92-3"></a>mr<span class="op">$</span>nsys_ltabundr <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sum</span>(<span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span>
<span id="cb92-4"><a href="processing.html#cb92-4"></a>[<span class="dv">1</span>] <span class="dv">2474</span></span></code></pre></div>
<p>Let’s find the rows with discrepancies in sighting counts:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="processing.html#cb93-1"></a>bads &lt;-<span class="st"> </span><span class="kw">which</span>(mr<span class="op">$</span>nsys_abund <span class="op">!=</span><span class="st"> </span>mr<span class="op">$</span>nsys_ltabundr <span class="op">|</span><span class="st"> </span></span>
<span id="cb93-2"><a href="processing.html#cb93-2"></a><span class="st">              </span>mr<span class="op">$</span>ntot_abund <span class="op">!=</span><span class="st"> </span>mr<span class="op">$</span>ntot_ltabundr <span class="op">|</span><span class="st"> </span></span>
<span id="cb93-3"><a href="processing.html#cb93-3"></a><span class="st">              </span><span class="kw">is.na</span>(mr<span class="op">$</span>ntot_abund) <span class="op">|</span><span class="st"> </span></span>
<span id="cb93-4"><a href="processing.html#cb93-4"></a><span class="st">              </span><span class="kw">is.na</span>(mr<span class="op">$</span>ntot_ltabundr) <span class="op">|</span><span class="st"> </span></span>
<span id="cb93-5"><a href="processing.html#cb93-5"></a><span class="st">              </span><span class="kw">is.na</span>(mr<span class="op">$</span>nsys_abund) <span class="op">|</span><span class="st"> </span></span>
<span id="cb93-6"><a href="processing.html#cb93-6"></a><span class="st">              </span><span class="kw">is.na</span>(mr<span class="op">$</span>nsys_ltabundr))</span>
<span id="cb93-7"><a href="processing.html#cb93-7"></a>bads <span class="op">%&gt;%</span><span class="st"> </span>length</span>
<span id="cb93-8"><a href="processing.html#cb93-8"></a>[<span class="dv">1</span>] <span class="dv">9</span></span></code></pre></div>
<p>Let’s look at those rows in the joined dataframe:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="processing.html#cb94-1"></a>mr[bads, ]</span>
<span id="cb94-2"><a href="processing.html#cb94-2"></a><span class="co"># A tibble: 9 × 6</span></span>
<span id="cb94-3"><a href="processing.html#cb94-3"></a><span class="co"># Groups:   cruise [6]</span></span>
<span id="cb94-4"><a href="processing.html#cb94-4"></a>  cruise species ntot_abund nsys_abund ntot_ltabundr nsys_ltabundr</span>
<span id="cb94-5"><a href="processing.html#cb94-5"></a>   <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span>int<span class="op">&gt;</span></span>
<span id="cb94-6"><a href="processing.html#cb94-6"></a><span class="dv">1</span>   <span class="dv">1004</span> <span class="dv">002</span>              <span class="dv">3</span>          <span class="dv">2</span>             <span class="dv">2</span>             <span class="dv">1</span></span>
<span id="cb94-7"><a href="processing.html#cb94-7"></a><span class="dv">2</span>   <span class="dv">1004</span> <span class="dv">046</span>              <span class="dv">4</span>          <span class="dv">4</span>             <span class="dv">3</span>             <span class="dv">3</span></span>
<span id="cb94-8"><a href="processing.html#cb94-8"></a><span class="dv">3</span>   <span class="dv">1203</span> <span class="dv">015</span>              <span class="dv">1</span>          <span class="dv">0</span>             <span class="dv">2</span>             <span class="dv">0</span></span>
<span id="cb94-9"><a href="processing.html#cb94-9"></a><span class="dv">4</span>   <span class="dv">1203</span> <span class="dv">049</span>              <span class="dv">1</span>          <span class="dv">1</span>             <span class="dv">2</span>             <span class="dv">1</span></span>
<span id="cb94-10"><a href="processing.html#cb94-10"></a><span class="dv">5</span>   <span class="dv">1607</span> <span class="dv">022</span>              <span class="dv">8</span>          <span class="dv">8</span>             <span class="dv">8</span>             <span class="dv">7</span></span>
<span id="cb94-11"><a href="processing.html#cb94-11"></a><span class="dv">6</span>   <span class="dv">1607</span> <span class="dv">037</span>              <span class="dv">3</span>          <span class="dv">3</span>             <span class="dv">3</span>             <span class="dv">2</span></span>
<span id="cb94-12"><a href="processing.html#cb94-12"></a><span class="dv">7</span>   <span class="dv">1621</span> <span class="dv">015</span>              <span class="dv">7</span>          <span class="dv">7</span>             <span class="dv">7</span>             <span class="dv">6</span></span>
<span id="cb94-13"><a href="processing.html#cb94-13"></a><span class="dv">8</span>   <span class="dv">1165</span> <span class="dv">047</span>             <span class="ot">NA</span>         <span class="ot">NA</span>             <span class="dv">1</span>             <span class="dv">1</span></span>
<span id="cb94-14"><a href="processing.html#cb94-14"></a><span class="dv">9</span>   <span class="dv">1631</span> <span class="dv">003</span>             <span class="ot">NA</span>         <span class="ot">NA</span>             <span class="dv">1</span>             <span class="dv">0</span></span></code></pre></div>
<p>To investigate these 4 discrepancies, we will write a helper function that returns sightings details from both outputs for a given cruise-species:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="processing.html#cb95-1"></a>sight_compare &lt;-<span class="st"> </span><span class="cf">function</span>(abund, ltabundr, cruise, spp){</span>
<span id="cb95-2"><a href="processing.html#cb95-2"></a>  <span class="kw">message</span>(<span class="st">&#39;ABUND:&#39;</span>)</span>
<span id="cb95-3"><a href="processing.html#cb95-3"></a>  abund <span class="op">%&gt;%</span></span>
<span id="cb95-4"><a href="processing.html#cb95-4"></a><span class="st">    </span><span class="kw">filter</span>(CruzNo <span class="op">==</span><span class="st"> </span>cruise, species <span class="op">==</span><span class="st"> </span><span class="kw">paste0</span>(<span class="st">&#39;SP&#39;</span>,spp)) <span class="op">%&gt;%</span></span>
<span id="cb95-5"><a href="processing.html#cb95-5"></a><span class="st">    </span><span class="kw">select</span>(<span class="dv">5</span>, <span class="dv">34</span>, <span class="dv">26</span>, <span class="dv">29</span>, <span class="dv">33</span>, <span class="dv">3</span>) <span class="op">%&gt;%</span></span>
<span id="cb95-6"><a href="processing.html#cb95-6"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">use_sit =</span> EffortSeg <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></span>
<span id="cb95-7"><a href="processing.html#cb95-7"></a><span class="st">    </span><span class="kw">select</span>(<span class="op">-</span>EffortSeg) <span class="op">%&gt;%</span></span>
<span id="cb95-8"><a href="processing.html#cb95-8"></a><span class="st">    </span><span class="kw">arrange</span>(<span class="kw">desc</span>(use_sit)) <span class="op">%&gt;%</span></span>
<span id="cb95-9"><a href="processing.html#cb95-9"></a><span class="st">    </span>print</span>
<span id="cb95-10"><a href="processing.html#cb95-10"></a></span>
<span id="cb95-11"><a href="processing.html#cb95-11"></a>  abund <span class="op">%&gt;%</span></span>
<span id="cb95-12"><a href="processing.html#cb95-12"></a><span class="st">    </span><span class="kw">filter</span>(CruzNo <span class="op">==</span><span class="st"> </span><span class="dv">1631</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pull</span>(species) <span class="op">%&gt;%</span><span class="st"> </span>table</span>
<span id="cb95-13"><a href="processing.html#cb95-13"></a>  </span>
<span id="cb95-14"><a href="processing.html#cb95-14"></a>  </span>
<span id="cb95-15"><a href="processing.html#cb95-15"></a>  <span class="kw">message</span>(<span class="st">&#39;</span><span class="ch">\n</span><span class="st">LTabundR:&#39;</span>)</span>
<span id="cb95-16"><a href="processing.html#cb95-16"></a>  ltabundr <span class="op">%&gt;%</span></span>
<span id="cb95-17"><a href="processing.html#cb95-17"></a><span class="st">    </span><span class="kw">filter</span>(Cruise <span class="op">==</span><span class="st"> </span>cruise, species <span class="op">==</span><span class="st"> </span>spp) <span class="op">%&gt;%</span></span>
<span id="cb95-18"><a href="processing.html#cb95-18"></a><span class="st">    </span><span class="kw">select</span>(<span class="dv">6</span>, <span class="dv">2</span>, <span class="dv">13</span>, <span class="dv">73</span>, <span class="dv">69</span>, <span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">41</span>, <span class="dv">86</span>) <span class="op">%&gt;%</span></span>
<span id="cb95-19"><a href="processing.html#cb95-19"></a><span class="st">    </span><span class="kw">rename</span>(<span class="dt">use_sit =</span> included, <span class="dt">use_effort =</span> use) <span class="op">%&gt;%</span></span>
<span id="cb95-20"><a href="processing.html#cb95-20"></a><span class="st">    </span><span class="kw">arrange</span>(<span class="kw">desc</span>(use_effort)) <span class="op">%&gt;%</span></span>
<span id="cb95-21"><a href="processing.html#cb95-21"></a><span class="st">    </span>tibble <span class="op">%&gt;%</span><span class="st"> </span>print</span>
<span id="cb95-22"><a href="processing.html#cb95-22"></a>}</span></code></pre></div>
<div id="discrepancies" class="section level4 unnumbered hasAnchor">
<h4>Discrepancies<a href="processing.html#discrepancies" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="cruise-1203-species-015" class="section level5 unnumbered hasAnchor">
<h5>Cruise 1203, Species 015<a href="processing.html#cruise-1203-species-015" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>In this case, <code>LTabundR</code> has a non-systematic sighting that <code>ABUND</code> has ignored.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="processing.html#cb96-1"></a><span class="kw">sight_compare</span>(abund, ltabundr, <span class="dv">1203</span>, <span class="st">&#39;015&#39;</span>)</span>
<span id="cb96-2"><a href="processing.html#cb96-2"></a>ABUND<span class="op">:</span></span>
<span id="cb96-3"><a href="processing.html#cb96-3"></a><span class="co"># A tibble: 1 × 6</span></span>
<span id="cb96-4"><a href="processing.html#cb96-4"></a><span class="st">  </span>CruzNo DateTime        Beauf Mixed  best use_sit</span>
<span id="cb96-5"><a href="processing.html#cb96-5"></a>   <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">           </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">  </span></span>
<span id="cb96-6"><a href="processing.html#cb96-6"></a><span class="dv">1</span>   <span class="dv">1203</span> <span class="dv">2012-5-16</span> <span class="dv">11</span><span class="op">:</span><span class="dv">58</span>     <span class="dv">4</span> <span class="st">&quot; F&quot;</span>   <span class="fl">74.9</span> <span class="ot">TRUE</span>   </span>
<span id="cb96-7"><a href="processing.html#cb96-7"></a></span>
<span id="cb96-8"><a href="processing.html#cb96-8"></a>LTabundR<span class="op">:</span></span>
<span id="cb96-9"><a href="processing.html#cb96-9"></a><span class="co"># A tibble: 2 × 9</span></span>
<span id="cb96-10"><a href="processing.html#cb96-10"></a><span class="st">  </span>Cruise DateTime              Bft mixed  best OnEffort EffType use_ef…¹ use_sit</span>
<span id="cb96-11"><a href="processing.html#cb96-11"></a>   <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dttm<span class="op">&gt;</span><span class="st">              </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">  </span></span>
<span id="cb96-12"><a href="processing.html#cb96-12"></a><span class="dv">1</span>   <span class="dv">1203</span> <span class="dv">2012-05-13</span> <span class="dv">13</span><span class="op">:</span><span class="dv">19</span><span class="op">:</span><span class="dv">44</span>     <span class="dv">5</span> <span class="ot">TRUE</span>    <span class="dv">1</span>   <span class="ot">TRUE</span>     N       <span class="ot">TRUE</span>     <span class="ot">TRUE</span>   </span>
<span id="cb96-13"><a href="processing.html#cb96-13"></a><span class="dv">2</span>   <span class="dv">1203</span> <span class="dv">2012-05-16</span> <span class="dv">11</span><span class="op">:</span><span class="dv">58</span><span class="op">:</span><span class="dv">30</span>     <span class="dv">4</span> <span class="ot">FALSE</span>  <span class="fl">74.9</span> <span class="ot">TRUE</span>     N       <span class="ot">TRUE</span>     <span class="ot">TRUE</span>   </span>
<span id="cb96-14"><a href="processing.html#cb96-14"></a><span class="co"># … with abbreviated variable name ¹​use_effort</span></span></code></pre></div>
<p>Looking at the sighting details from <code>LTabundR</code> …</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="processing.html#cb97-1"></a>(ltabundr <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Cruise <span class="op">==</span><span class="st"> </span><span class="dv">1203</span>, species <span class="op">==</span><span class="st"> &#39;015&#39;</span>))[<span class="dv">1</span>,]</span>
<span id="cb97-2"><a href="processing.html#cb97-2"></a>  Event            DateTime      Lat       Lon OnEffort Cruise Mode OffsetGMT</span>
<span id="cb97-3"><a href="processing.html#cb97-3"></a><span class="dv">1</span>     S <span class="dv">2012-05-13</span> <span class="dv">13</span><span class="op">:</span><span class="dv">19</span><span class="op">:</span><span class="dv">44</span> <span class="fl">11.96733</span> <span class="fl">-161.1727</span>     <span class="ot">TRUE</span>   <span class="dv">1203</span>    C       <span class="dv">-10</span></span>
<span id="cb97-4"><a href="processing.html#cb97-4"></a>  EffType ESWsides Course SpdKt Bft SwellHght WindSpdKt RainFog HorizSun</span>
<span id="cb97-5"><a href="processing.html#cb97-5"></a><span class="dv">1</span>       N        <span class="dv">2</span>     <span class="dv">18</span>   <span class="fl">9.2</span>   <span class="dv">5</span>         <span class="dv">6</span>        <span class="dv">21</span>       <span class="dv">5</span>       <span class="dv">12</span></span>
<span id="cb97-6"><a href="processing.html#cb97-6"></a>  VertSun Glare Vis ObsL Rec ObsR ObsInd EffortDot EventNum</span>
<span id="cb97-7"><a href="processing.html#cb97-7"></a><span class="dv">1</span>      <span class="dv">12</span> <span class="ot">FALSE</span>   <span class="dv">6</span>  <span class="dv">073</span> <span class="dv">235</span>  <span class="dv">280</span>   <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">      </span><span class="ot">TRUE</span>      <span class="dv">268</span></span>
<span id="cb97-8"><a href="processing.html#cb97-8"></a>                       file_das line_num stratum_HI_EEZ stratum_OtherCNP</span>
<span id="cb97-9"><a href="processing.html#cb97-9"></a><span class="dv">1</span> CenPac1986<span class="dv">-2020</span>_Final_alb.das   <span class="dv">493021</span>          <span class="ot">FALSE</span>             <span class="ot">TRUE</span></span>
<span id="cb97-10"><a href="processing.html#cb97-10"></a>  stratum_WHICEAS year month day yday km_int   km_cum ship  stratum seg_id  use</span>
<span id="cb97-11"><a href="processing.html#cb97-11"></a><span class="dv">1</span>           <span class="ot">FALSE</span> <span class="dv">2012</span>     <span class="dv">5</span>  <span class="dv">13</span>  <span class="dv">134</span>      <span class="dv">0</span> <span class="fl">171109.1</span>  OES OtherCNP    <span class="dv">276</span> <span class="ot">TRUE</span></span>
<span id="cb97-12"><a href="processing.html#cb97-12"></a>  SightNo Subgroup SightNoDaily Obs ObsStd Bearing Reticle DistNm Cue Method</span>
<span id="cb97-13"><a href="processing.html#cb97-13"></a><span class="dv">1</span>     <span class="dv">069</span>     <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st"> </span><span class="dv">20120513</span>_<span class="dv">123</span> <span class="dv">235</span>   <span class="ot">TRUE</span>      <span class="dv">90</span>      <span class="ot">NA</span>    <span class="fl">0.1</span>   <span class="dv">3</span>      <span class="dv">1</span></span>
<span id="cb97-14"><a href="processing.html#cb97-14"></a>  Photos Birds CalibSchool PhotosAerial Biopsy CourseSchool TurtleSp TurtleGs</span>
<span id="cb97-15"><a href="processing.html#cb97-15"></a><span class="dv">1</span>      Y     Y           N            N      N           <span class="ot">NA</span>     <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">       </span><span class="ot">NA</span></span>
<span id="cb97-16"><a href="processing.html#cb97-16"></a>  TurtleJFR TurtleAge TurtleCapt PinnipedSp PinnipedGs BoatType BoatGs</span>
<span id="cb97-17"><a href="processing.html#cb97-17"></a><span class="dv">1</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">         </span><span class="ot">NA</span>     <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">     </span><span class="ot">NA</span></span>
<span id="cb97-18"><a href="processing.html#cb97-18"></a>  PerpDistKm species best low high  prob mixed   ss_tot lnsstot ss_percent n_sp</span>
<span id="cb97-19"><a href="processing.html#cb97-19"></a><span class="dv">1</span>     <span class="fl">0.1852</span>     <span class="dv">015</span>    <span class="dv">1</span> <span class="ot">NaN</span>  <span class="ot">NaN</span> <span class="ot">FALSE</span>  <span class="ot">TRUE</span> <span class="fl">6.956522</span> <span class="fl">1.93968</span>        <span class="ot">NaN</span>    <span class="dv">2</span></span>
<span id="cb97-20"><a href="processing.html#cb97-20"></a>  n_obs n_best n_low n_high calibr ss_valid mixed_max spp_max included</span>
<span id="cb97-21"><a href="processing.html#cb97-21"></a><span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span>   <span class="ot">TRUE</span>    <span class="ot">FALSE</span>     <span class="ot">FALSE</span>    <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">     </span><span class="ot">TRUE</span></span></code></pre></div>
<p>According to <code>ABUND</code>, this sighting is not mixed-species, but <code>LTabundR</code> says it is. Looking at the raw <code>DAS</code>…</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="processing.html#cb98-1"></a>das_file &lt;-<span class="st"> &#39;data/surveys/CenPac1986-2020_Final_alb.das&#39;</span></span>
<span id="cb98-2"><a href="processing.html#cb98-2"></a>das &lt;-<span class="st"> </span><span class="kw">das_readtext</span>(das_file)</span>
<span id="cb98-3"><a href="processing.html#cb98-3"></a>i &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">substr</span>(das<span class="op">$</span>das, <span class="dv">6</span>, <span class="dv">18</span>) <span class="op">==</span><span class="st"> &#39;131944 051312&#39;</span>)</span>
<span id="cb98-4"><a href="processing.html#cb98-4"></a>das<span class="op">$</span>das[i]</span>
<span id="cb98-5"><a href="processing.html#cb98-5"></a>[<span class="dv">1</span>] <span class="st">&quot;268S.131944 051312 N11:58.04 W161:10.36  069  235    3    1  090      0.10              N    N    N&quot;</span>                                             </span>
<span id="cb98-6"><a href="processing.html#cb98-6"></a>[<span class="dv">2</span>] <span class="st">&quot;269A.131944 051312 N11:58.04 W161:10.36  069         Y    Y  033  015    &quot;</span>                                                                       </span>
<span id="cb98-7"><a href="processing.html#cb98-7"></a>[<span class="dv">3</span>] <span class="st">&quot;269C.131944 051312 N11:58.04 W161:10.36  Overall estimate for full group- never saw all at once.  -EMO&quot;</span>                                          </span>
<span id="cb98-8"><a href="processing.html#cb98-8"></a>[<span class="dv">4</span>] <span class="st">&quot;268G.131944 051312 N11:58.04 W161:10.36  069    A  235    1  090      0.10 &quot;</span>                                                                     </span>
<span id="cb98-9"><a href="processing.html#cb98-9"></a>[<span class="dv">5</span>] <span class="st">&quot;269A.131944 051312 N11:58.04 W161:10.36  069         Y    Y  033  015&quot;</span>                                                                           </span>
<span id="cb98-10"><a href="processing.html#cb98-10"></a>[<span class="dv">6</span>] <span class="st">&quot;269C.131944 051312 N11:58.04 W161:10.36  begin PC protool, first sighting is subgroup &#39;A&#39;, acoustics already tracking        &quot;</span>                   </span>
<span id="cb98-11"><a href="processing.html#cb98-11"></a>[<span class="dv">7</span>] <span class="st">&quot;269C.131944 051312 N11:58.04 W161:10.36  photos taken during sighting indicate Steno (015) present. Not seen or estimated during sighting.  -EMO&quot;</span></span></code></pre></div>
<p>We see that this was a sighting of false killer whales during which species <code>015</code> was picked up during photo-ID. This discrepancy, then, may not be a mistake in the <code>LTabundR</code> processing.</p>
</div>
<div id="cruise-1203-species-049" class="section level5 unnumbered hasAnchor">
<h5>Cruise 1203, Species 049<a href="processing.html#cruise-1203-species-049" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>In this case, <code>LTabundR</code> has a non-systematic sighting that <code>ABUND</code> has ignored.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="processing.html#cb99-1"></a><span class="kw">sight_compare</span>(abund, ltabundr, <span class="dv">1203</span>, <span class="st">&#39;049&#39;</span>)</span>
<span id="cb99-2"><a href="processing.html#cb99-2"></a>ABUND<span class="op">:</span></span>
<span id="cb99-3"><a href="processing.html#cb99-3"></a><span class="co"># A tibble: 1 × 6</span></span>
<span id="cb99-4"><a href="processing.html#cb99-4"></a><span class="st">  </span>CruzNo DateTime       Beauf Mixed  best use_sit</span>
<span id="cb99-5"><a href="processing.html#cb99-5"></a>   <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">          </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">  </span></span>
<span id="cb99-6"><a href="processing.html#cb99-6"></a><span class="dv">1</span>   <span class="dv">1203</span> <span class="dv">2012-5-3</span> <span class="dv">14</span><span class="op">:</span><span class="dv">21</span>     <span class="dv">6</span> <span class="st">&quot; F&quot;</span>   <span class="fl">1.16</span> <span class="ot">TRUE</span>   </span>
<span id="cb99-7"><a href="processing.html#cb99-7"></a></span>
<span id="cb99-8"><a href="processing.html#cb99-8"></a>LTabundR<span class="op">:</span></span>
<span id="cb99-9"><a href="processing.html#cb99-9"></a><span class="co"># A tibble: 2 × 9</span></span>
<span id="cb99-10"><a href="processing.html#cb99-10"></a><span class="st">  </span>Cruise DateTime              Bft mixed  best OnEffort EffType use_ef…¹ use_sit</span>
<span id="cb99-11"><a href="processing.html#cb99-11"></a>   <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dttm<span class="op">&gt;</span><span class="st">              </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">  </span></span>
<span id="cb99-12"><a href="processing.html#cb99-12"></a><span class="dv">1</span>   <span class="dv">1203</span> <span class="dv">2012-05-03</span> <span class="dv">14</span><span class="op">:</span><span class="dv">21</span><span class="op">:</span><span class="dv">40</span>     <span class="dv">6</span> <span class="ot">FALSE</span>  <span class="fl">1.16</span> <span class="ot">TRUE</span>     S       <span class="ot">TRUE</span>     <span class="ot">TRUE</span>   </span>
<span id="cb99-13"><a href="processing.html#cb99-13"></a><span class="dv">2</span>   <span class="dv">1203</span> <span class="dv">2012-05-07</span> <span class="dv">10</span><span class="op">:</span><span class="dv">54</span><span class="op">:</span><span class="dv">09</span>     <span class="dv">7</span> <span class="ot">FALSE</span>  <span class="dv">1</span>    <span class="ot">TRUE</span>     N       <span class="ot">FALSE</span>    <span class="ot">FALSE</span>  </span>
<span id="cb99-14"><a href="processing.html#cb99-14"></a><span class="co"># … with abbreviated variable name ¹​use_effort</span></span></code></pre></div>
<p>Looking at the sighting details from <code>LTabundR</code> …</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="processing.html#cb100-1"></a>(ltabundr <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Cruise <span class="op">==</span><span class="st"> </span><span class="dv">1203</span>, species <span class="op">==</span><span class="st"> &#39;049&#39;</span>))[<span class="dv">2</span>,]</span>
<span id="cb100-2"><a href="processing.html#cb100-2"></a>  Event            DateTime      Lat       Lon OnEffort Cruise Mode OffsetGMT</span>
<span id="cb100-3"><a href="processing.html#cb100-3"></a><span class="dv">2</span>     S <span class="dv">2012-05-07</span> <span class="dv">10</span><span class="op">:</span><span class="dv">54</span><span class="op">:</span><span class="dv">09</span> <span class="fl">5.960333</span> <span class="fl">-162.1255</span>     <span class="ot">TRUE</span>   <span class="dv">1203</span>    C       <span class="dv">-10</span></span>
<span id="cb100-4"><a href="processing.html#cb100-4"></a>  EffType ESWsides Course SpdKt Bft SwellHght WindSpdKt RainFog HorizSun</span>
<span id="cb100-5"><a href="processing.html#cb100-5"></a><span class="dv">2</span>       N        <span class="dv">2</span>    <span class="dv">269</span>   <span class="fl">8.8</span>   <span class="dv">7</span>         <span class="dv">9</span>        <span class="dv">30</span>       <span class="dv">5</span>        <span class="dv">5</span></span>
<span id="cb100-6"><a href="processing.html#cb100-6"></a>  VertSun Glare Vis ObsL Rec ObsR ObsInd EffortDot EventNum</span>
<span id="cb100-7"><a href="processing.html#cb100-7"></a><span class="dv">2</span>       <span class="dv">1</span> <span class="ot">FALSE</span> <span class="fl">4.5</span>  <span class="dv">238</span> <span class="dv">328</span>  <span class="dv">073</span>   <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">      </span><span class="ot">TRUE</span>      <span class="dv">145</span></span>
<span id="cb100-8"><a href="processing.html#cb100-8"></a>                       file_das line_num stratum_HI_EEZ stratum_OtherCNP</span>
<span id="cb100-9"><a href="processing.html#cb100-9"></a><span class="dv">2</span> CenPac1986<span class="dv">-2020</span>_Final_alb.das   <span class="dv">489954</span>          <span class="ot">FALSE</span>             <span class="ot">TRUE</span></span>
<span id="cb100-10"><a href="processing.html#cb100-10"></a>  stratum_WHICEAS year month day yday km_int   km_cum ship  stratum seg_id</span>
<span id="cb100-11"><a href="processing.html#cb100-11"></a><span class="dv">2</span>           <span class="ot">FALSE</span> <span class="dv">2012</span>     <span class="dv">5</span>   <span class="dv">7</span>  <span class="dv">128</span>      <span class="dv">0</span> <span class="fl">170008.1</span>  OES OtherCNP    <span class="dv">268</span></span>
<span id="cb100-12"><a href="processing.html#cb100-12"></a>    use SightNo Subgroup SightNoDaily Obs ObsStd Bearing Reticle DistNm Cue</span>
<span id="cb100-13"><a href="processing.html#cb100-13"></a><span class="dv">2</span> <span class="ot">FALSE</span>     <span class="dv">052</span>     <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st"> </span><span class="dv">20120507</span>_<span class="dv">103</span> <span class="dv">238</span>   <span class="ot">TRUE</span>     <span class="dv">310</span>      <span class="dv">10</span>   <span class="fl">0.52</span>   <span class="dv">3</span></span>
<span id="cb100-14"><a href="processing.html#cb100-14"></a>  Method Photos Birds CalibSchool PhotosAerial Biopsy CourseSchool TurtleSp</span>
<span id="cb100-15"><a href="processing.html#cb100-15"></a><span class="dv">2</span>      <span class="dv">4</span>      N     N           N            N      N           <span class="ot">NA</span>     <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span></span>
<span id="cb100-16"><a href="processing.html#cb100-16"></a><span class="st">  </span>TurtleGs TurtleJFR TurtleAge TurtleCapt PinnipedSp PinnipedGs BoatType BoatGs</span>
<span id="cb100-17"><a href="processing.html#cb100-17"></a><span class="dv">2</span>       <span class="ot">NA</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">         </span><span class="ot">NA</span>     <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">     </span><span class="ot">NA</span></span>
<span id="cb100-18"><a href="processing.html#cb100-18"></a>  PerpDistKm species best low high  prob mixed ss_tot lnsstot ss_percent n_sp</span>
<span id="cb100-19"><a href="processing.html#cb100-19"></a><span class="dv">2</span>  <span class="fl">0.7377314</span>     <span class="dv">049</span>    <span class="dv">1</span>   <span class="dv">1</span>    <span class="dv">1</span> <span class="ot">FALSE</span> <span class="ot">FALSE</span>      <span class="dv">1</span>       <span class="dv">0</span>          <span class="dv">1</span>    <span class="dv">1</span></span>
<span id="cb100-20"><a href="processing.html#cb100-20"></a>  n_obs n_best n_low n_high calibr ss_valid mixed_max spp_max included</span>
<span id="cb100-21"><a href="processing.html#cb100-21"></a><span class="dv">2</span>     <span class="dv">1</span>      <span class="dv">1</span>     <span class="dv">1</span>      <span class="dv">1</span>   <span class="ot">TRUE</span>     <span class="ot">TRUE</span>      <span class="ot">TRUE</span>     <span class="dv">049</span>    <span class="ot">FALSE</span></span></code></pre></div>
<p>This is a sighting of a single Ziphiid whale. It appears to be squarely within the geostratum:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="processing.html#cb101-1"></a>cruzi &lt;-<span class="st"> </span><span class="kw">filter_cruz</span>(cruz, <span class="dt">spp=</span><span class="st">&#39;047&#39;</span>, <span class="dt">years =</span> <span class="dv">1988</span>)</span>
<span id="cb101-2"><a href="processing.html#cb101-2"></a><span class="kw">map_cruz</span>(cruzi)</span></code></pre></div>
<p>Loooking at the raw <code>DAS</code> data …</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="processing.html#cb102-1"></a>i &lt;-<span class="st"> </span><span class="kw">which</span>(<span class="kw">substr</span>(das<span class="op">$</span>das, <span class="dv">6</span>, <span class="dv">18</span>) <span class="op">==</span><span class="st"> &#39;105409 050712&#39;</span>)</span>
<span id="cb102-2"><a href="processing.html#cb102-2"></a>das<span class="op">$</span>das[(i[<span class="dv">1</span>] <span class="op">-</span><span class="st"> </span><span class="dv">10</span>)<span class="op">:</span>(i[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span><span class="dv">3</span>)]</span>
<span id="cb102-3"><a href="processing.html#cb102-3"></a> [<span class="dv">1</span>] <span class="st">&quot;135V.104143 050712 N05:57.61 W162:05.66    7   09  070      30.0&quot;</span>                                   </span>
<span id="cb102-4"><a href="processing.html#cb102-4"></a> [<span class="dv">2</span>] <span class="st">&quot;136N.104143 050712 N05:57.61 W162:05.66  272 09.3&quot;</span>                                                  </span>
<span id="cb102-5"><a href="processing.html#cb102-5"></a> [<span class="dv">3</span>] <span class="st">&quot;137W.104143 050712 N05:57.61 W162:05.66    5   05   01  050  4.5&quot;</span>                                   </span>
<span id="cb102-6"><a href="processing.html#cb102-6"></a> [<span class="dv">4</span>] <span class="st">&quot;138*.104234 050712 N05:57.62 W162:05.79&quot;</span>                                                            </span>
<span id="cb102-7"><a href="processing.html#cb102-7"></a> [<span class="dv">5</span>] <span class="st">&quot;139*.104434 050712 N05:57.62 W162:06.09&quot;</span>                                                            </span>
<span id="cb102-8"><a href="processing.html#cb102-8"></a> [<span class="dv">6</span>] <span class="st">&quot;140*.104634 050712 N05:57.63 W162:06.39&quot;</span>                                                            </span>
<span id="cb102-9"><a href="processing.html#cb102-9"></a> [<span class="dv">7</span>] <span class="st">&quot;141N.104713 050712 N05:57.63 W162:06.49  269 08.8&quot;</span>                                                  </span>
<span id="cb102-10"><a href="processing.html#cb102-10"></a> [<span class="dv">8</span>] <span class="st">&quot;142*.104834 050712 N05:57.63 W162:06.69&quot;</span>                                                            </span>
<span id="cb102-11"><a href="processing.html#cb102-11"></a> [<span class="dv">9</span>] <span class="st">&quot;143*.105034 050712 N05:57.63 W162:06.99&quot;</span>                                                            </span>
<span id="cb102-12"><a href="processing.html#cb102-12"></a>[<span class="dv">10</span>] <span class="st">&quot;144*.105234 050712 N05:57.63 W162:07.29&quot;</span>                                                            </span>
<span id="cb102-13"><a href="processing.html#cb102-13"></a>[<span class="dv">11</span>] <span class="st">&quot;145S.105409 050712 N05:57.62 W162:07.53  052  238    3    4  310 10.0 0.52              N    N    N&quot;</span></span>
<span id="cb102-14"><a href="processing.html#cb102-14"></a>[<span class="dv">12</span>] <span class="st">&quot;146A.105409 050712 N05:57.62 W162:07.53  052         N    N  049               &quot;</span>                    </span>
<span id="cb102-15"><a href="processing.html#cb102-15"></a>[<span class="dv">13</span>] <span class="st">&quot;   1                                     238    1    1    1  100&quot;</span>                                   </span>
<span id="cb102-16"><a href="processing.html#cb102-16"></a>[<span class="dv">14</span>] <span class="st">&quot;147*.105434 050712 N05:57.62 W162:07.59&quot;</span>                                                            </span></code></pre></div>
<p>It is not clear why <code>ABUND</code> did not include this sighting as non-systematic.</p>
</div>
<div id="cruise-1165-species-047" class="section level5 unnumbered hasAnchor">
<h5>Cruise 1165, Species 047<a href="processing.html#cruise-1165-species-047" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>In this case, <code>LTabundR</code> has a <em>systematic</em> sighting of a pygmy sperm whale, whereas <code>ABUND</code> does not have anything.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="processing.html#cb103-1"></a><span class="kw">sight_compare</span>(abund, ltabundr, <span class="dv">1165</span>, <span class="st">&#39;047&#39;</span>)</span>
<span id="cb103-2"><a href="processing.html#cb103-2"></a>ABUND<span class="op">:</span></span>
<span id="cb103-3"><a href="processing.html#cb103-3"></a><span class="co"># A tibble: 0 × 6</span></span>
<span id="cb103-4"><a href="processing.html#cb103-4"></a><span class="co"># … with 6 variables: CruzNo &lt;int&gt;, DateTime &lt;chr&gt;, Beauf &lt;int&gt;, Mixed &lt;chr&gt;,</span></span>
<span id="cb103-5"><a href="processing.html#cb103-5"></a><span class="co">#   best &lt;dbl&gt;, use_sit &lt;lgl&gt;</span></span>
<span id="cb103-6"><a href="processing.html#cb103-6"></a></span>
<span id="cb103-7"><a href="processing.html#cb103-7"></a>LTabundR<span class="op">:</span></span>
<span id="cb103-8"><a href="processing.html#cb103-8"></a><span class="co"># A tibble: 1 × 9</span></span>
<span id="cb103-9"><a href="processing.html#cb103-9"></a><span class="st">  </span>Cruise DateTime              Bft mixed  best OnEffort EffType use_ef…¹ use_sit</span>
<span id="cb103-10"><a href="processing.html#cb103-10"></a>   <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dttm<span class="op">&gt;</span><span class="st">              </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">  </span></span>
<span id="cb103-11"><a href="processing.html#cb103-11"></a><span class="dv">1</span>   <span class="dv">1165</span> <span class="dv">1988-07-30</span> <span class="dv">19</span><span class="op">:</span><span class="dv">28</span><span class="op">:</span><span class="dv">00</span>     <span class="dv">0</span> <span class="ot">FALSE</span>  <span class="fl">1.16</span> <span class="ot">TRUE</span>     S       <span class="ot">TRUE</span>     <span class="ot">TRUE</span>   </span>
<span id="cb103-12"><a href="processing.html#cb103-12"></a><span class="co"># … with abbreviated variable name ¹​use_effort</span></span>
<span id="cb103-13"><a href="processing.html#cb103-13"></a>(ltabundr <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Cruise <span class="op">==</span><span class="st"> </span><span class="dv">1165</span>, species <span class="op">==</span><span class="st"> &#39;047&#39;</span>))[<span class="dv">1</span>,]</span>
<span id="cb103-14"><a href="processing.html#cb103-14"></a>  Event            DateTime  Lat       Lon OnEffort Cruise Mode OffsetGMT</span>
<span id="cb103-15"><a href="processing.html#cb103-15"></a><span class="dv">1</span>     S <span class="dv">1988-07-30</span> <span class="dv">19</span><span class="op">:</span><span class="dv">28</span><span class="op">:</span><span class="dv">00</span> <span class="fl">26.3</span> <span class="fl">-121.1167</span>     <span class="ot">TRUE</span>   <span class="dv">1165</span>    C        <span class="ot">NA</span></span>
<span id="cb103-16"><a href="processing.html#cb103-16"></a>  EffType ESWsides Course SpdKt Bft SwellHght WindSpdKt RainFog HorizSun</span>
<span id="cb103-17"><a href="processing.html#cb103-17"></a><span class="dv">1</span>       S        <span class="dv">2</span>    <span class="dv">163</span>  <span class="fl">10.5</span>   <span class="dv">0</span>        <span class="ot">NA</span>        <span class="ot">NA</span>       <span class="dv">1</span>       <span class="ot">NA</span></span>
<span id="cb103-18"><a href="processing.html#cb103-18"></a>  VertSun Glare Vis ObsL Rec ObsR ObsInd EffortDot EventNum</span>
<span id="cb103-19"><a href="processing.html#cb103-19"></a><span class="dv">1</span>      <span class="ot">NA</span>    <span class="ot">NA</span>  <span class="ot">NA</span>  <span class="dv">038</span> <span class="dv">068</span>  <span class="dv">051</span>   <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">      </span><span class="ot">TRUE</span>       <span class="dv">92</span></span>
<span id="cb103-20"><a href="processing.html#cb103-20"></a>                       file_das line_num stratum_HI_EEZ stratum_OtherCNP</span>
<span id="cb103-21"><a href="processing.html#cb103-21"></a><span class="dv">1</span> CenPac1986<span class="dv">-2020</span>_Final_alb.das    <span class="dv">50173</span>          <span class="ot">FALSE</span>             <span class="ot">TRUE</span></span>
<span id="cb103-22"><a href="processing.html#cb103-22"></a>  stratum_WHICEAS year month day yday km_int   km_cum ship  stratum seg_id  use</span>
<span id="cb103-23"><a href="processing.html#cb103-23"></a><span class="dv">1</span>           <span class="ot">FALSE</span> <span class="dv">1988</span>     <span class="dv">7</span>  <span class="dv">30</span>  <span class="dv">212</span>      <span class="dv">0</span> <span class="fl">13618.39</span>  MAC OtherCNP    <span class="dv">237</span> <span class="ot">TRUE</span></span>
<span id="cb103-24"><a href="processing.html#cb103-24"></a>  SightNo Subgroup SightNoDaily Obs ObsStd Bearing Reticle DistNm Cue Method</span>
<span id="cb103-25"><a href="processing.html#cb103-25"></a><span class="dv">1</span>      <span class="dv">07</span>     <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">   </span><span class="dv">19880730</span>_<span class="dv">9</span> <span class="dv">051</span>   <span class="ot">TRUE</span>      <span class="dv">45</span>    <span class="fl">3.38</span>    <span class="fl">0.9</span>   <span class="dv">3</span>      <span class="dv">4</span></span>
<span id="cb103-26"><a href="processing.html#cb103-26"></a>  Photos Birds CalibSchool PhotosAerial Biopsy CourseSchool TurtleSp TurtleGs</span>
<span id="cb103-27"><a href="processing.html#cb103-27"></a><span class="dv">1</span>   <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">     </span>N        <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">           </span><span class="ot">NA</span>     <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">       </span><span class="ot">NA</span></span>
<span id="cb103-28"><a href="processing.html#cb103-28"></a>  TurtleJFR TurtleAge TurtleCapt PinnipedSp PinnipedGs BoatType BoatGs</span>
<span id="cb103-29"><a href="processing.html#cb103-29"></a><span class="dv">1</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">         </span><span class="ot">NA</span>     <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">     </span><span class="ot">NA</span></span>
<span id="cb103-30"><a href="processing.html#cb103-30"></a>  PerpDistKm species    best low     high  prob mixed  ss_tot   lnsstot</span>
<span id="cb103-31"><a href="processing.html#cb103-31"></a><span class="dv">1</span>   <span class="fl">1.178606</span>     <span class="dv">047</span> <span class="fl">1.15942</span>   <span class="dv">1</span> <span class="fl">1.259921</span> <span class="ot">FALSE</span> <span class="ot">FALSE</span> <span class="fl">1.15942</span> <span class="fl">0.1479201</span></span>
<span id="cb103-32"><a href="processing.html#cb103-32"></a>  ss_percent n_sp n_obs n_best n_low n_high calibr ss_valid mixed_max spp_max</span>
<span id="cb103-33"><a href="processing.html#cb103-33"></a><span class="dv">1</span>          <span class="dv">1</span>    <span class="dv">1</span>     <span class="dv">3</span>      <span class="dv">3</span>     <span class="dv">3</span>      <span class="dv">3</span>   <span class="ot">TRUE</span>     <span class="ot">TRUE</span>      <span class="ot">TRUE</span>     <span class="dv">047</span></span>
<span id="cb103-34"><a href="processing.html#cb103-34"></a>  included</span>
<span id="cb103-35"><a href="processing.html#cb103-35"></a><span class="dv">1</span>     <span class="ot">TRUE</span></span></code></pre></div>
<p>To investigate this sighting, we can filter our <code>cruz</code> object and take a look at a map of this sighting:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="processing.html#cb104-1"></a>cruzi &lt;-<span class="st"> </span><span class="kw">filter_cruz</span>(cruz, <span class="dt">spp=</span><span class="st">&#39;047&#39;</span>, <span class="dt">years =</span> <span class="dv">1988</span>)</span>
<span id="cb104-2"><a href="processing.html#cb104-2"></a><span class="kw">map_cruz</span>(cruzi)</span></code></pre></div>
<p>Using that map we see that this sighting occurred <em>just inside</em> of the <code>OtherCNP</code> geostratum. It is likely that the point-in-polygon subroutines inside <code>ABUND9</code> decided that this sighting was out of the study area, and therefore excluded it. The subroutines used by <code>LTabundR</code>, which are based in the <code>R</code> package <code>sf</code>, should not be wrong in this case.</p>
</div>
<div id="cruise-1631-species-003" class="section level5 unnumbered hasAnchor">
<h5>Cruise 1631, Species 003<a href="processing.html#cruise-1631-species-003" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>In this case, there was a non-systematic sighting of species 003 that was found by <code>LTabundR</code> but not by <code>ABUND</code>.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="processing.html#cb105-1"></a><span class="kw">sight_compare</span>(abund, ltabundr, <span class="dv">1631</span>, <span class="st">&#39;003&#39;</span>)</span>
<span id="cb105-2"><a href="processing.html#cb105-2"></a>ABUND<span class="op">:</span></span>
<span id="cb105-3"><a href="processing.html#cb105-3"></a><span class="co"># A tibble: 0 × 6</span></span>
<span id="cb105-4"><a href="processing.html#cb105-4"></a><span class="co"># … with 6 variables: CruzNo &lt;int&gt;, DateTime &lt;chr&gt;, Beauf &lt;int&gt;, Mixed &lt;chr&gt;,</span></span>
<span id="cb105-5"><a href="processing.html#cb105-5"></a><span class="co">#   best &lt;dbl&gt;, use_sit &lt;lgl&gt;</span></span>
<span id="cb105-6"><a href="processing.html#cb105-6"></a></span>
<span id="cb105-7"><a href="processing.html#cb105-7"></a>LTabundR<span class="op">:</span></span>
<span id="cb105-8"><a href="processing.html#cb105-8"></a><span class="co"># A tibble: 1 × 9</span></span>
<span id="cb105-9"><a href="processing.html#cb105-9"></a><span class="st">  </span>Cruise DateTime              Bft mixed  best OnEffort EffType use_ef…¹ use_sit</span>
<span id="cb105-10"><a href="processing.html#cb105-10"></a>   <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dttm<span class="op">&gt;</span><span class="st">              </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st">  </span></span>
<span id="cb105-11"><a href="processing.html#cb105-11"></a><span class="dv">1</span>   <span class="dv">1631</span> <span class="dv">2006-09-02</span> <span class="dv">07</span><span class="op">:</span><span class="dv">35</span><span class="op">:</span><span class="dv">14</span>     <span class="dv">5</span> <span class="ot">TRUE</span>      <span class="dv">1</span> <span class="ot">TRUE</span>     N       <span class="ot">TRUE</span>     <span class="ot">TRUE</span>   </span>
<span id="cb105-12"><a href="processing.html#cb105-12"></a><span class="co"># … with abbreviated variable name ¹​use_effort</span></span>
<span id="cb105-13"><a href="processing.html#cb105-13"></a>(ltabundr <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Cruise <span class="op">==</span><span class="st"> </span><span class="dv">1631</span>, species <span class="op">==</span><span class="st"> &#39;003&#39;</span>))</span>
<span id="cb105-14"><a href="processing.html#cb105-14"></a>  Event            DateTime      Lat       Lon OnEffort Cruise Mode OffsetGMT</span>
<span id="cb105-15"><a href="processing.html#cb105-15"></a><span class="dv">1</span>     S <span class="dv">2006-09-02</span> <span class="dv">07</span><span class="op">:</span><span class="dv">35</span><span class="op">:</span><span class="dv">14</span> <span class="fl">19.28883</span> <span class="fl">-156.8227</span>     <span class="ot">TRUE</span>   <span class="dv">1631</span>    P        <span class="dv">10</span></span>
<span id="cb105-16"><a href="processing.html#cb105-16"></a>  EffType ESWsides Course SpdKt Bft SwellHght WindSpdKt RainFog HorizSun</span>
<span id="cb105-17"><a href="processing.html#cb105-17"></a><span class="dv">1</span>       N        <span class="dv">2</span>    <span class="dv">155</span>    <span class="dv">10</span>   <span class="dv">5</span>         <span class="dv">4</span>        <span class="dv">18</span>       <span class="dv">1</span>       <span class="dv">10</span></span>
<span id="cb105-18"><a href="processing.html#cb105-18"></a>  VertSun Glare Vis ObsL Rec ObsR ObsInd EffortDot EventNum</span>
<span id="cb105-19"><a href="processing.html#cb105-19"></a><span class="dv">1</span>       <span class="dv">2</span> <span class="ot">FALSE</span>   <span class="dv">7</span>  <span class="dv">073</span> <span class="dv">196</span>  <span class="dv">197</span>   <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">      </span><span class="ot">TRUE</span>      <span class="dv">026</span></span>
<span id="cb105-20"><a href="processing.html#cb105-20"></a>                       file_das line_num stratum_HI_EEZ stratum_OtherCNP</span>
<span id="cb105-21"><a href="processing.html#cb105-21"></a><span class="dv">1</span> CenPac1986<span class="dv">-2020</span>_Final_alb.das   <span class="dv">405216</span>           <span class="ot">TRUE</span>             <span class="ot">TRUE</span></span>
<span id="cb105-22"><a href="processing.html#cb105-22"></a>  stratum_WHICEAS year month day yday km_int   km_cum ship stratum seg_id  use</span>
<span id="cb105-23"><a href="processing.html#cb105-23"></a><span class="dv">1</span>            <span class="ot">TRUE</span> <span class="dv">2006</span>     <span class="dv">9</span>   <span class="dv">2</span>  <span class="dv">245</span>      <span class="dv">0</span> <span class="fl">124035.2</span>  Mc2 WHICEAS   <span class="dv">1275</span> <span class="ot">TRUE</span></span>
<span id="cb105-24"><a href="processing.html#cb105-24"></a>  SightNo Subgroup SightNoDaily Obs ObsStd Bearing Reticle DistNm Cue Method</span>
<span id="cb105-25"><a href="processing.html#cb105-25"></a><span class="dv">1</span>     <span class="dv">090</span>     <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">  </span><span class="dv">20060902</span>_<span class="dv">38</span> <span class="dv">197</span>   <span class="ot">TRUE</span>      <span class="dv">59</span>     <span class="fl">0.3</span>   <span class="fl">4.12</span>   <span class="dv">2</span>      <span class="dv">4</span></span>
<span id="cb105-26"><a href="processing.html#cb105-26"></a>  Photos Birds CalibSchool PhotosAerial Biopsy CourseSchool TurtleSp TurtleGs</span>
<span id="cb105-27"><a href="processing.html#cb105-27"></a><span class="dv">1</span>      N     N        <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">         </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">           </span><span class="ot">NA</span>     <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">       </span><span class="ot">NA</span></span>
<span id="cb105-28"><a href="processing.html#cb105-28"></a>  TurtleJFR TurtleAge TurtleCapt PinnipedSp PinnipedGs BoatType BoatGs</span>
<span id="cb105-29"><a href="processing.html#cb105-29"></a><span class="dv">1</span>      <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">      </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">       </span><span class="er">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">         </span><span class="ot">NA</span>     <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">     </span><span class="ot">NA</span></span>
<span id="cb105-30"><a href="processing.html#cb105-30"></a>  PerpDistKm species best low high  prob mixed   ss_tot  lnsstot ss_percent</span>
<span id="cb105-31"><a href="processing.html#cb105-31"></a><span class="dv">1</span>   <span class="fl">6.540392</span>     <span class="dv">003</span>    <span class="dv">1</span> <span class="ot">NaN</span>   <span class="ot">NA</span> <span class="ot">FALSE</span>  <span class="ot">TRUE</span> <span class="fl">3.478261</span> <span class="fl">1.246532</span>        <span class="ot">NaN</span></span>
<span id="cb105-32"><a href="processing.html#cb105-32"></a>  n_sp n_obs n_best n_low n_high calibr ss_valid mixed_max spp_max included</span>
<span id="cb105-33"><a href="processing.html#cb105-33"></a><span class="dv">1</span>    <span class="dv">2</span>     <span class="dv">1</span>      <span class="dv">0</span>     <span class="dv">1</span>      <span class="dv">0</span>   <span class="ot">TRUE</span>    <span class="ot">FALSE</span>     <span class="ot">FALSE</span>    <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st">     </span><span class="ot">TRUE</span></span></code></pre></div>
<p>The map indicates that this is not a geostratum boundary issue:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="processing.html#cb106-1"></a>cruzi &lt;-<span class="st"> </span><span class="kw">filter_cruz</span>(cruz, <span class="dt">spp=</span><span class="st">&#39;003&#39;</span>, <span class="dt">years =</span> <span class="dv">2006</span>)</span>
<span id="cb106-2"><a href="processing.html#cb106-2"></a><span class="kw">map_cruz</span>(cruzi)</span></code></pre></div>
<p>Looking at the raw <code>DAS</code> data …</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="processing.html#cb107-1"></a>das<span class="op">$</span>das[<span class="dv">405190</span><span class="op">:</span><span class="dv">405220</span>]</span>
<span id="cb107-2"><a href="processing.html#cb107-2"></a> [<span class="dv">1</span>] <span class="st">&quot;   C 120000 090106                      In transit to study area Sep 1. A.J. 10/18/06.&quot;</span></span>
<span id="cb107-3"><a href="processing.html#cb107-3"></a> [<span class="dv">2</span>] <span class="st">&quot;001B.061813 090206 N19:28.97 W156:55.51 1631    p   10    Y&quot;</span>                           </span>
<span id="cb107-4"><a href="processing.html#cb107-4"></a> [<span class="dv">3</span>] <span class="st">&quot;002R.061813 090206 N19:28.97 W156:55.51    N&quot;</span>                                          </span>
<span id="cb107-5"><a href="processing.html#cb107-5"></a> [<span class="dv">4</span>] <span class="st">&quot;003P.061813 090206 N19:28.97 W156:55.51  197  007  277&quot;</span>                                </span>
<span id="cb107-6"><a href="processing.html#cb107-6"></a> [<span class="dv">5</span>] <span class="st">&quot;004V.061813 090206 N19:28.97 W156:55.51    5   04  150      18.0&quot;</span>                      </span>
<span id="cb107-7"><a href="processing.html#cb107-7"></a> [<span class="dv">6</span>] <span class="st">&quot;005N.061813 090206 N19:28.97 W156:55.51  154 10.4&quot;</span>                                     </span>
<span id="cb107-8"><a href="processing.html#cb107-8"></a> [<span class="dv">7</span>] <span class="st">&quot;006W.061813 090206 N19:28.97 W156:55.51    1   10   03  032  7.0&quot;</span>                      </span>
<span id="cb107-9"><a href="processing.html#cb107-9"></a> [<span class="dv">8</span>] <span class="st">&quot;007C.061823 090206 N19:28.94 W156:55.50&quot;</span>                                               </span>
<span id="cb107-10"><a href="processing.html#cb107-10"></a> [<span class="dv">9</span>] <span class="st">&quot;008*.062019 090206 N19:28.63 W156:55.33&quot;</span>                                               </span>
<span id="cb107-11"><a href="processing.html#cb107-11"></a>[<span class="dv">10</span>] <span class="st">&quot;009*.063019 090206 N19:27.12 W156:54.53&quot;</span>                                               </span>
<span id="cb107-12"><a href="processing.html#cb107-12"></a>[<span class="dv">11</span>] <span class="st">&quot;010P.063950 090206 N19:25.68 W156:53.75  196  197  007&quot;</span>                                </span>
<span id="cb107-13"><a href="processing.html#cb107-13"></a>[<span class="dv">12</span>] <span class="st">&quot;011C.063950 090206 N19:25.68 W156:53.75&quot;</span>                                               </span>
<span id="cb107-14"><a href="processing.html#cb107-14"></a>[<span class="dv">13</span>] <span class="st">&quot;012V.063950 090206 N19:25.68 W156:53.75    5   04  150      18.0&quot;</span>                      </span>
<span id="cb107-15"><a href="processing.html#cb107-15"></a>[<span class="dv">14</span>] <span class="st">&quot;013N.063950 090206 N19:25.68 W156:53.75  151 10.1&quot;</span>                                     </span>
<span id="cb107-16"><a href="processing.html#cb107-16"></a>[<span class="dv">15</span>] <span class="st">&quot;014W.063950 090206 N19:25.68 W156:53.75    1   10   03  032  7.0&quot;</span>                      </span>
<span id="cb107-17"><a href="processing.html#cb107-17"></a>[<span class="dv">16</span>] <span class="st">&quot;015*.064019 090206 N19:25.61 W156:53.71&quot;</span>                                               </span>
<span id="cb107-18"><a href="processing.html#cb107-18"></a>[<span class="dv">17</span>] <span class="st">&quot;016N.064253 090206 N19:25.22 W156:53.50  153 10.3&quot;</span>                                     </span>
<span id="cb107-19"><a href="processing.html#cb107-19"></a>[<span class="dv">18</span>] <span class="st">&quot;017*.065019 090206 N19:24.11 W156:52.90&quot;</span>                                               </span>
<span id="cb107-20"><a href="processing.html#cb107-20"></a>[<span class="dv">19</span>] <span class="st">&quot;018*.070019 090206 N19:22.62 W156:52.11&quot;</span>                                               </span>
<span id="cb107-21"><a href="processing.html#cb107-21"></a>[<span class="dv">20</span>] <span class="st">&quot;019*.071019 090206 N19:21.10 W156:51.30&quot;</span>                                               </span>
<span id="cb107-22"><a href="processing.html#cb107-22"></a>[<span class="dv">21</span>] <span class="st">&quot;020*.072019 090206 N19:19.59 W156:50.53&quot;</span>                                               </span>
<span id="cb107-23"><a href="processing.html#cb107-23"></a>[<span class="dv">22</span>] <span class="st">&quot;021P.072113 090206 N19:19.46 W156:50.45  073  196  197&quot;</span>                                </span>
<span id="cb107-24"><a href="processing.html#cb107-24"></a>[<span class="dv">23</span>] <span class="st">&quot;022V.072113 090206 N19:19.46 W156:50.45    5   04  150      18.0&quot;</span>                      </span>
<span id="cb107-25"><a href="processing.html#cb107-25"></a>[<span class="dv">24</span>] <span class="st">&quot;023N.072113 090206 N19:19.46 W156:50.45  155 10.0&quot;</span>                                     </span>
<span id="cb107-26"><a href="processing.html#cb107-26"></a>[<span class="dv">25</span>] <span class="st">&quot;024W.072113 090206 N19:19.46 W156:50.45    1   10   02  032  7.0&quot;</span>                      </span>
<span id="cb107-27"><a href="processing.html#cb107-27"></a>[<span class="dv">26</span>] <span class="st">&quot;025*.073019 090206 N19:18.09 W156:49.75&quot;</span>                                               </span>
<span id="cb107-28"><a href="processing.html#cb107-28"></a>[<span class="dv">27</span>] <span class="st">&quot;026S.073514 090206 N19:17.33 W156:49.36  090  197    2    4  059  0.3 4.12  013&quot;</span>       </span>
<span id="cb107-29"><a href="processing.html#cb107-29"></a>[<span class="dv">28</span>] <span class="st">&quot;027A.073514 090206 N19:17.33 W156:49.36  090         N    N  177  003&quot;</span>                 </span>
<span id="cb107-30"><a href="processing.html#cb107-30"></a>[<span class="dv">29</span>] <span class="st">&quot;   1                                     197              3&quot;</span>                           </span>
<span id="cb107-31"><a href="processing.html#cb107-31"></a>[<span class="dv">30</span>] <span class="st">&quot;028*.074019 090206 N19:16.53 W156:48.94&quot;</span>                                               </span>
<span id="cb107-32"><a href="processing.html#cb107-32"></a>[<span class="dv">31</span>] <span class="st">&quot;029V.074337 090206 N19:16.01 W156:48.67    4   04  150      12.0&quot;</span>                      </span></code></pre></div>
<p>It appears that this was a multi-species sighting, but percentages were only provided for one species and the overall school size was quite low. We think that, in the absence of a best estimate and percent composition estimate for this species, it was ignored by <code>ABUND</code>.</p>
</div>
</div>
</div>
<div id="school-sizes" class="section level3 unnumbered hasAnchor">
<h3>School sizes<a href="processing.html#school-sizes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="processing.html#cb108-1"></a><span class="co"># Format ABUND</span></span>
<span id="cb108-2"><a href="processing.html#cb108-2"></a>abund &lt;-<span class="st"> </span></span>
<span id="cb108-3"><a href="processing.html#cb108-3"></a><span class="st">  </span>SIGHTS <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb108-4"><a href="processing.html#cb108-4"></a><span class="st">  </span>tidyr<span class="op">::</span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="dv">31</span><span class="op">:</span><span class="dv">101</span>,</span>
<span id="cb108-5"><a href="processing.html#cb108-5"></a>                      <span class="dt">names_to =</span> <span class="st">&#39;species&#39;</span>,</span>
<span id="cb108-6"><a href="processing.html#cb108-6"></a>                      <span class="dt">values_to =</span> <span class="st">&#39;best&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb108-7"><a href="processing.html#cb108-7"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Region =</span> <span class="kw">gsub</span>(<span class="st">&#39; &#39;</span>,<span class="st">&#39;&#39;</span>,Region)) <span class="op">%&gt;%</span></span>
<span id="cb108-8"><a href="processing.html#cb108-8"></a><span class="st">  </span><span class="kw">filter</span>(best <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>,</span>
<span id="cb108-9"><a href="processing.html#cb108-9"></a>         <span class="op">!</span><span class="st"> </span>Region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;NONE&#39;</span>, <span class="st">&#39;Off-Transect&#39;</span>),</span>
<span id="cb108-10"><a href="processing.html#cb108-10"></a>         EffortSeg <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb108-11"><a href="processing.html#cb108-11"></a><span class="st">  </span><span class="kw">select</span>(<span class="dt">Cruise =</span> CruzNo, TotSS, LnTotSS, species, best) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb108-12"><a href="processing.html#cb108-12"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Software=</span><span class="st">&#39;ABUND9&#39;</span>)</span>
<span id="cb108-13"><a href="processing.html#cb108-13"></a></span>
<span id="cb108-14"><a href="processing.html#cb108-14"></a><span class="kw">nrow</span>(abund)</span>
<span id="cb108-15"><a href="processing.html#cb108-15"></a>[<span class="dv">1</span>] <span class="dv">2478</span></span>
<span id="cb108-16"><a href="processing.html#cb108-16"></a></span>
<span id="cb108-17"><a href="processing.html#cb108-17"></a><span class="co"># Format LTabundR</span></span>
<span id="cb108-18"><a href="processing.html#cb108-18"></a>ltabundr &lt;-<span class="st"> </span></span>
<span id="cb108-19"><a href="processing.html#cb108-19"></a><span class="st">  </span>cruz<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>sightings <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb108-20"><a href="processing.html#cb108-20"></a><span class="st">  </span><span class="kw">filter</span>(OnEffort <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>, </span>
<span id="cb108-21"><a href="processing.html#cb108-21"></a>         included <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>, </span>
<span id="cb108-22"><a href="processing.html#cb108-22"></a>         EffType <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;S&#39;</span>, <span class="st">&#39;F&#39;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb108-23"><a href="processing.html#cb108-23"></a><span class="st">  </span><span class="kw">select</span>(Cruise, <span class="dt">TotSS =</span> ss_tot, <span class="dt">LnTotSS =</span> lnsstot, species, best) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb108-24"><a href="processing.html#cb108-24"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Software=</span><span class="st">&#39;LTabundR&#39;</span>)</span>
<span id="cb108-25"><a href="processing.html#cb108-25"></a></span>
<span id="cb108-26"><a href="processing.html#cb108-26"></a><span class="co"># Combine the datasets</span></span>
<span id="cb108-27"><a href="processing.html#cb108-27"></a>ss &lt;-<span class="st"> </span><span class="kw">rbind</span>(abund, ltabundr)</span>
<span id="cb108-28"><a href="processing.html#cb108-28"></a></span>
<span id="cb108-29"><a href="processing.html#cb108-29"></a><span class="co"># Plot the datasets</span></span>
<span id="cb108-30"><a href="processing.html#cb108-30"></a><span class="kw">ggplot</span>(ss,</span>
<span id="cb108-31"><a href="processing.html#cb108-31"></a>       <span class="kw">aes</span>(<span class="dt">x=</span>best, </span>
<span id="cb108-32"><a href="processing.html#cb108-32"></a>           <span class="dt">y=</span><span class="kw">factor</span>(Cruise), </span>
<span id="cb108-33"><a href="processing.html#cb108-33"></a>           <span class="dt">col=</span>Software, </span>
<span id="cb108-34"><a href="processing.html#cb108-34"></a>           <span class="dt">pch=</span>Software)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb108-35"><a href="processing.html#cb108-35"></a><span class="st">      </span><span class="kw">geom_point</span>(<span class="dt">position=</span>ggstance<span class="op">::</span><span class="kw">position_dodgev</span>(<span class="dt">height=</span><span class="fl">0.5</span>),</span>
<span id="cb108-36"><a href="processing.html#cb108-36"></a>                 <span class="dt">alpha=</span>.<span class="dv">6</span>) <span class="op">+</span></span>
<span id="cb108-37"><a href="processing.html#cb108-37"></a><span class="st">      </span><span class="kw">scale_x_continuous</span>(<span class="dt">trans=</span><span class="st">&#39;log&#39;</span>, <span class="dt">breaks=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>, <span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">25</span>,<span class="dv">50</span>,<span class="dv">100</span>,<span class="dv">500</span>,<span class="dv">1000</span>,<span class="dv">2500</span>,<span class="dv">5000</span>)) <span class="op">+</span></span>
<span id="cb108-38"><a href="processing.html#cb108-38"></a><span class="st">      </span><span class="kw">xlab</span>(<span class="st">&#39;log Estimated School Size&#39;</span>) <span class="op">+</span></span>
<span id="cb108-39"><a href="processing.html#cb108-39"></a><span class="st">      </span><span class="kw">ylab</span>(<span class="st">&#39;Cruise&#39;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb108-40"><a href="processing.html#cb108-40"></a><span class="st">  </span><span class="kw">theme_light</span>()</span></code></pre></div>
<p><img src="figures/unnamed-chunk-126-1.png" width="925.44" /></p>
</div>
<div id="effort" class="section level3 unnumbered hasAnchor">
<h3>Effort<a href="processing.html#effort" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="processing.html#cb109-1"></a><span class="co"># Format ABUND</span></span>
<span id="cb109-2"><a href="processing.html#cb109-2"></a>abund &lt;-<span class="st"> </span></span>
<span id="cb109-3"><a href="processing.html#cb109-3"></a><span class="st">  </span>EFFORT <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-4"><a href="processing.html#cb109-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Region =</span> <span class="kw">gsub</span>(<span class="st">&#39; &#39;</span>,<span class="st">&#39;&#39;</span>,Region)) <span class="op">%&gt;%</span></span>
<span id="cb109-5"><a href="processing.html#cb109-5"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">dt =</span> <span class="kw">paste0</span>(Yr,</span>
<span id="cb109-6"><a href="processing.html#cb109-6"></a>                     stringr<span class="op">::</span><span class="kw">str_pad</span>(Mo, <span class="dt">width=</span><span class="dv">2</span>, <span class="dt">pad=</span><span class="st">&#39;0&#39;</span>, <span class="dt">side=</span><span class="st">&#39;left&#39;</span>),</span>
<span id="cb109-7"><a href="processing.html#cb109-7"></a>                     stringr<span class="op">::</span><span class="kw">str_pad</span>(Da, <span class="dt">width=</span><span class="dv">2</span>, <span class="dt">pad=</span><span class="st">&#39;0&#39;</span>, <span class="dt">side=</span><span class="st">&#39;left&#39;</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-8"><a href="processing.html#cb109-8"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="st"> </span>Region <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;NONE&#39;</span>, <span class="st">&#39;Off-Transect&#39;</span>),</span>
<span id="cb109-9"><a href="processing.html#cb109-9"></a>         EffortSeg <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-10"><a href="processing.html#cb109-10"></a><span class="st">  </span><span class="kw">select</span>(<span class="dt">Cruise =</span> CruzNo, <span class="dt">Date =</span> dt, <span class="dt">km =</span> length) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-11"><a href="processing.html#cb109-11"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">software =</span> <span class="st">&#39;ABUND9&#39;</span>)</span>
<span id="cb109-12"><a href="processing.html#cb109-12"></a>  </span>
<span id="cb109-13"><a href="processing.html#cb109-13"></a><span class="co"># Format LTabundR</span></span>
<span id="cb109-14"><a href="processing.html#cb109-14"></a>ltabundr &lt;-<span class="st"> </span></span>
<span id="cb109-15"><a href="processing.html#cb109-15"></a><span class="st">  </span>cruz<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>segments <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-16"><a href="processing.html#cb109-16"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">dt =</span> <span class="kw">gsub</span>(<span class="st">&#39;-&#39;</span>,<span class="st">&#39;&#39;</span>,<span class="kw">substr</span>(DateTime1, <span class="dv">1</span>,<span class="dv">10</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-17"><a href="processing.html#cb109-17"></a><span class="st">  </span><span class="kw">filter</span>(OnEffort <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>, </span>
<span id="cb109-18"><a href="processing.html#cb109-18"></a>         use <span class="op">==</span><span class="st"> </span><span class="ot">TRUE</span>, </span>
<span id="cb109-19"><a href="processing.html#cb109-19"></a>         EffType <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;S&#39;</span>, <span class="st">&#39;F&#39;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-20"><a href="processing.html#cb109-20"></a><span class="st">  </span><span class="kw">select</span>(Cruise, <span class="dt">Date =</span> dt, <span class="dt">km =</span> dist) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-21"><a href="processing.html#cb109-21"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">software =</span> <span class="st">&#39;LTabundR&#39;</span>)</span>
<span id="cb109-22"><a href="processing.html#cb109-22"></a>  </span>
<span id="cb109-23"><a href="processing.html#cb109-23"></a><span class="co"># Join the datasets</span></span>
<span id="cb109-24"><a href="processing.html#cb109-24"></a>eff &lt;-<span class="st"> </span></span>
<span id="cb109-25"><a href="processing.html#cb109-25"></a><span class="st">  </span><span class="kw">rbind</span>(abund, ltabundr) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-26"><a href="processing.html#cb109-26"></a><span class="st">  </span><span class="kw">group_by</span>(Cruise) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-27"><a href="processing.html#cb109-27"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">km =</span> <span class="kw">round</span>(km)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb109-28"><a href="processing.html#cb109-28"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">km_abund =</span> <span class="kw">sum</span>(km[software <span class="op">==</span><span class="st"> &#39;ABUND9&#39;</span>]),</span>
<span id="cb109-29"><a href="processing.html#cb109-29"></a>            <span class="dt">km_ltabundr =</span> <span class="kw">sum</span>(km[software <span class="op">==</span><span class="st"> &#39;LTabundR&#39;</span>]))</span>
<span id="cb109-30"><a href="processing.html#cb109-30"></a></span>
<span id="cb109-31"><a href="processing.html#cb109-31"></a><span class="co"># Plot</span></span>
<span id="cb109-32"><a href="processing.html#cb109-32"></a>p &lt;-<span class="st"> </span></span>
<span id="cb109-33"><a href="processing.html#cb109-33"></a><span class="st">  </span><span class="kw">ggplot</span>(eff, <span class="kw">aes</span>(<span class="dt">x =</span> km_abund, <span class="dt">y =</span> km_ltabundr, <span class="dt">col=</span><span class="kw">factor</span>(Cruise))) <span class="op">+</span></span>
<span id="cb109-34"><a href="processing.html#cb109-34"></a><span class="st">  </span><span class="kw">geom_abline</span>(<span class="dt">slope=</span><span class="dv">1</span>, <span class="dt">intercept=</span><span class="dv">0</span>, <span class="dt">lty=</span><span class="dv">3</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb109-35"><a href="processing.html#cb109-35"></a><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha=</span>.<span class="dv">6</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb109-36"><a href="processing.html#cb109-36"></a><span class="st">  </span><span class="kw">ylab</span>(<span class="st">&#39;LTabundR&#39;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">xlab</span>(<span class="st">&#39;ABUND9&#39;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb109-37"><a href="processing.html#cb109-37"></a><span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">15000</span>, <span class="dt">by=</span><span class="dv">2500</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb109-38"><a href="processing.html#cb109-38"></a><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">15000</span>, <span class="dt">by=</span><span class="dv">2500</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb109-39"><a href="processing.html#cb109-39"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&#39;Systematic effort per cruise&#39;</span>, <span class="dt">col=</span><span class="st">&#39;Cruise&#39;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb109-40"><a href="processing.html#cb109-40"></a><span class="st">  </span><span class="kw">theme_light</span>()</span>
<span id="cb109-41"><a href="processing.html#cb109-41"></a></span>
<span id="cb109-42"><a href="processing.html#cb109-42"></a><span class="co"># Make it interactive</span></span>
<span id="cb109-43"><a href="processing.html#cb109-43"></a><span class="kw">ggplotly</span>(p)</span></code></pre></div>
<div id="htmlwidget-0c2c8a81b77190d2f2c5" style="width:925.44px;height:566.4px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-0c2c8a81b77190d2f2c5">{"x":{"data":[{"x":[-620.8,13058.8],"y":[-620.8,13058.8],"text":"intercept: 0<br />slope: 1","type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"dot"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2002],"y":[2101],"text":"km_abund:  2002<br />km_ltabundr:  2101<br />factor(Cruise): 901","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"901","legendgroup":"901","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[747],"y":[748],"text":"km_abund:   747<br />km_ltabundr:   748<br />factor(Cruise): 989","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(241,125,80,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(241,125,80,1)"}},"hoveron":"points","name":"989","legendgroup":"989","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3794],"y":[3800],"text":"km_abund:  3794<br />km_ltabundr:  3800<br />factor(Cruise): 990","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(232,133,38,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(232,133,38,1)"}},"hoveron":"points","name":"990","legendgroup":"990","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1135],"y":[1135],"text":"km_abund:  1135<br />km_ltabundr:  1135<br />factor(Cruise): 1001","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(222,140,0,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(222,140,0,1)"}},"hoveron":"points","name":"1001","legendgroup":"1001","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1122],"y":[1010],"text":"km_abund:  1122<br />km_ltabundr:  1010<br />factor(Cruise): 1004","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(211,146,0,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(211,146,0,1)"}},"hoveron":"points","name":"1004","legendgroup":"1004","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4366],"y":[4365],"text":"km_abund:  4366<br />km_ltabundr:  4365<br />factor(Cruise): 1080","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(198,153,0,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(198,153,0,1)"}},"hoveron":"points","name":"1080","legendgroup":"1080","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[50],"y":[41],"text":"km_abund:    50<br />km_ltabundr:    41<br />factor(Cruise): 1081","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(183,159,0,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(183,159,0,1)"}},"hoveron":"points","name":"1081","legendgroup":"1081","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2491],"y":[2423],"text":"km_abund:  2491<br />km_ltabundr:  2423<br />factor(Cruise): 1108","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(166,164,0,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(166,164,0,1)"}},"hoveron":"points","name":"1108","legendgroup":"1108","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[804],"y":[806],"text":"km_abund:   804<br />km_ltabundr:   806<br />factor(Cruise): 1164","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(147,170,0,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(147,170,0,1)"}},"hoveron":"points","name":"1164","legendgroup":"1164","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3432],"y":[3424],"text":"km_abund:  3432<br />km_ltabundr:  3424<br />factor(Cruise): 1165","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(124,174,0,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(124,174,0,1)"}},"hoveron":"points","name":"1165","legendgroup":"1165","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1491],"y":[1450],"text":"km_abund:  1491<br />km_ltabundr:  1450<br />factor(Cruise): 1203","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(94,179,0,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(94,179,0,1)"}},"hoveron":"points","name":"1203","legendgroup":"1203","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3751],"y":[3759],"text":"km_abund:  3751<br />km_ltabundr:  3759<br />factor(Cruise): 1268","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(43,182,0,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(43,182,0,1)"}},"hoveron":"points","name":"1268","legendgroup":"1268","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3811],"y":[3899],"text":"km_abund:  3811<br />km_ltabundr:  3899<br />factor(Cruise): 1303","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,186,56,1)"}},"hoveron":"points","name":"1303","legendgroup":"1303","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[921],"y":[925],"text":"km_abund:   921<br />km_ltabundr:   925<br />factor(Cruise): 1369","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,188,90,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,188,90,1)"}},"hoveron":"points","name":"1369","legendgroup":"1369","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[5424],"y":[5418],"text":"km_abund:  5424<br />km_ltabundr:  5418<br />factor(Cruise): 1370","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,116,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,116,1)"}},"hoveron":"points","name":"1370","legendgroup":"1370","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[11],"y":[11],"text":"km_abund:    11<br />km_ltabundr:    11<br />factor(Cruise): 1426","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,192,139,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,192,139,1)"}},"hoveron":"points","name":"1426","legendgroup":"1426","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3],"y":[0],"text":"km_abund:     3<br />km_ltabundr:     0<br />factor(Cruise): 1508","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,193,159,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,193,159,1)"}},"hoveron":"points","name":"1508","legendgroup":"1508","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1556],"y":[1542],"text":"km_abund:  1556<br />km_ltabundr:  1542<br />factor(Cruise): 1604","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,192,179,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,192,179,1)"}},"hoveron":"points","name":"1604","legendgroup":"1604","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[6670],"y":[6617],"text":"km_abund:  6670<br />km_ltabundr:  6617<br />factor(Cruise): 1607","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,196,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,196,1)"}},"hoveron":"points","name":"1607","legendgroup":"1607","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[3164],"y":[2316],"text":"km_abund:  3164<br />km_ltabundr:  2316<br />factor(Cruise): 1610","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,189,213,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,189,213,1)"}},"hoveron":"points","name":"1610","legendgroup":"1610","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4055],"y":[3539],"text":"km_abund:  4055<br />km_ltabundr:  3539<br />factor(Cruise): 1611","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,185,227,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,185,227,1)"}},"hoveron":"points","name":"1611","legendgroup":"1611","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[5883],"y":[4456],"text":"km_abund:  5883<br />km_ltabundr:  4456<br />factor(Cruise): 1614","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,180,240,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,180,240,1)"}},"hoveron":"points","name":"1614","legendgroup":"1614","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4959],"y":[4226],"text":"km_abund:  4959<br />km_ltabundr:  4226<br />factor(Cruise): 1616","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,173,250,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,173,250,1)"}},"hoveron":"points","name":"1616","legendgroup":"1616","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1],"y":[0],"text":"km_abund:     1<br />km_ltabundr:     0<br />factor(Cruise): 1617","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,165,255,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,165,255,1)"}},"hoveron":"points","name":"1617","legendgroup":"1617","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[12437],"y":[13456],"text":"km_abund: 12437<br />km_ltabundr: 13456<br />factor(Cruise): 1621","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(97,156,255,1)"}},"hoveron":"points","name":"1621","legendgroup":"1621","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4599],"y":[4809],"text":"km_abund:  4599<br />km_ltabundr:  4809<br />factor(Cruise): 1622","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(142,146,255,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(142,146,255,1)"}},"hoveron":"points","name":"1622","legendgroup":"1622","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4965],"y":[4103],"text":"km_abund:  4965<br />km_ltabundr:  4103<br />factor(Cruise): 1623","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(174,135,255,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(174,135,255,1)"}},"hoveron":"points","name":"1623","legendgroup":"1623","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[763],"y":[654],"text":"km_abund:   763<br />km_ltabundr:   654<br />factor(Cruise): 1624","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(199,124,255,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(199,124,255,1)"}},"hoveron":"points","name":"1624","legendgroup":"1624","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2],"y":[0],"text":"km_abund:     2<br />km_ltabundr:     0<br />factor(Cruise): 1628","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(219,114,251,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(219,114,251,1)"}},"hoveron":"points","name":"1628","legendgroup":"1628","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[11074],"y":[10900],"text":"km_abund: 11074<br />km_ltabundr: 10900<br />factor(Cruise): 1629","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(234,106,241,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(234,106,241,1)"}},"hoveron":"points","name":"1629","legendgroup":"1629","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4041],"y":[3553],"text":"km_abund:  4041<br />km_ltabundr:  3553<br />factor(Cruise): 1631","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(245,100,227,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(245,100,227,1)"}},"hoveron":"points","name":"1631","legendgroup":"1631","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[11719],"y":[12706],"text":"km_abund: 11719<br />km_ltabundr: 12706<br />factor(Cruise): 1641","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(252,97,212,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(252,97,212,1)"}},"hoveron":"points","name":"1641","legendgroup":"1641","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[6346],"y":[6725],"text":"km_abund:  6346<br />km_ltabundr:  6725<br />factor(Cruise): 1642","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(255,97,195,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(255,97,195,1)"}},"hoveron":"points","name":"1642","legendgroup":"1642","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[7341],"y":[7722],"text":"km_abund:  7341<br />km_ltabundr:  7722<br />factor(Cruise): 1705","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(255,100,176,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(255,100,176,1)"}},"hoveron":"points","name":"1705","legendgroup":"1705","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[8962],"y":[9647],"text":"km_abund:  8962<br />km_ltabundr:  9647<br />factor(Cruise): 1706","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(255,105,156,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(255,105,156,1)"}},"hoveron":"points","name":"1706","legendgroup":"1706","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[4414],"y":[4587],"text":"km_abund:  4414<br />km_ltabundr:  4587<br />factor(Cruise): 2001","type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(253,111,134,1)","opacity":0.6,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(253,111,134,1)"}},"hoveron":"points","name":"2001","legendgroup":"2001","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":45.4714031421717,"r":7.30593607305936,"b":41.8914944663726,"l":54.7945205479452},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Systematic effort per cruise","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-620.8,13058.8],"tickmode":"array","ticktext":["0","2500","5000","7500","10000","12500"],"tickvals":[0,2500,5000,7500,10000,12500],"categoryorder":"array","categoryarray":["0","2500","5000","7500","10000","12500"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"y","title":{"text":"ABUND9","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-672.8,14128.8],"tickmode":"array","ticktext":["0","2500","5000","7500","10000","12500"],"tickvals":[0,2500,5000,7500,10000,12500],"categoryorder":"array","categoryarray":["0","2500","5000","7500","10000","12500"],"nticks":null,"ticks":"outside","tickcolor":"rgba(179,179,179,1)","ticklen":3.65296803652968,"tickwidth":0.33208800332088,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(222,222,222,1)","gridwidth":0.33208800332088,"zeroline":false,"anchor":"x","title":{"text":"LTabundR","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(179,179,179,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"title":{"text":"Cruise","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"57fa7ff8321b":{"intercept":{},"slope":{},"type":"scatter"},"57fa7fa1cc3f":{"x":{},"y":{},"colour":{}}},"cur_data":"57fa7ff8321b","visdat":{"57fa7ff8321b":["function (y) ","x"],"57fa7fa1cc3f":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>

</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="das.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="maps.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/emk-noaa/emk-noaa.github.io03-processing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["vignette.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
