<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 4 Data processing | vignette</title>
  <meta name="description" content=" 4 Data processing | vignette" />
  <meta name="generator" content="bookdown 0.24.3 and GitBook 2.6.7" />

  <meta property="og:title" content=" 4 Data processing | vignette" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content=" 4 Data processing | vignette" />
  <meta name="github-repo" content="emk-noaa/emk-noaa.github.io" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 4 Data processing | vignette" />
  
  <meta name="twitter:description" content=" 4 Data processing | vignette" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="settings.html"/>
<link rel="next" href="maps.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">WinCruz analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Status</a></li>
<li class="part"><span><b>I Tutorial</b></span></li>
<li class="chapter" data-level="2" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>2</b> Install <code>LTabundR</code></a><ul>
<li class="chapter" data-level="" data-path="install.html"><a href="install.html#option-1-install-from-github"><i class="fa fa-check"></i>Option 1: Install from GitHub</a></li>
<li class="chapter" data-level="" data-path="install.html"><a href="install.html#option-2-install-locally"><i class="fa fa-check"></i>Option 2: Install locally</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="settings.html"><a href="settings.html"><i class="fa fa-check"></i><b>3</b> Settings</a><ul>
<li class="chapter" data-level="" data-path="settings.html"><a href="settings.html#survey-strata"><i class="fa fa-check"></i>Survey strata</a></li>
<li class="chapter" data-level="" data-path="settings.html"><a href="settings.html#study-area-polygon"><i class="fa fa-check"></i>Study area polygon</a></li>
<li class="chapter" data-level="" data-path="settings.html"><a href="settings.html#survey-wide-settings"><i class="fa fa-check"></i>Survey-wide settings</a></li>
<li class="chapter" data-level="" data-path="settings.html"><a href="settings.html#cohort-specific-settings"><i class="fa fa-check"></i>Cohort-specific settings</a></li>
<li class="chapter" data-level="" data-path="settings.html"><a href="settings.html#example-code"><i class="fa fa-check"></i>Example code</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="processing.html"><a href="processing.html"><i class="fa fa-check"></i><b>4</b> Data processing</a><ul>
<li class="chapter" data-level="" data-path="processing.html"><a href="processing.html#behind-the-scenes"><i class="fa fa-check"></i>Behind the scenes</a></li>
<li class="chapter" data-level="" data-path="processing.html"><a href="processing.html#review"><i class="fa fa-check"></i>Review</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>5</b> Maps</a><ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#base-maps"><i class="fa fa-check"></i>Base maps</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#add-strata"><i class="fa fa-check"></i>Add strata</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#add-survey-tracks"><i class="fa fa-check"></i>Add survey tracks</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#add-sightings"><i class="fa fa-check"></i>Add sightings</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="summarize.html"><a href="summarize.html"><i class="fa fa-check"></i><b>6</b> Summarize survey</a><ul>
<li class="chapter" data-level="" data-path="summarize.html"><a href="summarize.html#summariz-effort"><i class="fa fa-check"></i>Summariz effort</a></li>
<li class="chapter" data-level="" data-path="summarize.html"><a href="summarize.html#summarize-sightings"><i class="fa fa-check"></i>Summarize sightings</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="df.html"><a href="df.html"><i class="fa fa-check"></i><b>7</b> Detection functions</a><ul>
<li><a href="df.html#format-for-distance">Format for <code>Distance</code></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="abundance.html"><a href="abundance.html"><i class="fa fa-check"></i><b>8</b> Abundance estimation</a></li>
<li class="part"><span><b>II Case studies</b></span></li>
<li class="chapter" data-level="9" data-path="casestudies.html"><a href="casestudies.html"><i class="fa fa-check"></i><b>9</b> Central North Pacific</a></li>
<li class="chapter" data-level="10" data-path="practicalities.html"><a href="practicalities.html"><i class="fa fa-check"></i><b>10</b> Practicalities</a></li>
<li class="part"><span><b>III Appendix</b></span><ul>
<li class="chapter" data-level="" data-path="practicalities.html"><a href="practicalities.html#central-north-pacific"><i class="fa fa-check"></i>Central North Pacific</a></li>
<li class="chapter" data-level="" data-path="practicalities.html"><a href="practicalities.html#california-current"><i class="fa fa-check"></i>California Current</a></li>
<li class="chapter" data-level="" data-path="practicalities.html"><a href="practicalities.html#etp"><i class="fa fa-check"></i>ETP</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="segmentizing.html"><a href="segmentizing.html"><i class="fa fa-check"></i><b>11</b> Segmentizing</a><ul>
<li class="chapter" data-level="" data-path="segmentizing.html"><a href="segmentizing.html#approach"><i class="fa fa-check"></i>Approach</a></li>
<li class="chapter" data-level="" data-path="segmentizing.html"><a href="segmentizing.html#defaults-2"><i class="fa fa-check"></i>Defaults</a></li>
<li class="chapter" data-level="" data-path="segmentizing.html"><a href="segmentizing.html#day-vs-equal-length"><i class="fa fa-check"></i>Day vs Equal Length</a></li>
<li class="chapter" data-level="" data-path="segmentizing.html"><a href="segmentizing.html#contiguous-vs.-non-contiguous-effort"><i class="fa fa-check"></i>Contiguous vs. non-contiguous effort</a></li>
<li class="chapter" data-level="" data-path="segmentizing.html"><a href="segmentizing.html#segment-remainder-handling"><i class="fa fa-check"></i>Segment remainder handling</a></li>
<li class="chapter" data-level="" data-path="segmentizing.html"><a href="segmentizing.html#typical-settings"><i class="fa fa-check"></i>Typical settings</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="misc_functions.html"><a href="misc_functions.html"><i class="fa fa-check"></i><b>12</b> Miscellaneous functions</a></li>
<li class="chapter" data-level="13" data-path="backlog.html"><a href="backlog.html"><i class="fa fa-check"></i><b>13</b> Appendix: Backlog</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/emk-noaa/emk-noaa.github.io" target="blank">Eric & Amanda</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">vignette</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="processing" class="section level1">
<h1><span class="header-section-number"> 4</span> Data processing</h1>
<p>You can process your survey data using a single function, <strong><code>process_surveys()</code></strong>, which takes two arguments: the filepath(s) to your <code>DAS</code> survey data, and your <code>settings</code> object. For example:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="processing.html#cb1-1"></a><span class="kw">process_surveys</span>(<span class="dt">das_file =</span> <span class="st">&#39;data/surveys/HICEASwinter2020.das&#39;</span>,</span>
<span id="cb1-2"><a href="processing.html#cb1-2"></a>                <span class="dt">settings =</span> settings)</span></code></pre></div>
<p>That single command will convert your raw <code>DAS</code> data to a “<code>cruz</code>” object, a list of polished datasets that are prepared to be passed to subsequent analyses.</p>
<p>That function is a wrapper for several discrete stages of data formatting/processing. Behind the scenes, each of those stages is carried out using a specific <code>LTabundR</code> function. The remainder of this page is a detailed step-by-step explanation of the data processing that occurs when you call <code>process_surveys()</code>.</p>
<div id="behind-the-scenes" class="section level2 unnumbered">
<h2>Behind the scenes</h2>
<div id="bring-in-cruise-data" class="section level3 unnumbered">
<h3>Bring in cruise data</h3>
<p>Specify the path to your <code>.DAS</code> data file(s):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="processing.html#cb2-1"></a>das_file &lt;-<span class="st"> &#39;data/surveys/HICEASwinter2020.das&#39;</span></span></code></pre></div>
<p>Read in and process this <code>.DAS</code> file using the functions in Sam’s <code>swfscDAS</code> package. To do so quickly, we built a wrapper function that makes this quick and easy:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="processing.html#cb3-1"></a>das &lt;-<span class="st"> </span><span class="kw">load_das</span>(das_file, </span>
<span id="cb3-2"><a href="processing.html#cb3-2"></a>                <span class="dt">perform_checks =</span> <span class="ot">TRUE</span>,</span>
<span id="cb3-3"><a href="processing.html#cb3-3"></a>                <span class="dt">print_glimpse =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## Reading DAS file</code></pre>
<pre><code>## Processing DAS file</code></pre>
<pre><code>## Checking DAS file</code></pre>
<pre><code>## Cruise numbers: 
## 2001 &lt;NA&gt; 
##   48    0 
## Rows: 22,486
## Columns: 40
## $ Event     &lt;chr&gt; &quot;*&quot;, &quot;*&quot;, &quot;*&quot;, &quot;*&quot;, &quot;*&quot;, &quot;*&quot;, &quot;*&quot;, &quot;*&quot;, &quot;*&quot;, &quot;*&quot;, &quot;B&quot;, &quot;R&quot;, …
## $ DateTime  &lt;dttm&gt; 2020-01-19 07:11:52, 2020-01-19 07:13:52, 2020-01-19 07:15:…
## $ Lat       &lt;dbl&gt; 21.79983, 21.80517, 21.81050, 21.81583, 21.82133, 21.82667, …
## $ Lon       &lt;dbl&gt; -159.7652, -159.7657, -159.7662, -159.7668, -159.7673, -159.…
## $ OnEffort  &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALS…
## $ Cruise    &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2001, 2001, 2001, 20…
## $ Mode      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, …
## $ OffsetGMT &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, -10, -10, -10, -10, …
## $ EffType   &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;…
## $ ESWsides  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, 2, 2, 2, 2, 2…
## $ Course    &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 350,…
## $ SpdKt     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 9.9,…
## $ Bft       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 4, 4, 4,…
## $ SwellHght &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 6, 6, 6,…
## $ WindSpdKt &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 15, 15, …
## $ RainFog   &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ HorizSun  &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ VertSun   &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ Glare     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ Vis       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ ObsL      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;126&quot;, &quot;126&quot;…
## $ Rec       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;307&quot;, &quot;307&quot;…
## $ ObsR      &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;238&quot;, &quot;238&quot;…
## $ ObsInd    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ Data1     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;2001&quot;, &quot;F&quot;, &quot;126&quot;, …
## $ Data2     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;C&quot;, NA, &quot;307&quot;, &quot;06&quot;…
## $ Data3     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;-10&quot;, NA, &quot;238&quot;, &quot;1…
## $ Data4     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;N&quot;, NA, NA, NA, NA,…
## $ Data5     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, &quot;15.0&quot;, …
## $ Data6     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ Data7     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ Data8     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ Data9     &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ Data10    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ Data11    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ Data12    &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
## $ EffortDot &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALS…
## $ EventNum  &lt;chr&gt; &quot;001&quot;, &quot;002&quot;, &quot;003&quot;, &quot;004&quot;, &quot;005&quot;, &quot;006&quot;, &quot;007&quot;, &quot;008&quot;, &quot;009…
## $ file_das  &lt;chr&gt; &quot;HICEASwinter2020.das&quot;, &quot;HICEASwinter2020.das&quot;, &quot;HICEASwinte…
## $ line_num  &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 1…</code></pre>
</div>
<div id="process-strata" class="section level3 unnumbered">
<h3>Process strata</h3>
<p>Run the following function to add strata and study-area information to each row of <code>DAS</code> data:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="processing.html#cb8-1"></a>dass &lt;-<span class="st"> </span><span class="kw">process_strata</span>(das, settings)</span>
<span id="cb8-2"><a href="processing.html#cb8-2"></a><span class="co">## Testing whether each DAS line is in each stratum ...</span></span>
<span id="cb8-3"><a href="processing.html#cb8-3"></a><span class="co">## --- Stratum 1 of 3 :: HI_EEZ ...</span></span>
<span id="cb8-4"><a href="processing.html#cb8-4"></a><span class="co">## Spherical geometry (s2) switched off</span></span>
<span id="cb8-5"><a href="processing.html#cb8-5"></a><span class="co">## --- Stratum 2 of 3 :: WHICEAS ...</span></span>
<span id="cb8-6"><a href="processing.html#cb8-6"></a><span class="co">## --- Stratum 3 of 3 :: OtherCNP ...</span></span>
<span id="cb8-7"><a href="processing.html#cb8-7"></a><span class="co">## ---</span></span>
<span id="cb8-8"><a href="processing.html#cb8-8"></a><span class="co">## Testing whether each DAS line is in the study area ...</span></span></code></pre></div>
<p>This function loops through each stratum <code>data.frame</code> you have provided it in <code>settings$strata</code>, formats the stratum, and asks whether each DAS row occurs within it. For each stratum, a column named <code>stratum_&lt;StratumName&gt;</code> is added to the <code>das</code> object; each row in this column is <code>TRUE</code> (included) or <code>FALSE</code>.</p>
<p>A similar procedure is run if a dataframe is provided in <code>settings$study_area</code>. A column named <code>study_area</code> is added to <code>das</code> containing a boolean (<code>TRUE</code> if the sub-segment or sighting occurs within the study area).</p>
</div>
<div id="format-das-data-into-a-cruz-object" class="section level3 unnumbered">
<h3>Format <code>DAS</code> data into a <code>cruz</code> object</h3>
<p>The function <code>format_das()</code> takes care of some final formatting and initiates the <code>cruz</code> object data structure.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="processing.html#cb9-1"></a>cruz &lt;-<span class="st"> </span><span class="kw">format_das</span>(dass, <span class="dt">verbose=</span><span class="ot">TRUE</span>)</span>
<span id="cb9-2"><a href="processing.html#cb9-2"></a><span class="co">## --- removed 71 invalid Cruise numbers ....</span></span>
<span id="cb9-3"><a href="processing.html#cb9-3"></a><span class="co">## --- removed 0 invalid times ....</span></span>
<span id="cb9-4"><a href="processing.html#cb9-4"></a><span class="co">## --- removed 0 invalid locations ....</span></span>
<span id="cb9-5"><a href="processing.html#cb9-5"></a><span class="co">## --- calculating distances (may be slow)...</span></span>
<span id="cb9-6"><a href="processing.html#cb9-6"></a><span class="co">## --- finding ship name for each cruise number...</span></span>
<span id="cb9-7"><a href="processing.html#cb9-7"></a><span class="co">## --- preparing stratum assignments for each cohort ...</span></span>
<span id="cb9-8"><a href="processing.html#cb9-8"></a><span class="co">##      --- cohort &quot;default&quot; ...</span></span>
<span id="cb9-9"><a href="processing.html#cb9-9"></a><span class="co">##      --- cohort &quot;fkw_insular&quot; ...</span></span></code></pre></div>
<p>This function (1) remove rows with invalid Cruise numbers, times, or locations; (ii) calculate the distance, in km, between each row of data; (iii) adds a <code>ship</code> column to the dataset, with initials for the ship corresponding to each cruise; (iv) creates a new list, <code>cohorts</code>, which copies the cruise data for each cohort specified in your settings; and (v) adds a <code>stratum</code> column to the data in each cohort. That column specifies
a single stratum assignment for each row of <code>DAS</code> data in the event of overlapping strata, based upon the cohort setting <code>stratum_overlap_handling</code>.</p>
</div>
<div id="the-cruz-object" class="section level3 unnumbered">
<h3>The <code>cruz</code> object</h3>
<p>The function <code>format_das()</code> returns a list, which we have saved in an object named <code>cruz</code>, with several slots:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="processing.html#cb10-1"></a>cruz <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb10-2"><a href="processing.html#cb10-2"></a><span class="co">## [1] &quot;settings&quot;   &quot;strata&quot;     &quot;study_area&quot; &quot;cohorts&quot;</span></span></code></pre></div>
<p>The slots <code>strata</code> and <code>study_area</code> provide the area, in square km, of each polygon being used:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="processing.html#cb11-1"></a>cruz<span class="op">$</span>strata</span>
<span id="cb11-2"><a href="processing.html#cb11-2"></a><span class="co">##    stratum       area</span></span>
<span id="cb11-3"><a href="processing.html#cb11-3"></a><span class="co">## 1   HI_EEZ  2491447.3</span></span>
<span id="cb11-4"><a href="processing.html#cb11-4"></a><span class="co">## 2  WHICEAS   419789.2</span></span>
<span id="cb11-5"><a href="processing.html#cb11-5"></a><span class="co">## 3 OtherCNP 34232739.5</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="processing.html#cb12-1"></a>cruz<span class="op">$</span>study_area</span>
<span id="cb12-2"><a href="processing.html#cb12-2"></a><span class="co">## [1] 34232739</span></span></code></pre></div>
<p>The slot <code>cohorts</code> is itself a list with one slot for each cohort. The slots are named using the <code>id</code> cohort setting.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="processing.html#cb13-1"></a>cruz<span class="op">$</span>cohorts <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb13-2"><a href="processing.html#cb13-2"></a><span class="co">## [1] &quot;default&quot;     &quot;fkw_insular&quot;</span></span></code></pre></div>
<p>Each cohort slot has a copy of the <code>DAS</code> data with a new <code>stratum</code> column, with a stratum assignment tailored to its cohort-specific settings. For instance, the <code>default</code> cohort, whose <code>stratum_overlap_handling</code> is set to <code>"smallest"</code>, assigns the smallest stratum in the event of overlapping or nested strata:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="processing.html#cb14-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>default<span class="op">$</span>stratum <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">table</span>(<span class="dt">useNA=</span><span class="st">&#39;ifany&#39;</span>)</span>
<span id="cb14-2"><a href="processing.html#cb14-2"></a><span class="co">## .</span></span>
<span id="cb14-3"><a href="processing.html#cb14-3"></a><span class="co">##  HI_EEZ WHICEAS </span></span>
<span id="cb14-4"><a href="processing.html#cb14-4"></a><span class="co">##     142   22228</span></span></code></pre></div>
<p>The <code>fkw_insular</code> cohort, whose <code>stratum_overlap_handling</code> is set to <code>"each"</code> (i.e., effort is allowed to belong to multiple segments, if they overlap, and all analyses will be conducted for each stratum separately), has stratum assignments that look like this;</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="processing.html#cb15-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>fkw_insular<span class="op">$</span>stratum <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">table</span>(<span class="dt">useNA=</span><span class="st">&#39;ifany&#39;</span>)</span>
<span id="cb15-2"><a href="processing.html#cb15-2"></a><span class="co">## .</span></span>
<span id="cb15-3"><a href="processing.html#cb15-3"></a><span class="co">##         HI_EEZ&amp;OtherCNP HI_EEZ&amp;WHICEAS&amp;OtherCNP </span></span>
<span id="cb15-4"><a href="processing.html#cb15-4"></a><span class="co">##                     142                   22228</span></span></code></pre></div>
<p>When a row of <code>DAS</code> effort occurs in two overlapping strata, the stratum assignment for that row is a concatentation of the names of the strata it falls within, with names separated by “<code>&amp;</code>”.</p>
<p>This list, with these five primary slots, will be referred to as a <code>cruz</code> object.</p>
</div>
<div id="segmentize-the-data" class="section level3 unnumbered">
<h3>Segmentize the data</h3>
<p>To allocate survey data into discrete ‘effort segments’, which are used in variance estimation in subsequent steps, run the function <code>segmentize()</code>. This process is controlled by both survey-wide and cohort-specific <span id="settings">settings</span>, which are now carried in a slot within the <code>cruz</code> object. The process is outlined in detail in the <a href="segmentizing.html#segmentizing">Appendix on Segmentizing</a>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="processing.html#cb16-1"></a>cruz &lt;-<span class="st"> </span><span class="kw">segmentize</span>(cruz, <span class="dt">verbose=</span><span class="ot">TRUE</span>)</span>
<span id="cb16-2"><a href="processing.html#cb16-2"></a><span class="co">## Segmentizing data for cohort &quot;default&quot; . . .</span></span>
<span id="cb16-3"><a href="processing.html#cb16-3"></a><span class="co">## --- preparing `density` dataset ...</span></span>
<span id="cb16-4"><a href="processing.html#cb16-4"></a><span class="co">## --- --- segmentizing effort bloc 1 of 5 . . .</span></span>
<span id="cb16-5"><a href="processing.html#cb16-5"></a><span class="co">## --- --- segmentizing effort bloc 2 of 5 . . .</span></span>
<span id="cb16-6"><a href="processing.html#cb16-6"></a><span class="co">## --- --- segmentizing effort bloc 3 of 5 . . .</span></span>
<span id="cb16-7"><a href="processing.html#cb16-7"></a><span class="co">## --- --- segmentizing effort bloc 4 of 5 . . .</span></span>
<span id="cb16-8"><a href="processing.html#cb16-8"></a><span class="co">## --- --- segmentizing effort bloc 5 of 5 . . .</span></span>
<span id="cb16-9"><a href="processing.html#cb16-9"></a><span class="co">## --- --- calculating details for each segment ...</span></span>
<span id="cb16-10"><a href="processing.html#cb16-10"></a><span class="co">## ---</span></span>
<span id="cb16-11"><a href="processing.html#cb16-11"></a><span class="co">## Segmentizing data for cohort &quot;fkw_insular&quot; . . .</span></span>
<span id="cb16-12"><a href="processing.html#cb16-12"></a><span class="co">## --- preparing `density` dataset ...</span></span>
<span id="cb16-13"><a href="processing.html#cb16-13"></a><span class="co">## --- --- segmentizing effort bloc 1 of 5 . . .</span></span>
<span id="cb16-14"><a href="processing.html#cb16-14"></a><span class="co">## --- --- segmentizing effort bloc 2 of 5 . . .</span></span>
<span id="cb16-15"><a href="processing.html#cb16-15"></a><span class="co">## --- --- segmentizing effort bloc 3 of 5 . . .</span></span>
<span id="cb16-16"><a href="processing.html#cb16-16"></a><span class="co">## --- --- segmentizing effort bloc 4 of 5 . . .</span></span>
<span id="cb16-17"><a href="processing.html#cb16-17"></a><span class="co">## --- --- segmentizing effort bloc 5 of 5 . . .</span></span>
<span id="cb16-18"><a href="processing.html#cb16-18"></a><span class="co">## --- --- calculating details for each segment ...</span></span>
<span id="cb16-19"><a href="processing.html#cb16-19"></a><span class="co">## --- preparing `distance` dataset ...</span></span>
<span id="cb16-20"><a href="processing.html#cb16-20"></a><span class="co">## --- --- segmentizing effort bloc 1 of 7 . . .</span></span>
<span id="cb16-21"><a href="processing.html#cb16-21"></a><span class="co">## --- --- segmentizing effort bloc 2 of 7 . . .</span></span>
<span id="cb16-22"><a href="processing.html#cb16-22"></a><span class="co">## --- --- segmentizing effort bloc 3 of 7 . . .</span></span>
<span id="cb16-23"><a href="processing.html#cb16-23"></a><span class="co">## --- --- segmentizing effort bloc 4 of 7 . . .</span></span>
<span id="cb16-24"><a href="processing.html#cb16-24"></a><span class="co">## --- --- segmentizing effort bloc 5 of 7 . . .</span></span>
<span id="cb16-25"><a href="processing.html#cb16-25"></a><span class="co">## --- --- segmentizing effort bloc 6 of 7 . . .</span></span>
<span id="cb16-26"><a href="processing.html#cb16-26"></a><span class="co">## --- --- segmentizing effort bloc 7 of 7 . . .</span></span>
<span id="cb16-27"><a href="processing.html#cb16-27"></a><span class="co">## --- --- calculating details for each segment ...</span></span>
<span id="cb16-28"><a href="processing.html#cb16-28"></a><span class="co">## ---</span></span></code></pre></div>
<p>This function does not change the high-level structure of the <code>cruz</code> object …</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="processing.html#cb17-1"></a>cruz <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb17-2"><a href="processing.html#cb17-2"></a><span class="co">## [1] &quot;settings&quot;   &quot;strata&quot;     &quot;study_area&quot; &quot;cohorts&quot;</span></span></code></pre></div>
<p>… or the cohort names in the <code>cohorts</code> slot …</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="processing.html#cb18-1"></a>cruz<span class="op">$</span>cohorts <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb18-2"><a href="processing.html#cb18-2"></a><span class="co">## [1] &quot;default&quot;     &quot;fkw_insular&quot;</span></span></code></pre></div>
<p>But it <em>does</em> change the structure of data within each cohort. Each cohort will now have a slot named <code>density</code> …</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="processing.html#cb19-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>default <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb19-2"><a href="processing.html#cb19-2"></a><span class="co">## [1] &quot;density&quot;</span></span></code></pre></div>
<p>And, if your settings specify that settings for density estimation differ from detection function estimation, a cohort will have a second slot named <code>distance</code>. This is the case for the second cohort in our example analysis: <code>fkw_insular</code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="processing.html#cb20-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>fkw_insular <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb20-2"><a href="processing.html#cb20-2"></a><span class="co">## [1] &quot;density&quot;  &quot;distance&quot;</span></span></code></pre></div>
<p>Though their data segmentization will differ, the <code>density</code> and <code>distance</code> slots have identical structures:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="processing.html#cb21-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>fkw_insular<span class="op">$</span>density <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb21-2"><a href="processing.html#cb21-2"></a><span class="co">## [1] &quot;segments&quot; &quot;das&quot;</span></span>
<span id="cb21-3"><a href="processing.html#cb21-3"></a></span>
<span id="cb21-4"><a href="processing.html#cb21-4"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>fkw_insular<span class="op">$</span>distance <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb21-5"><a href="processing.html#cb21-5"></a><span class="co">## [1] &quot;segments&quot; &quot;das&quot;</span></span></code></pre></div>
<p>The <code>segments</code> slot contains summary data for each effort segment, including start/mid/end coordinates, average conditions, and segment distance:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="processing.html#cb22-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>default<span class="op">$</span>density<span class="op">$</span>segments <span class="op">%&gt;%</span><span class="st"> </span>glimpse</span>
<span id="cb22-2"><a href="processing.html#cb22-2"></a><span class="co">## Rows: 278</span></span>
<span id="cb22-3"><a href="processing.html#cb22-3"></a><span class="co">## Columns: 37</span></span>
<span id="cb22-4"><a href="processing.html#cb22-4"></a><span class="co">## $ Cruise       &lt;dbl&gt; 2001, 2001, 2001, 2001, 2001, 2001, 2001, 2001, 2001, 200…</span></span>
<span id="cb22-5"><a href="processing.html#cb22-5"></a><span class="co">## $ ship         &lt;chr&gt; &quot;OES&quot;, &quot;OES&quot;, &quot;OES&quot;, &quot;OES&quot;, &quot;OES&quot;, &quot;OES&quot;, &quot;OES&quot;, &quot;OES&quot;, &quot;…</span></span>
<span id="cb22-6"><a href="processing.html#cb22-6"></a><span class="co">## $ stratum      &lt;chr&gt; &quot;HI_EEZ&quot;, &quot;HI_EEZ&quot;, &quot;HI_EEZ&quot;, &quot;HI_EEZ&quot;, &quot;HI_EEZ&quot;, &quot;WHICEA…</span></span>
<span id="cb22-7"><a href="processing.html#cb22-7"></a><span class="co">## $ study_area   &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRU…</span></span>
<span id="cb22-8"><a href="processing.html#cb22-8"></a><span class="co">## $ seg_id       &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17…</span></span>
<span id="cb22-9"><a href="processing.html#cb22-9"></a><span class="co">## $ yday         &lt;dbl&gt; 21, 22, 39, 68, 22, 19, 19, 19, 20, 20, 21, 22, 23, 23, 2…</span></span>
<span id="cb22-10"><a href="processing.html#cb22-10"></a><span class="co">## $ dist         &lt;dbl&gt; 3.2237470, 0.6118778, 29.7257476, 19.8973176, 1.2231556, …</span></span>
<span id="cb22-11"><a href="processing.html#cb22-11"></a><span class="co">## $ lat1         &lt;dbl&gt; 22.33300, 22.68750, 20.79283, 21.65833, 22.68750, 21.8520…</span></span>
<span id="cb22-12"><a href="processing.html#cb22-12"></a><span class="co">## $ lon1         &lt;dbl&gt; -161.2520, -161.1208, -153.6117, -161.7810, -161.1208, -1…</span></span>
<span id="cb22-13"><a href="processing.html#cb22-13"></a><span class="co">## $ DateTime1    &lt;dttm&gt; 2020-01-21 07:28:48, 2020-01-22 07:42:01, 2020-02-08 06:…</span></span>
<span id="cb22-14"><a href="processing.html#cb22-14"></a><span class="co">## $ timestamp1   &lt;dbl&gt; 1579591728, 1579678921, 1581144814, 1583688255, 157967892…</span></span>
<span id="cb22-15"><a href="processing.html#cb22-15"></a><span class="co">## $ lat2         &lt;dbl&gt; 22.68750, 20.79217, 21.65683, 21.66717, 22.68617, 22.1771…</span></span>
<span id="cb22-16"><a href="processing.html#cb22-16"></a><span class="co">## $ lon2         &lt;dbl&gt; -161.1208, -153.6090, -161.7753, -161.9295, -161.1158, -1…</span></span>
<span id="cb22-17"><a href="processing.html#cb22-17"></a><span class="co">## $ DateTime2    &lt;dttm&gt; 2020-01-22 07:42:01, 2020-02-08 06:51:34, 2020-03-08 17:…</span></span>
<span id="cb22-18"><a href="processing.html#cb22-18"></a><span class="co">## $ timestamp2   &lt;dbl&gt; 1579678921, 1581144694, 1583688135, 1583692815, 157967903…</span></span>
<span id="cb22-19"><a href="processing.html#cb22-19"></a><span class="co">## $ mlat         &lt;dbl&gt; 22.69117, 20.79133, 21.62583, 21.68417, 22.68750, 22.2345…</span></span>
<span id="cb22-20"><a href="processing.html#cb22-20"></a><span class="co">## $ mlon         &lt;dbl&gt; -161.1353, -153.6063, -161.6553, -161.8822, -161.1208, -1…</span></span>
<span id="cb22-21"><a href="processing.html#cb22-21"></a><span class="co">## $ mDateTime    &lt;dttm&gt; 2020-01-22 07:31:52, 2020-02-08 06:49:34, 2020-03-08 16:…</span></span>
<span id="cb22-22"><a href="processing.html#cb22-22"></a><span class="co">## $ mtimestamp   &lt;dbl&gt; 1579591728, 1579678921, 1581144814, 1583688255, 157967892…</span></span>
<span id="cb22-23"><a href="processing.html#cb22-23"></a><span class="co">## $ use          &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, TRUE, FALSE, FALSE, FALSE, FA…</span></span>
<span id="cb22-24"><a href="processing.html#cb22-24"></a><span class="co">## $ Mode         &lt;chr&gt; NA, &quot;P&quot;, NA, &quot;C&quot;, &quot;P&quot;, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, NA, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, …</span></span>
<span id="cb22-25"><a href="processing.html#cb22-25"></a><span class="co">## $ EffType      &lt;chr&gt; NA, &quot;S&quot;, NA, &quot;S&quot;, &quot;S&quot;, NA, &quot;N&quot;, &quot;F&quot;, NA, &quot;S&quot;, &quot;F&quot;, &quot;S&quot;, &quot;…</span></span>
<span id="cb22-26"><a href="processing.html#cb22-26"></a><span class="co">## $ ESWsides     &lt;dbl&gt; NA, 2, NA, 2, 2, NA, 2, 2, NA, 2, 2, 2, 2, 2, NA, 2, 2, 2…</span></span>
<span id="cb22-27"><a href="processing.html#cb22-27"></a><span class="co">## $ year         &lt;dbl&gt; 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 202…</span></span>
<span id="cb22-28"><a href="processing.html#cb22-28"></a><span class="co">## $ month        &lt;dbl&gt; 1, 1, 2, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …</span></span>
<span id="cb22-29"><a href="processing.html#cb22-29"></a><span class="co">## $ day          &lt;int&gt; 21, 22, 8, 8, 22, 19, 19, 19, 20, 20, 21, 22, 23, 23, 24,…</span></span>
<span id="cb22-30"><a href="processing.html#cb22-30"></a><span class="co">## $ min_line     &lt;int&gt; 1080, 1549, 9811, 20825, 1550, 11, 240, 601, 701, 963, 14…</span></span>
<span id="cb22-31"><a href="processing.html#cb22-31"></a><span class="co">## $ max_line     &lt;int&gt; 1548, 9810, 20824, 20886, 1554, 239, 499, 700, 962, 1486,…</span></span>
<span id="cb22-32"><a href="processing.html#cb22-32"></a><span class="co">## $ n_rows       &lt;int&gt; 14, 3, 58, 62, 5, 103, 120, 99, 111, 164, 117, 89, 90, 59…</span></span>
<span id="cb22-33"><a href="processing.html#cb22-33"></a><span class="co">## $ avgBft       &lt;dbl&gt; NaN, NaN, 7.000000, 6.418047, 2.000000, 5.150894, 4.84389…</span></span>
<span id="cb22-34"><a href="processing.html#cb22-34"></a><span class="co">## $ avgSwellHght &lt;dbl&gt; NaN, NaN, 7.000000, 7.000000, 4.000000, 7.433929, 7.20666…</span></span>
<span id="cb22-35"><a href="processing.html#cb22-35"></a><span class="co">## $ avgHorizSun  &lt;dbl&gt; NaN, NaN, 10.958794, 11.000000, NaN, 6.954993, 6.314060, …</span></span>
<span id="cb22-36"><a href="processing.html#cb22-36"></a><span class="co">## $ avgVertSun   &lt;dbl&gt; NaN, NaN, 1.058675, 2.418106, NaN, 1.419236, 1.178142, 2.…</span></span>
<span id="cb22-37"><a href="processing.html#cb22-37"></a><span class="co">## $ avgGlare     &lt;dbl&gt; NaN, NaN, 0.05867486, 1.00000000, NaN, 0.00000000, 0.4734…</span></span>
<span id="cb22-38"><a href="processing.html#cb22-38"></a><span class="co">## $ avgVis       &lt;dbl&gt; 4.000000, NaN, 5.000000, 4.709023, 6.200000, 5.641518, 6.…</span></span>
<span id="cb22-39"><a href="processing.html#cb22-39"></a><span class="co">## $ avgCourse    &lt;dbl&gt; NaN, NaN, 287.23315, 269.55972, 105.00000, 247.16155, 166…</span></span>
<span id="cb22-40"><a href="processing.html#cb22-40"></a><span class="co">## $ avgSpdKt     &lt;dbl&gt; NaN, NaN, 9.968032, 9.315076, 9.000000, 8.964329, 8.18859…</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="processing.html#cb23-1"></a><span class="co"># Number of segments</span></span>
<span id="cb23-2"><a href="processing.html#cb23-2"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>default<span class="op">$</span>density<span class="op">$</span>segments <span class="op">%&gt;%</span><span class="st"> </span>nrow</span>
<span id="cb23-3"><a href="processing.html#cb23-3"></a><span class="co">## [1] 278</span></span>
<span id="cb23-4"><a href="processing.html#cb23-4"></a></span>
<span id="cb23-5"><a href="processing.html#cb23-5"></a><span class="co"># Segment length distribution</span></span>
<span id="cb23-6"><a href="processing.html#cb23-6"></a><span class="kw">hist</span>(cruz<span class="op">$</span>cohorts<span class="op">$</span>default<span class="op">$</span>density<span class="op">$</span>segments<span class="op">$</span>dist,</span>
<span id="cb23-7"><a href="processing.html#cb23-7"></a>     <span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">60</span>,<span class="dt">by=</span><span class="dv">1</span>),</span>
<span id="cb23-8"><a href="processing.html#cb23-8"></a>     <span class="dt">xlab=</span><span class="st">&#39;Segment lengths (km)&#39;</span>,</span>
<span id="cb23-9"><a href="processing.html#cb23-9"></a>     <span class="dt">main=</span><span class="kw">paste0</span>(<span class="st">&#39;Target km: &#39;</span>,settings<span class="op">$</span>survey<span class="op">$</span>segment_target_km))</span></code></pre></div>
<p><img src="vignette_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>And the <code>das</code> slot holds the original <code>data.frame</code> of <code>DAS</code> data, modified slightly: the column <code>OnEffort</code> has been modified according to Beaufort range conditions, and the column <code>seg_id</code> indicates which segment the event occurs within</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="processing.html#cb24-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>default<span class="op">$</span>density<span class="op">$</span>das <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb24-2"><a href="processing.html#cb24-2"></a><span class="co">##  [1] &quot;Event&quot;            &quot;DateTime&quot;         &quot;Lat&quot;              &quot;Lon&quot;             </span></span>
<span id="cb24-3"><a href="processing.html#cb24-3"></a><span class="co">##  [5] &quot;OnEffort&quot;         &quot;Cruise&quot;           &quot;Mode&quot;             &quot;OffsetGMT&quot;       </span></span>
<span id="cb24-4"><a href="processing.html#cb24-4"></a><span class="co">##  [9] &quot;EffType&quot;          &quot;ESWsides&quot;         &quot;Course&quot;           &quot;SpdKt&quot;           </span></span>
<span id="cb24-5"><a href="processing.html#cb24-5"></a><span class="co">## [13] &quot;Bft&quot;              &quot;SwellHght&quot;        &quot;WindSpdKt&quot;        &quot;RainFog&quot;         </span></span>
<span id="cb24-6"><a href="processing.html#cb24-6"></a><span class="co">## [17] &quot;HorizSun&quot;         &quot;VertSun&quot;          &quot;Glare&quot;            &quot;Vis&quot;             </span></span>
<span id="cb24-7"><a href="processing.html#cb24-7"></a><span class="co">## [21] &quot;ObsL&quot;             &quot;Rec&quot;              &quot;ObsR&quot;             &quot;ObsInd&quot;          </span></span>
<span id="cb24-8"><a href="processing.html#cb24-8"></a><span class="co">## [25] &quot;Data1&quot;            &quot;Data2&quot;            &quot;Data3&quot;            &quot;Data4&quot;           </span></span>
<span id="cb24-9"><a href="processing.html#cb24-9"></a><span class="co">## [29] &quot;Data5&quot;            &quot;Data6&quot;            &quot;Data7&quot;            &quot;Data8&quot;           </span></span>
<span id="cb24-10"><a href="processing.html#cb24-10"></a><span class="co">## [33] &quot;Data9&quot;            &quot;Data10&quot;           &quot;Data11&quot;           &quot;Data12&quot;          </span></span>
<span id="cb24-11"><a href="processing.html#cb24-11"></a><span class="co">## [37] &quot;EffortDot&quot;        &quot;EventNum&quot;         &quot;file_das&quot;         &quot;line_num&quot;        </span></span>
<span id="cb24-12"><a href="processing.html#cb24-12"></a><span class="co">## [41] &quot;stratum_HI_EEZ&quot;   &quot;stratum_WHICEAS&quot;  &quot;stratum_OtherCNP&quot; &quot;study_area&quot;      </span></span>
<span id="cb24-13"><a href="processing.html#cb24-13"></a><span class="co">## [45] &quot;year&quot;             &quot;month&quot;            &quot;day&quot;              &quot;yday&quot;            </span></span>
<span id="cb24-14"><a href="processing.html#cb24-14"></a><span class="co">## [49] &quot;km_int&quot;           &quot;km_cum&quot;           &quot;ship&quot;             &quot;stratum&quot;         </span></span>
<span id="cb24-15"><a href="processing.html#cb24-15"></a><span class="co">## [53] &quot;seg_id&quot;           &quot;use&quot;</span></span></code></pre></div>
<p>The <code>segmentize()</code> function and its associated settings were designed to give researchers full control over how data are segmented, be it for design-based density analysis (which tend to use long segments of 100 km or more and allow for non-contiguous effort to be included in the same segment) or for habitat modeling (which tend to use short segments of 5 - 10 km and disallow non-contiguous effort to be pooled into the same segment). To demonstrate that versatility, checkout the <a href="segmentizing.html#segmentizing">appendix on segmentizing</a>.</p>
</div>
<div id="process-sightings" class="section level3 unnumbered">
<h3>Process sightings</h3>
<p>To process sightings for each cohort of species, use the function <code>process_sightings()</code>. This function has three basic steps: for each cohort, the function (1) prepares a sightings table using the function <code>das_sight()</code> from <code>swfscDAS</code>; (2) filters those sightings to species codes specified for the cohort in your <code>settings</code> input; and (3) evaluates each of those sightings, asking if each should be included in the analysis according to your <code>settings</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="processing.html#cb25-1"></a>cruz &lt;-<span class="st"> </span><span class="kw">process_sightings</span>(cruz)</span>
<span id="cb25-2"><a href="processing.html#cb25-2"></a><span class="co">## Cohort &quot;default&quot;: analysis: &quot;density&quot;: processing sightings ...</span></span>
<span id="cb25-3"><a href="processing.html#cb25-3"></a><span class="co">## --- filtering to sightings with species of interest ...</span></span>
<span id="cb25-4"><a href="processing.html#cb25-4"></a><span class="co">## --- SightNo = 20200119_1, SpCode1 (line = 28, i= 1) | Excluded:  Beyond truncation km (5.5) = 6.9 km.</span></span>
<span id="cb25-5"><a href="processing.html#cb25-5"></a><span class="co">## --- SightNo = 20200119_18, SpCode1 (line = 370, i= 18) | Excluded:  Beyond truncation km (5.5) = 7.2 km.</span></span>
<span id="cb25-6"><a href="processing.html#cb25-6"></a><span class="co">## --- SightNo = 20200119_19, SpCode1 (line = 377, i= 19) | Excluded:  Beyond truncation km (5.5) = 7.8 km.</span></span>
<span id="cb25-7"><a href="processing.html#cb25-7"></a><span class="co">## --- progress: 5% complete ...</span></span>
<span id="cb25-8"><a href="processing.html#cb25-8"></a><span class="co">## --- SightNo = 20200119_25, SpCode1 (line = 532, i= 25) | Excluded:  Beyond truncation km (5.5) = 5.9 km.</span></span>
<span id="cb25-9"><a href="processing.html#cb25-9"></a><span class="co">## --- SightNo = 20200119_32, SpCode1 (line = 578, i= 32) | Excluded:  Beyond truncation km (5.5) = 6.4 km.</span></span>
<span id="cb25-10"><a href="processing.html#cb25-10"></a><span class="co">## --- SightNo = 20200119_33, SpCode1 (line = 588, i= 33) | Excluded:  Beyond truncation km (5.5) = 7.2 km.</span></span>
<span id="cb25-11"><a href="processing.html#cb25-11"></a><span class="co">## --- SightNo = 20200120_4, SpCode1 (line = 800, i= 37) | Excluded:  Beyond truncation km (5.5) = 5.6 km.</span></span>
<span id="cb25-12"><a href="processing.html#cb25-12"></a><span class="co">## --- SightNo = 20200120_5, SpCode1 (line = 811, i= 38) | Excluded:  Beyond truncation km (5.5) = 8.5 km.</span></span>
<span id="cb25-13"><a href="processing.html#cb25-13"></a><span class="co">## --- progress: 10% complete ...</span></span>
<span id="cb25-14"><a href="processing.html#cb25-14"></a><span class="co">## --- SightNo = 20200120_6, SpCode1 (line = 816, i= 39) | Excluded:  Beyond truncation km (5.5) = 7.6 km.</span></span>
<span id="cb25-15"><a href="processing.html#cb25-15"></a><span class="co">## --- SightNo = 20200120_7, SpCode1 (line = 828, i= 40) | Excluded:  Beyond truncation km (5.5) = 7.1 km.</span></span>
<span id="cb25-16"><a href="processing.html#cb25-16"></a><span class="co">## --- SightNo = 20200120_8, SpCode1 (line = 834, i= 41) | Excluded:  Beyond truncation km (5.5) = 8.3 km.</span></span>
<span id="cb25-17"><a href="processing.html#cb25-17"></a><span class="co">## --- SightNo = 20200120_10, SpCode1 (line = 854, i= 43) | Excluded:  Beyond truncation km (5.5) = 8 km.</span></span>
<span id="cb25-18"><a href="processing.html#cb25-18"></a><span class="co">## --- SightNo = 20200121_3, SpCode1 (line = 1379, i= 49) | Excluded:  Beyond truncation km (5.5) = 5.6 km.</span></span>
<span id="cb25-19"><a href="processing.html#cb25-19"></a><span class="co">## --- SightNo = 20200122_1, SpCode1 (line = 1556, i= 54) | Excluded:  Beyond truncation km (5.5) = 6.8 km.</span></span>
<span id="cb25-20"><a href="processing.html#cb25-20"></a><span class="co">## --- SightNo = 20200122_2, SpCode1 (line = 1560, i= 55) | Excluded:  Beyond truncation km (5.5) = 8.5 km.</span></span>
<span id="cb25-21"><a href="processing.html#cb25-21"></a><span class="co">## --- progress: 15% complete ...</span></span>
<span id="cb25-22"><a href="processing.html#cb25-22"></a><span class="co">## --- SightNo = 20200122_12, SpCode1 (line = 1606, i= 65) | Excluded:  Beyond truncation km (5.5) = 6.2 km.</span></span>
<span id="cb25-23"><a href="processing.html#cb25-23"></a><span class="co">## --- SightNo = 20200122_20, SpCode1 (line = 1648, i= 73) | Excluded:  Beyond truncation km (5.5) = 6.8 km.</span></span>
<span id="cb25-24"><a href="processing.html#cb25-24"></a><span class="co">## --- SightNo = 20200122_21, SpCode1 (line = 1651, i= 74) | Excluded:  Beyond truncation km (5.5) = 6 km.</span></span>
<span id="cb25-25"><a href="processing.html#cb25-25"></a><span class="co">## --- progress: 20% complete ...</span></span>
<span id="cb25-26"><a href="processing.html#cb25-26"></a><span class="co">## --- SightNo = 20200122_26, SpCode1 (line = 1685, i= 79) | Excluded:  Beyond truncation km (5.5) = 7.4 km.</span></span>
<span id="cb25-27"><a href="processing.html#cb25-27"></a><span class="co">## --- SightNo = 20200122_34, SpCode1 (line = 1791, i= 87) | Excluded:  Beyond truncation km (5.5) = 7.5 km.</span></span>
<span id="cb25-28"><a href="processing.html#cb25-28"></a><span class="co">## --- SightNo = 20200122_40, SpCode1 (line = 2035, i= 93) | Excluded:  Beyond truncation km (5.5) = 7.9 km.</span></span>
<span id="cb25-29"><a href="processing.html#cb25-29"></a><span class="co">## --- progress: 25% complete ...</span></span>
<span id="cb25-30"><a href="processing.html#cb25-30"></a><span class="co">## --- SightNo = 20200124_15, SpCode1 (line = 2957, i= 109) | Excluded:  Beyond truncation km (5.5) = 8.1 km.</span></span>
<span id="cb25-31"><a href="processing.html#cb25-31"></a><span class="co">## --- progress: 30% complete ...</span></span>
<span id="cb25-32"><a href="processing.html#cb25-32"></a><span class="co">## --- SightNo = 20200125_1, SpCode1 (line = 3160, i= 120) | Excluded:  Beyond truncation km (5.5) = 6 km.</span></span>
<span id="cb25-33"><a href="processing.html#cb25-33"></a><span class="co">## --- SightNo = 20200127_1, SpCode1 (line = 4331, i= 123) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-34"><a href="processing.html#cb25-34"></a><span class="co">## --- SightNo = 20200127_2, SpCode1 (line = 4343, i= 124) | Excluded:  Beyond truncation km (5.5) = 6.6 km.</span></span>
<span id="cb25-35"><a href="processing.html#cb25-35"></a><span class="co">## --- progress: 35% complete ...</span></span>
<span id="cb25-36"><a href="processing.html#cb25-36"></a><span class="co">## --- SightNo = 20200128_4, SpCode1 (line = 4724, i= 144) | Excluded:  Beyond truncation km (5.5) = 6.9 km.</span></span>
<span id="cb25-37"><a href="processing.html#cb25-37"></a><span class="co">## --- progress: 40% complete ...</span></span>
<span id="cb25-38"><a href="processing.html#cb25-38"></a><span class="co">## --- SightNo = 20200129_16, SpCode1 (line = 5507, i= 172) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-39"><a href="processing.html#cb25-39"></a><span class="co">## --- SightNo = 20200130_2, SpCode1 (line = 5659, i= 174) | Excluded:  Beyond truncation km (5.5) = 6.2 km.</span></span>
<span id="cb25-40"><a href="processing.html#cb25-40"></a><span class="co">## --- progress: 45% complete ...</span></span>
<span id="cb25-41"><a href="processing.html#cb25-41"></a><span class="co">## --- SightNo = 20200130_7, SpCode1 (line = 5683, i= 179) | Excluded:  Beyond truncation km (5.5) = 8.4 km.</span></span>
<span id="cb25-42"><a href="processing.html#cb25-42"></a><span class="co">## --- SightNo = 20200130_9, SpCode1 (line = 5711, i= 181) | Excluded:  Beyond truncation km (5.5) = 6.9 km.</span></span>
<span id="cb25-43"><a href="processing.html#cb25-43"></a><span class="co">## --- SightNo = 20200130_15, SpCode1 (line = 5948, i= 187) | Excluded:  Beyond truncation km (5.5) = 6.7 km.</span></span>
<span id="cb25-44"><a href="processing.html#cb25-44"></a><span class="co">## --- SightNo = 20200130_17, SpCode1 (line = 5998, i= 189) | Excluded:  Beyond truncation km (5.5) = 8.9 km.</span></span>
<span id="cb25-45"><a href="processing.html#cb25-45"></a><span class="co">## --- SightNo = 20200201_1, SpCode1 (line = 6710, i= 192) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-46"><a href="processing.html#cb25-46"></a><span class="co">## --- progress: 50% complete ...</span></span>
<span id="cb25-47"><a href="processing.html#cb25-47"></a><span class="co">## --- SightNo = 20200205_1, SpCode1 (line = 8508, i= 207) | Excluded:  Beyond truncation km (5.5) = 8 km.</span></span>
<span id="cb25-48"><a href="processing.html#cb25-48"></a><span class="co">## --- SightNo = 20200205_3, SpCode1 (line = 8855, i= 209) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-49"><a href="processing.html#cb25-49"></a><span class="co">## --- SightNo = 20200205_4, SpCode1 (line = 8872, i= 210) | Excluded:  IO policy not met. IO =  099 ; Obs =  099.</span></span>
<span id="cb25-50"><a href="processing.html#cb25-50"></a><span class="co">## --- progress: 55% complete ...</span></span>
<span id="cb25-51"><a href="processing.html#cb25-51"></a><span class="co">## --- SightNo = 20200207_4, SpCode1 (line = 9554, i= 217) | Excluded:  Beyond truncation km (5.5) = 6.4 km.</span></span>
<span id="cb25-52"><a href="processing.html#cb25-52"></a><span class="co">## --- SightNo = 20200208_4, SpCode1 (line = 10297, i= 222) | Excluded:  Species codes not recognized: 199.</span></span>
<span id="cb25-53"><a href="processing.html#cb25-53"></a><span class="co">## --- SightNo = 20200209_3, SpCode1 (line = 10773, i= 225) | Excluded:  Beyond truncation km (5.5) = 7.8 km.</span></span>
<span id="cb25-54"><a href="processing.html#cb25-54"></a><span class="co">## --- SightNo = 20200209_4, SpCode1 (line = 10798, i= 226) | Excluded:  Beyond truncation km (5.5) = 9.8 km.</span></span>
<span id="cb25-55"><a href="processing.html#cb25-55"></a><span class="co">## --- progress: 60% complete ...</span></span>
<span id="cb25-56"><a href="processing.html#cb25-56"></a><span class="co">## --- progress: 65% complete ...</span></span>
<span id="cb25-57"><a href="processing.html#cb25-57"></a><span class="co">## --- progress: 70% complete ...</span></span>
<span id="cb25-58"><a href="processing.html#cb25-58"></a><span class="co">## --- SightNo = 20200226_4, SpCode1 (line = 14918, i= 285) | Excluded:  Beyond truncation km (5.5) = 6.4 km.</span></span>
<span id="cb25-59"><a href="processing.html#cb25-59"></a><span class="co">## --- SightNo = 20200226_5, SpCode1 (line = 14921, i= 286) | Excluded:  Beyond truncation km (5.5) = 5.7 km.</span></span>
<span id="cb25-60"><a href="processing.html#cb25-60"></a><span class="co">## --- SightNo = 20200226_6, SpCode1 (line = 14926, i= 287) | Excluded:  Beyond truncation km (5.5) = 6.7 km.</span></span>
<span id="cb25-61"><a href="processing.html#cb25-61"></a><span class="co">## --- SightNo = 20200226_9, SpCode1 (line = 14946, i= 290) | Excluded:  aft of beam: 258 degrees.</span></span>
<span id="cb25-62"><a href="processing.html#cb25-62"></a><span class="co">## --- progress: 75% complete ...</span></span>
<span id="cb25-63"><a href="processing.html#cb25-63"></a><span class="co">## --- SightNo = 20200226_14, SpCode1 (line = 14981, i= 295) | Excluded:  Beyond truncation km (5.5) = 8.4 km.</span></span>
<span id="cb25-64"><a href="processing.html#cb25-64"></a><span class="co">## --- SightNo = 20200226_19, SpCode1 (line = 15080, i= 300) | Excluded:  Beyond truncation km (5.5) = 9 km.</span></span>
<span id="cb25-65"><a href="processing.html#cb25-65"></a><span class="co">## --- SightNo = 20200226_24, SpCode1 (line = 15152, i= 305) | Excluded:  Beyond truncation km (5.5) = 6.2 km.</span></span>
<span id="cb25-66"><a href="processing.html#cb25-66"></a><span class="co">## --- progress: 80% complete ...</span></span>
<span id="cb25-67"><a href="processing.html#cb25-67"></a><span class="co">## --- progress: 85% complete ...</span></span>
<span id="cb25-68"><a href="processing.html#cb25-68"></a><span class="co">## --- progress: 90% complete ...</span></span>
<span id="cb25-69"><a href="processing.html#cb25-69"></a><span class="co">## --- SightNo = 20200303_10, SpCode1 (line = 18088, i= 359) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-70"><a href="processing.html#cb25-70"></a><span class="co">## --- progress: 95% complete ...</span></span>
<span id="cb25-71"><a href="processing.html#cb25-71"></a><span class="co">## --- SightNo = 20200310_9, SpCode1 (line = 21863, i= 376) | Excluded:  Beyond truncation km (5.5) = 7.1 km.</span></span>
<span id="cb25-72"><a href="processing.html#cb25-72"></a><span class="co">## --- SightNo = 20200310_10, SpCode1 (line = 21885, i= 377) | Excluded:  Beyond truncation km (5.5) = 7.3 km.</span></span>
<span id="cb25-73"><a href="processing.html#cb25-73"></a><span class="co">## --- SightNo = 20200311_25, SpCode1 (line = 22212, i= 384) | Excluded:  Beyond truncation km (5.5) = 6.5 km.</span></span>
<span id="cb25-74"><a href="processing.html#cb25-74"></a><span class="co">## --- SightNo = 20200311_27, SpCode1 (line = 22243, i= 386) | Excluded:  Beyond truncation km (5.5) = 6.3 km.</span></span>
<span id="cb25-75"><a href="processing.html#cb25-75"></a><span class="co">## --- SightNo = 20200311_30, SpCode1 (line = 22419, i= 389) | Excluded:  Beyond truncation km (5.5) = 6.9 km.</span></span>
<span id="cb25-76"><a href="processing.html#cb25-76"></a><span class="co">## ---</span></span>
<span id="cb25-77"><a href="processing.html#cb25-77"></a><span class="co">## ---</span></span>
<span id="cb25-78"><a href="processing.html#cb25-78"></a><span class="co">## Cohort &quot;fkw_insular&quot;: analysis: &quot;density&quot;: processing sightings ...</span></span>
<span id="cb25-79"><a href="processing.html#cb25-79"></a><span class="co">## --- filtering to sightings with species of interest ...</span></span>
<span id="cb25-80"><a href="processing.html#cb25-80"></a><span class="co">## --- SightNo = 20200119_1, SpCode1 (line = 28, i= 1) | Excluded:  Beyond truncation km (5) = 6.9 km.</span></span>
<span id="cb25-81"><a href="processing.html#cb25-81"></a><span class="co">## --- SightNo = 20200119_10, SpCode1 (line = 136, i= 10) | Excluded:  Beyond truncation km (5) = 5.2 km.</span></span>
<span id="cb25-82"><a href="processing.html#cb25-82"></a><span class="co">## --- SightNo = 20200119_18, SpCode1 (line = 370, i= 18) | Excluded:  Beyond truncation km (5) = 7.2 km.</span></span>
<span id="cb25-83"><a href="processing.html#cb25-83"></a><span class="co">## --- SightNo = 20200119_19, SpCode1 (line = 377, i= 19) | Excluded:  Beyond truncation km (5) = 7.8 km.</span></span>
<span id="cb25-84"><a href="processing.html#cb25-84"></a><span class="co">## --- progress: 5% complete ...</span></span>
<span id="cb25-85"><a href="processing.html#cb25-85"></a><span class="co">## --- SightNo = 20200119_25, SpCode1 (line = 532, i= 25) | Excluded:  Beyond truncation km (5) = 5.9 km.</span></span>
<span id="cb25-86"><a href="processing.html#cb25-86"></a><span class="co">## --- SightNo = 20200119_32, SpCode1 (line = 578, i= 32) | Excluded:  Beyond truncation km (5) = 6.4 km.</span></span>
<span id="cb25-87"><a href="processing.html#cb25-87"></a><span class="co">## --- SightNo = 20200119_33, SpCode1 (line = 588, i= 33) | Excluded:  Beyond truncation km (5) = 7.2 km.</span></span>
<span id="cb25-88"><a href="processing.html#cb25-88"></a><span class="co">## --- SightNo = 20200120_4, SpCode1 (line = 800, i= 37) | Excluded:  Beyond truncation km (5) = 5.6 km.</span></span>
<span id="cb25-89"><a href="processing.html#cb25-89"></a><span class="co">## --- SightNo = 20200120_5, SpCode1 (line = 811, i= 38) | Excluded:  Beyond truncation km (5) = 8.5 km.</span></span>
<span id="cb25-90"><a href="processing.html#cb25-90"></a><span class="co">## --- progress: 10% complete ...</span></span>
<span id="cb25-91"><a href="processing.html#cb25-91"></a><span class="co">## --- SightNo = 20200120_6, SpCode1 (line = 816, i= 39) | Excluded:  Beyond truncation km (5) = 7.6 km.</span></span>
<span id="cb25-92"><a href="processing.html#cb25-92"></a><span class="co">## --- SightNo = 20200120_7, SpCode1 (line = 828, i= 40) | Excluded:  Beyond truncation km (5) = 7.1 km.</span></span>
<span id="cb25-93"><a href="processing.html#cb25-93"></a><span class="co">## --- SightNo = 20200120_8, SpCode1 (line = 834, i= 41) | Excluded:  Beyond truncation km (5) = 8.3 km.</span></span>
<span id="cb25-94"><a href="processing.html#cb25-94"></a><span class="co">## --- SightNo = 20200120_10, SpCode1 (line = 854, i= 43) | Excluded:  Beyond truncation km (5) = 8 km.</span></span>
<span id="cb25-95"><a href="processing.html#cb25-95"></a><span class="co">## --- SightNo = 20200121_3, SpCode1 (line = 1379, i= 49) | Excluded:  Beyond truncation km (5) = 5.6 km.</span></span>
<span id="cb25-96"><a href="processing.html#cb25-96"></a><span class="co">## --- SightNo = 20200122_1, SpCode1 (line = 1556, i= 54) | Excluded:  Beyond truncation km (5) = 6.8 km.</span></span>
<span id="cb25-97"><a href="processing.html#cb25-97"></a><span class="co">## --- SightNo = 20200122_2, SpCode1 (line = 1560, i= 55) | Excluded:  Beyond truncation km (5) = 8.5 km.</span></span>
<span id="cb25-98"><a href="processing.html#cb25-98"></a><span class="co">## --- progress: 15% complete ...</span></span>
<span id="cb25-99"><a href="processing.html#cb25-99"></a><span class="co">## --- SightNo = 20200122_12, SpCode1 (line = 1606, i= 65) | Excluded:  Beyond truncation km (5) = 6.2 km.</span></span>
<span id="cb25-100"><a href="processing.html#cb25-100"></a><span class="co">## --- SightNo = 20200122_20, SpCode1 (line = 1648, i= 73) | Excluded:  Beyond truncation km (5) = 6.8 km.</span></span>
<span id="cb25-101"><a href="processing.html#cb25-101"></a><span class="co">## --- SightNo = 20200122_21, SpCode1 (line = 1651, i= 74) | Excluded:  Beyond truncation km (5) = 6 km.</span></span>
<span id="cb25-102"><a href="processing.html#cb25-102"></a><span class="co">## --- progress: 20% complete ...</span></span>
<span id="cb25-103"><a href="processing.html#cb25-103"></a><span class="co">## --- SightNo = 20200122_26, SpCode1 (line = 1685, i= 79) | Excluded:  Beyond truncation km (5) = 7.4 km.</span></span>
<span id="cb25-104"><a href="processing.html#cb25-104"></a><span class="co">## --- SightNo = 20200122_34, SpCode1 (line = 1791, i= 87) | Excluded:  Beyond truncation km (5) = 7.5 km.</span></span>
<span id="cb25-105"><a href="processing.html#cb25-105"></a><span class="co">## --- SightNo = 20200122_40, SpCode1 (line = 2035, i= 93) | Excluded:  Beyond truncation km (5) = 7.9 km.</span></span>
<span id="cb25-106"><a href="processing.html#cb25-106"></a><span class="co">## --- progress: 25% complete ...</span></span>
<span id="cb25-107"><a href="processing.html#cb25-107"></a><span class="co">## --- SightNo = 20200124_15, SpCode1 (line = 2957, i= 109) | Excluded:  Beyond truncation km (5) = 8.1 km.</span></span>
<span id="cb25-108"><a href="processing.html#cb25-108"></a><span class="co">## --- SightNo = 20200124_16, SpCode1 (line = 3054, i= 110) | Excluded:  Beyond truncation km (5) = 5.1 km.</span></span>
<span id="cb25-109"><a href="processing.html#cb25-109"></a><span class="co">## --- progress: 30% complete ...</span></span>
<span id="cb25-110"><a href="processing.html#cb25-110"></a><span class="co">## --- SightNo = 20200125_1, SpCode1 (line = 3160, i= 120) | Excluded:  Beyond truncation km (5) = 6 km.</span></span>
<span id="cb25-111"><a href="processing.html#cb25-111"></a><span class="co">## --- SightNo = 20200126_2, SpCode1 (line = 3634, i= 122) | Excluded:  Beyond truncation km (5) = 5.3 km.</span></span>
<span id="cb25-112"><a href="processing.html#cb25-112"></a><span class="co">## --- SightNo = 20200127_1, SpCode1 (line = 4331, i= 123) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-113"><a href="processing.html#cb25-113"></a><span class="co">## --- SightNo = 20200127_2, SpCode1 (line = 4343, i= 124) | Excluded:  Beyond truncation km (5) = 6.6 km.</span></span>
<span id="cb25-114"><a href="processing.html#cb25-114"></a><span class="co">## --- progress: 35% complete ...</span></span>
<span id="cb25-115"><a href="processing.html#cb25-115"></a><span class="co">## --- SightNo = 20200128_4, SpCode1 (line = 4724, i= 144) | Excluded:  Beyond truncation km (5) = 6.9 km.</span></span>
<span id="cb25-116"><a href="processing.html#cb25-116"></a><span class="co">## --- progress: 40% complete ...</span></span>
<span id="cb25-117"><a href="processing.html#cb25-117"></a><span class="co">## --- SightNo = 20200129_16, SpCode1 (line = 5507, i= 172) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-118"><a href="processing.html#cb25-118"></a><span class="co">## --- SightNo = 20200130_2, SpCode1 (line = 5659, i= 174) | Excluded:  Beyond truncation km (5) = 6.2 km.</span></span>
<span id="cb25-119"><a href="processing.html#cb25-119"></a><span class="co">## --- progress: 45% complete ...</span></span>
<span id="cb25-120"><a href="processing.html#cb25-120"></a><span class="co">## --- SightNo = 20200130_7, SpCode1 (line = 5683, i= 179) | Excluded:  Beyond truncation km (5) = 8.4 km.</span></span>
<span id="cb25-121"><a href="processing.html#cb25-121"></a><span class="co">## --- SightNo = 20200130_8, SpCode1 (line = 5689, i= 180) | Excluded:  Beyond truncation km (5) = 5.1 km.</span></span>
<span id="cb25-122"><a href="processing.html#cb25-122"></a><span class="co">## --- SightNo = 20200130_9, SpCode1 (line = 5711, i= 181) | Excluded:  Beyond truncation km (5) = 6.9 km.</span></span>
<span id="cb25-123"><a href="processing.html#cb25-123"></a><span class="co">## --- SightNo = 20200130_15, SpCode1 (line = 5948, i= 187) | Excluded:  Beyond truncation km (5) = 6.7 km.</span></span>
<span id="cb25-124"><a href="processing.html#cb25-124"></a><span class="co">## --- SightNo = 20200130_17, SpCode1 (line = 5998, i= 189) | Excluded:  Beyond truncation km (5) = 8.9 km.</span></span>
<span id="cb25-125"><a href="processing.html#cb25-125"></a><span class="co">## --- SightNo = 20200201_1, SpCode1 (line = 6710, i= 192) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-126"><a href="processing.html#cb25-126"></a><span class="co">## --- progress: 50% complete ...</span></span>
<span id="cb25-127"><a href="processing.html#cb25-127"></a><span class="co">## --- SightNo = 20200205_1, SpCode1 (line = 8508, i= 207) | Excluded:  Beyond truncation km (5) = 8 km.</span></span>
<span id="cb25-128"><a href="processing.html#cb25-128"></a><span class="co">## --- SightNo = 20200205_3, SpCode1 (line = 8855, i= 209) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-129"><a href="processing.html#cb25-129"></a><span class="co">## --- SightNo = 20200205_4, SpCode1 (line = 8872, i= 210) | Excluded:  IO policy not met. IO =  099 ; Obs =  099.</span></span>
<span id="cb25-130"><a href="processing.html#cb25-130"></a><span class="co">## --- progress: 55% complete ...</span></span>
<span id="cb25-131"><a href="processing.html#cb25-131"></a><span class="co">## --- SightNo = 20200207_4, SpCode1 (line = 9554, i= 217) | Excluded:  Beyond truncation km (5) = 6.4 km.</span></span>
<span id="cb25-132"><a href="processing.html#cb25-132"></a><span class="co">## --- SightNo = 20200208_4, SpCode1 (line = 10297, i= 222) | Excluded:  Species codes not recognized: 199.</span></span>
<span id="cb25-133"><a href="processing.html#cb25-133"></a><span class="co">## --- SightNo = 20200209_3, SpCode1 (line = 10773, i= 225) | Excluded:  Beyond truncation km (5) = 7.8 km.</span></span>
<span id="cb25-134"><a href="processing.html#cb25-134"></a><span class="co">## --- SightNo = 20200209_4, SpCode1 (line = 10798, i= 226) | Excluded:  Beyond truncation km (5) = 9.8 km.</span></span>
<span id="cb25-135"><a href="processing.html#cb25-135"></a><span class="co">## --- progress: 60% complete ...</span></span>
<span id="cb25-136"><a href="processing.html#cb25-136"></a><span class="co">## --- SightNo = 20200211_15, SpCode1 (line = 11545, i= 244) | Excluded:  Beyond truncation km (5) = 5.1 km.</span></span>
<span id="cb25-137"><a href="processing.html#cb25-137"></a><span class="co">## --- progress: 65% complete ...</span></span>
<span id="cb25-138"><a href="processing.html#cb25-138"></a><span class="co">## --- SightNo = 20200224_26, SpCode1 (line = 14033, i= 261) | Excluded:  Beyond truncation km (5) = 5.4 km.</span></span>
<span id="cb25-139"><a href="processing.html#cb25-139"></a><span class="co">## --- progress: 70% complete ...</span></span>
<span id="cb25-140"><a href="processing.html#cb25-140"></a><span class="co">## --- SightNo = 20200226_4, SpCode1 (line = 14918, i= 285) | Excluded:  Beyond truncation km (5) = 6.4 km.</span></span>
<span id="cb25-141"><a href="processing.html#cb25-141"></a><span class="co">## --- SightNo = 20200226_5, SpCode1 (line = 14921, i= 286) | Excluded:  Beyond truncation km (5) = 5.7 km.</span></span>
<span id="cb25-142"><a href="processing.html#cb25-142"></a><span class="co">## --- SightNo = 20200226_6, SpCode1 (line = 14926, i= 287) | Excluded:  Beyond truncation km (5) = 6.7 km.</span></span>
<span id="cb25-143"><a href="processing.html#cb25-143"></a><span class="co">## --- SightNo = 20200226_9, SpCode1 (line = 14946, i= 290) | Excluded:  aft of beam: 258 degrees.</span></span>
<span id="cb25-144"><a href="processing.html#cb25-144"></a><span class="co">## --- progress: 75% complete ...</span></span>
<span id="cb25-145"><a href="processing.html#cb25-145"></a><span class="co">## --- SightNo = 20200226_14, SpCode1 (line = 14981, i= 295) | Excluded:  Beyond truncation km (5) = 8.4 km.</span></span>
<span id="cb25-146"><a href="processing.html#cb25-146"></a><span class="co">## --- SightNo = 20200226_19, SpCode1 (line = 15080, i= 300) | Excluded:  Beyond truncation km (5) = 9 km.</span></span>
<span id="cb25-147"><a href="processing.html#cb25-147"></a><span class="co">## --- SightNo = 20200226_24, SpCode1 (line = 15152, i= 305) | Excluded:  Beyond truncation km (5) = 6.2 km.</span></span>
<span id="cb25-148"><a href="processing.html#cb25-148"></a><span class="co">## --- progress: 80% complete ...</span></span>
<span id="cb25-149"><a href="processing.html#cb25-149"></a><span class="co">## --- progress: 85% complete ...</span></span>
<span id="cb25-150"><a href="processing.html#cb25-150"></a><span class="co">## --- progress: 90% complete ...</span></span>
<span id="cb25-151"><a href="processing.html#cb25-151"></a><span class="co">## --- SightNo = 20200303_10, SpCode1 (line = 18088, i= 359) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-152"><a href="processing.html#cb25-152"></a><span class="co">## --- progress: 95% complete ...</span></span>
<span id="cb25-153"><a href="processing.html#cb25-153"></a><span class="co">## --- SightNo = 20200310_9, SpCode1 (line = 21863, i= 376) | Excluded:  Beyond truncation km (5) = 7.1 km.</span></span>
<span id="cb25-154"><a href="processing.html#cb25-154"></a><span class="co">## --- SightNo = 20200310_10, SpCode1 (line = 21885, i= 377) | Excluded:  Beyond truncation km (5) = 7.3 km.</span></span>
<span id="cb25-155"><a href="processing.html#cb25-155"></a><span class="co">## --- SightNo = 20200311_23, SpCode1 (line = 22161, i= 382) | Excluded:  Beyond truncation km (5) = 5.4 km.</span></span>
<span id="cb25-156"><a href="processing.html#cb25-156"></a><span class="co">## --- SightNo = 20200311_25, SpCode1 (line = 22212, i= 384) | Excluded:  Beyond truncation km (5) = 6.5 km.</span></span>
<span id="cb25-157"><a href="processing.html#cb25-157"></a><span class="co">## --- SightNo = 20200311_27, SpCode1 (line = 22243, i= 386) | Excluded:  Beyond truncation km (5) = 6.3 km.</span></span>
<span id="cb25-158"><a href="processing.html#cb25-158"></a><span class="co">## --- SightNo = 20200311_30, SpCode1 (line = 22419, i= 389) | Excluded:  Beyond truncation km (5) = 6.9 km.</span></span>
<span id="cb25-159"><a href="processing.html#cb25-159"></a><span class="co">## ---</span></span>
<span id="cb25-160"><a href="processing.html#cb25-160"></a><span class="co">## ---</span></span>
<span id="cb25-161"><a href="processing.html#cb25-161"></a><span class="co">## Cohort &quot;fkw_insular&quot;: analysis: &quot;distance&quot;: processing sightings ...</span></span>
<span id="cb25-162"><a href="processing.html#cb25-162"></a><span class="co">## --- filtering to sightings with species of interest ...</span></span>
<span id="cb25-163"><a href="processing.html#cb25-163"></a><span class="co">## --- SightNo = 20200119_1, SpCode1 (line = 28, i= 1) | Excluded:  Beyond truncation km (5) = 6.9 km.</span></span>
<span id="cb25-164"><a href="processing.html#cb25-164"></a><span class="co">## --- SightNo = 20200119_10, SpCode1 (line = 136, i= 10) | Excluded:  Beyond truncation km (5) = 5.2 km.</span></span>
<span id="cb25-165"><a href="processing.html#cb25-165"></a><span class="co">## --- SightNo = 20200119_18, SpCode1 (line = 370, i= 18) | Excluded:  Beyond truncation km (5) = 7.2 km.</span></span>
<span id="cb25-166"><a href="processing.html#cb25-166"></a><span class="co">## --- SightNo = 20200119_19, SpCode1 (line = 377, i= 19) | Excluded:  Beyond truncation km (5) = 7.8 km.</span></span>
<span id="cb25-167"><a href="processing.html#cb25-167"></a><span class="co">## --- progress: 5% complete ...</span></span>
<span id="cb25-168"><a href="processing.html#cb25-168"></a><span class="co">## --- SightNo = 20200119_25, SpCode1 (line = 532, i= 25) | Excluded:  Beyond truncation km (5) = 5.9 km.</span></span>
<span id="cb25-169"><a href="processing.html#cb25-169"></a><span class="co">## --- SightNo = 20200119_32, SpCode1 (line = 578, i= 32) | Excluded:  Beyond truncation km (5) = 6.4 km.</span></span>
<span id="cb25-170"><a href="processing.html#cb25-170"></a><span class="co">## --- SightNo = 20200119_33, SpCode1 (line = 588, i= 33) | Excluded:  Beyond truncation km (5) = 7.2 km.</span></span>
<span id="cb25-171"><a href="processing.html#cb25-171"></a><span class="co">## --- SightNo = 20200120_4, SpCode1 (line = 800, i= 37) | Excluded:  Beyond truncation km (5) = 5.6 km.</span></span>
<span id="cb25-172"><a href="processing.html#cb25-172"></a><span class="co">## --- SightNo = 20200120_5, SpCode1 (line = 811, i= 38) | Excluded:  Beyond truncation km (5) = 8.5 km.</span></span>
<span id="cb25-173"><a href="processing.html#cb25-173"></a><span class="co">## --- progress: 10% complete ...</span></span>
<span id="cb25-174"><a href="processing.html#cb25-174"></a><span class="co">## --- SightNo = 20200120_6, SpCode1 (line = 816, i= 39) | Excluded:  Beyond truncation km (5) = 7.6 km.</span></span>
<span id="cb25-175"><a href="processing.html#cb25-175"></a><span class="co">## --- SightNo = 20200120_7, SpCode1 (line = 828, i= 40) | Excluded:  Beyond truncation km (5) = 7.1 km.</span></span>
<span id="cb25-176"><a href="processing.html#cb25-176"></a><span class="co">## --- SightNo = 20200120_8, SpCode1 (line = 834, i= 41) | Excluded:  Beyond truncation km (5) = 8.3 km.</span></span>
<span id="cb25-177"><a href="processing.html#cb25-177"></a><span class="co">## --- SightNo = 20200120_10, SpCode1 (line = 854, i= 43) | Excluded:  Beyond truncation km (5) = 8 km.</span></span>
<span id="cb25-178"><a href="processing.html#cb25-178"></a><span class="co">## --- SightNo = 20200121_3, SpCode1 (line = 1379, i= 49) | Excluded:  Beyond truncation km (5) = 5.6 km.</span></span>
<span id="cb25-179"><a href="processing.html#cb25-179"></a><span class="co">## --- SightNo = 20200122_1, SpCode1 (line = 1556, i= 54) | Excluded:  Beyond truncation km (5) = 6.8 km.</span></span>
<span id="cb25-180"><a href="processing.html#cb25-180"></a><span class="co">## --- SightNo = 20200122_2, SpCode1 (line = 1560, i= 55) | Excluded:  Beyond truncation km (5) = 8.5 km.</span></span>
<span id="cb25-181"><a href="processing.html#cb25-181"></a><span class="co">## --- progress: 15% complete ...</span></span>
<span id="cb25-182"><a href="processing.html#cb25-182"></a><span class="co">## --- SightNo = 20200122_12, SpCode1 (line = 1606, i= 65) | Excluded:  Beyond truncation km (5) = 6.2 km.</span></span>
<span id="cb25-183"><a href="processing.html#cb25-183"></a><span class="co">## --- SightNo = 20200122_20, SpCode1 (line = 1648, i= 73) | Excluded:  Beyond truncation km (5) = 6.8 km.</span></span>
<span id="cb25-184"><a href="processing.html#cb25-184"></a><span class="co">## --- SightNo = 20200122_21, SpCode1 (line = 1651, i= 74) | Excluded:  Beyond truncation km (5) = 6 km.</span></span>
<span id="cb25-185"><a href="processing.html#cb25-185"></a><span class="co">## --- progress: 20% complete ...</span></span>
<span id="cb25-186"><a href="processing.html#cb25-186"></a><span class="co">## --- SightNo = 20200122_26, SpCode1 (line = 1685, i= 79) | Excluded:  Beyond truncation km (5) = 7.4 km.</span></span>
<span id="cb25-187"><a href="processing.html#cb25-187"></a><span class="co">## --- SightNo = 20200122_34, SpCode1 (line = 1791, i= 87) | Excluded:  Beyond truncation km (5) = 7.5 km.</span></span>
<span id="cb25-188"><a href="processing.html#cb25-188"></a><span class="co">## --- SightNo = 20200122_40, SpCode1 (line = 2035, i= 93) | Excluded:  Beyond truncation km (5) = 7.9 km.</span></span>
<span id="cb25-189"><a href="processing.html#cb25-189"></a><span class="co">## --- progress: 25% complete ...</span></span>
<span id="cb25-190"><a href="processing.html#cb25-190"></a><span class="co">## --- SightNo = 20200124_15, SpCode1 (line = 2957, i= 109) | Excluded:  Beyond truncation km (5) = 8.1 km.</span></span>
<span id="cb25-191"><a href="processing.html#cb25-191"></a><span class="co">## --- SightNo = 20200124_16, SpCode1 (line = 3054, i= 110) | Excluded:  Beyond truncation km (5) = 5.1 km.</span></span>
<span id="cb25-192"><a href="processing.html#cb25-192"></a><span class="co">## --- progress: 30% complete ...</span></span>
<span id="cb25-193"><a href="processing.html#cb25-193"></a><span class="co">## --- SightNo = 20200125_1, SpCode1 (line = 3160, i= 120) | Excluded:  Beyond truncation km (5) = 6 km.</span></span>
<span id="cb25-194"><a href="processing.html#cb25-194"></a><span class="co">## --- SightNo = 20200126_2, SpCode1 (line = 3634, i= 122) | Excluded:  Beyond truncation km (5) = 5.3 km.</span></span>
<span id="cb25-195"><a href="processing.html#cb25-195"></a><span class="co">## --- SightNo = 20200127_1, SpCode1 (line = 4331, i= 123) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-196"><a href="processing.html#cb25-196"></a><span class="co">## --- SightNo = 20200127_2, SpCode1 (line = 4343, i= 124) | Excluded:  Beyond truncation km (5) = 6.6 km.</span></span>
<span id="cb25-197"><a href="processing.html#cb25-197"></a><span class="co">## --- progress: 35% complete ...</span></span>
<span id="cb25-198"><a href="processing.html#cb25-198"></a><span class="co">## --- SightNo = 20200128_4, SpCode1 (line = 4724, i= 144) | Excluded:  Beyond truncation km (5) = 6.9 km.</span></span>
<span id="cb25-199"><a href="processing.html#cb25-199"></a><span class="co">## --- progress: 40% complete ...</span></span>
<span id="cb25-200"><a href="processing.html#cb25-200"></a><span class="co">## --- SightNo = 20200129_16, SpCode1 (line = 5507, i= 172) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-201"><a href="processing.html#cb25-201"></a><span class="co">## --- SightNo = 20200130_2, SpCode1 (line = 5659, i= 174) | Excluded:  Beyond truncation km (5) = 6.2 km.</span></span>
<span id="cb25-202"><a href="processing.html#cb25-202"></a><span class="co">## --- progress: 45% complete ...</span></span>
<span id="cb25-203"><a href="processing.html#cb25-203"></a><span class="co">## --- SightNo = 20200130_7, SpCode1 (line = 5683, i= 179) | Excluded:  Beyond truncation km (5) = 8.4 km.</span></span>
<span id="cb25-204"><a href="processing.html#cb25-204"></a><span class="co">## --- SightNo = 20200130_8, SpCode1 (line = 5689, i= 180) | Excluded:  Beyond truncation km (5) = 5.1 km.</span></span>
<span id="cb25-205"><a href="processing.html#cb25-205"></a><span class="co">## --- SightNo = 20200130_9, SpCode1 (line = 5711, i= 181) | Excluded:  Beyond truncation km (5) = 6.9 km.</span></span>
<span id="cb25-206"><a href="processing.html#cb25-206"></a><span class="co">## --- SightNo = 20200130_15, SpCode1 (line = 5948, i= 187) | Excluded:  Beyond truncation km (5) = 6.7 km.</span></span>
<span id="cb25-207"><a href="processing.html#cb25-207"></a><span class="co">## --- SightNo = 20200130_17, SpCode1 (line = 5998, i= 189) | Excluded:  Beyond truncation km (5) = 8.9 km.</span></span>
<span id="cb25-208"><a href="processing.html#cb25-208"></a><span class="co">## --- SightNo = 20200201_1, SpCode1 (line = 6710, i= 192) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-209"><a href="processing.html#cb25-209"></a><span class="co">## --- progress: 50% complete ...</span></span>
<span id="cb25-210"><a href="processing.html#cb25-210"></a><span class="co">## --- SightNo = 20200205_1, SpCode1 (line = 8508, i= 207) | Excluded:  Beyond truncation km (5) = 8 km.</span></span>
<span id="cb25-211"><a href="processing.html#cb25-211"></a><span class="co">## --- SightNo = 20200205_3, SpCode1 (line = 8855, i= 209) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-212"><a href="processing.html#cb25-212"></a><span class="co">## --- SightNo = 20200205_4, SpCode1 (line = 8872, i= 210) | Excluded:  IO policy not met. IO =  099 ; Obs =  099.</span></span>
<span id="cb25-213"><a href="processing.html#cb25-213"></a><span class="co">## --- progress: 55% complete ...</span></span>
<span id="cb25-214"><a href="processing.html#cb25-214"></a><span class="co">## --- SightNo = 20200207_4, SpCode1 (line = 9554, i= 217) | Excluded:  Beyond truncation km (5) = 6.4 km.</span></span>
<span id="cb25-215"><a href="processing.html#cb25-215"></a><span class="co">## --- SightNo = 20200208_4, SpCode1 (line = 10297, i= 222) | Excluded:  Species codes not recognized: 199.</span></span>
<span id="cb25-216"><a href="processing.html#cb25-216"></a><span class="co">## --- SightNo = 20200209_3, SpCode1 (line = 10773, i= 225) | Excluded:  Beyond truncation km (5) = 7.8 km.</span></span>
<span id="cb25-217"><a href="processing.html#cb25-217"></a><span class="co">## --- SightNo = 20200209_4, SpCode1 (line = 10798, i= 226) | Excluded:  Beyond truncation km (5) = 9.8 km.</span></span>
<span id="cb25-218"><a href="processing.html#cb25-218"></a><span class="co">## --- progress: 60% complete ...</span></span>
<span id="cb25-219"><a href="processing.html#cb25-219"></a><span class="co">## --- SightNo = 20200211_8, SpCode1 (line = 11481, i= 237) | Excluded:  Beyond truncation km (5) = 6.3 km.</span></span>
<span id="cb25-220"><a href="processing.html#cb25-220"></a><span class="co">## --- SightNo = 20200211_15, SpCode1 (line = 11545, i= 244) | Excluded:  Beyond truncation km (5) = 5.1 km.</span></span>
<span id="cb25-221"><a href="processing.html#cb25-221"></a><span class="co">## --- progress: 65% complete ...</span></span>
<span id="cb25-222"><a href="processing.html#cb25-222"></a><span class="co">## --- SightNo = 20200224_26, SpCode1 (line = 14033, i= 261) | Excluded:  Beyond truncation km (5) = 5.4 km.</span></span>
<span id="cb25-223"><a href="processing.html#cb25-223"></a><span class="co">## --- progress: 70% complete ...</span></span>
<span id="cb25-224"><a href="processing.html#cb25-224"></a><span class="co">## --- SightNo = 20200226_4, SpCode1 (line = 14918, i= 285) | Excluded:  Beyond truncation km (5) = 6.4 km.</span></span>
<span id="cb25-225"><a href="processing.html#cb25-225"></a><span class="co">## --- SightNo = 20200226_5, SpCode1 (line = 14921, i= 286) | Excluded:  Beyond truncation km (5) = 5.7 km.</span></span>
<span id="cb25-226"><a href="processing.html#cb25-226"></a><span class="co">## --- SightNo = 20200226_6, SpCode1 (line = 14926, i= 287) | Excluded:  Beyond truncation km (5) = 6.7 km.</span></span>
<span id="cb25-227"><a href="processing.html#cb25-227"></a><span class="co">## --- SightNo = 20200226_9, SpCode1 (line = 14946, i= 290) | Excluded:  aft of beam: 258 degrees.</span></span>
<span id="cb25-228"><a href="processing.html#cb25-228"></a><span class="co">## --- progress: 75% complete ...</span></span>
<span id="cb25-229"><a href="processing.html#cb25-229"></a><span class="co">## --- SightNo = 20200226_14, SpCode1 (line = 14981, i= 295) | Excluded:  Beyond truncation km (5) = 8.4 km.</span></span>
<span id="cb25-230"><a href="processing.html#cb25-230"></a><span class="co">## --- SightNo = 20200226_19, SpCode1 (line = 15080, i= 300) | Excluded:  Beyond truncation km (5) = 9 km.</span></span>
<span id="cb25-231"><a href="processing.html#cb25-231"></a><span class="co">## --- SightNo = 20200226_24, SpCode1 (line = 15152, i= 305) | Excluded:  Beyond truncation km (5) = 6.2 km.</span></span>
<span id="cb25-232"><a href="processing.html#cb25-232"></a><span class="co">## --- SightNo = 20200226_25, SpCode1 (line = 15202, i= 306) | Excluded:  Beyond truncation km (5) = 5.6 km.</span></span>
<span id="cb25-233"><a href="processing.html#cb25-233"></a><span class="co">## --- SightNo = 20200226_27, SpCode1 (line = 15229, i= 308) | Excluded:  Beyond truncation km (5) = 6.3 km.</span></span>
<span id="cb25-234"><a href="processing.html#cb25-234"></a><span class="co">## --- progress: 80% complete ...</span></span>
<span id="cb25-235"><a href="processing.html#cb25-235"></a><span class="co">## --- progress: 85% complete ...</span></span>
<span id="cb25-236"><a href="processing.html#cb25-236"></a><span class="co">## --- SightNo = 20200229_23, SpCode1 (line = 16835, i= 342) | Excluded:  Beyond truncation km (5) = 5.7 km.</span></span>
<span id="cb25-237"><a href="processing.html#cb25-237"></a><span class="co">## --- SightNo = 20200229_24, SpCode1 (line = 16847, i= 343) | Excluded:  Beyond truncation km (5) = 5.3 km.</span></span>
<span id="cb25-238"><a href="processing.html#cb25-238"></a><span class="co">## --- SightNo = 20200229_27, SpCode1 (line = 16948, i= 346) | Excluded:  Beyond truncation km (5) = 6.7 km.</span></span>
<span id="cb25-239"><a href="processing.html#cb25-239"></a><span class="co">## --- SightNo = 20200229_28, SpCode1 (line = 16952, i= 347) | Excluded:  Beyond truncation km (5) = 9.2 km.</span></span>
<span id="cb25-240"><a href="processing.html#cb25-240"></a><span class="co">## --- progress: 90% complete ...</span></span>
<span id="cb25-241"><a href="processing.html#cb25-241"></a><span class="co">## --- SightNo = 20200303_10, SpCode1 (line = 18088, i= 359) | Excluded:  Observer not standard. ObsStd =  FALSE.</span></span>
<span id="cb25-242"><a href="processing.html#cb25-242"></a><span class="co">## --- progress: 95% complete ...</span></span>
<span id="cb25-243"><a href="processing.html#cb25-243"></a><span class="co">## --- SightNo = 20200310_9, SpCode1 (line = 21863, i= 376) | Excluded:  Beyond truncation km (5) = 7.1 km.</span></span>
<span id="cb25-244"><a href="processing.html#cb25-244"></a><span class="co">## --- SightNo = 20200310_10, SpCode1 (line = 21885, i= 377) | Excluded:  Beyond truncation km (5) = 7.3 km.</span></span>
<span id="cb25-245"><a href="processing.html#cb25-245"></a><span class="co">## --- SightNo = 20200311_23, SpCode1 (line = 22161, i= 382) | Excluded:  Beyond truncation km (5) = 5.4 km.</span></span>
<span id="cb25-246"><a href="processing.html#cb25-246"></a><span class="co">## --- SightNo = 20200311_25, SpCode1 (line = 22212, i= 384) | Excluded:  Beyond truncation km (5) = 6.5 km.</span></span>
<span id="cb25-247"><a href="processing.html#cb25-247"></a><span class="co">## --- SightNo = 20200311_27, SpCode1 (line = 22243, i= 386) | Excluded:  Beyond truncation km (5) = 6.3 km.</span></span>
<span id="cb25-248"><a href="processing.html#cb25-248"></a><span class="co">## --- SightNo = 20200311_30, SpCode1 (line = 22419, i= 389) | Excluded:  Beyond truncation km (5) = 6.9 km.</span></span>
<span id="cb25-249"><a href="processing.html#cb25-249"></a><span class="co">## ---</span></span>
<span id="cb25-250"><a href="processing.html#cb25-250"></a><span class="co">## ---</span></span></code></pre></div>
<p>The function produces a formatted dataset and adds it to a new <code>sightings</code> slot. It does this for each analysis (<code>density</code> and, if specified, <code>distance</code>) in each cohort.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="processing.html#cb26-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>default<span class="op">$</span>density <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb26-2"><a href="processing.html#cb26-2"></a><span class="co">## [1] &quot;segments&quot;  &quot;das&quot;       &quot;sightings&quot;</span></span>
<span id="cb26-3"><a href="processing.html#cb26-3"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>fkw_insular<span class="op">$</span>density <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb26-4"><a href="processing.html#cb26-4"></a><span class="co">## [1] &quot;segments&quot;  &quot;das&quot;       &quot;sightings&quot;</span></span>
<span id="cb26-5"><a href="processing.html#cb26-5"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>fkw_insular<span class="op">$</span>distance <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb26-6"><a href="processing.html#cb26-6"></a><span class="co">## [1] &quot;segments&quot;  &quot;das&quot;       &quot;sightings&quot;</span></span></code></pre></div>
<p>Note that the <code>sightings</code> table has a column named <code>included</code> (<code>TRUE</code> = yes, use it in the analysis). Any sightings that do not meet the inclusion criteria as specified in your settings will be <code>included = FALSE</code>, but they won’t be removed from the data.</p>
<p>Since the sightings in each cohort are processed slightly differently according to the cohort’s specific settings, you should expect different numbers of included/excluded sightings in each cohort-analysis dataset:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="processing.html#cb27-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>default<span class="op">$</span>density<span class="op">$</span>sightings<span class="op">$</span>included <span class="op">%&gt;%</span><span class="st"> </span>table</span>
<span id="cb27-2"><a href="processing.html#cb27-2"></a><span class="co">## .</span></span>
<span id="cb27-3"><a href="processing.html#cb27-3"></a><span class="co">## FALSE  TRUE </span></span>
<span id="cb27-4"><a href="processing.html#cb27-4"></a><span class="co">##   123   205</span></span>
<span id="cb27-5"><a href="processing.html#cb27-5"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>fkw_insular<span class="op">$</span>density<span class="op">$</span>sightings<span class="op">$</span>included <span class="op">%&gt;%</span><span class="st"> </span>table</span>
<span id="cb27-6"><a href="processing.html#cb27-6"></a><span class="co">## .</span></span>
<span id="cb27-7"><a href="processing.html#cb27-7"></a><span class="co">## FALSE  TRUE </span></span>
<span id="cb27-8"><a href="processing.html#cb27-8"></a><span class="co">##   130   198</span></span>
<span id="cb27-9"><a href="processing.html#cb27-9"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>fkw_insular<span class="op">$</span>distance<span class="op">$</span>sightings<span class="op">$</span>included <span class="op">%&gt;%</span><span class="st"> </span>table</span>
<span id="cb27-10"><a href="processing.html#cb27-10"></a><span class="co">## .</span></span>
<span id="cb27-11"><a href="processing.html#cb27-11"></a><span class="co">## FALSE  TRUE </span></span>
<span id="cb27-12"><a href="processing.html#cb27-12"></a><span class="co">##   101   227</span></span></code></pre></div>
<p>When this function’s <code>verbose</code> argument is <code>TRUE</code> (the default), a message is printed each time a sighting does not meet the inclusion criteria (see above).</p>
<div id="sightings-data-structure" class="section level4 unnumbered">
<h4>Sightings data structure</h4>
<p>The <code>sightings</code> table has many other variables:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="processing.html#cb28-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>default<span class="op">$</span>density<span class="op">$</span>sightings <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb28-2"><a href="processing.html#cb28-2"></a><span class="co">##  [1] &quot;Event&quot;            &quot;DateTime&quot;         &quot;Lat&quot;              &quot;Lon&quot;             </span></span>
<span id="cb28-3"><a href="processing.html#cb28-3"></a><span class="co">##  [5] &quot;OnEffort&quot;         &quot;Cruise&quot;           &quot;Mode&quot;             &quot;OffsetGMT&quot;       </span></span>
<span id="cb28-4"><a href="processing.html#cb28-4"></a><span class="co">##  [9] &quot;EffType&quot;          &quot;ESWsides&quot;         &quot;Course&quot;           &quot;SpdKt&quot;           </span></span>
<span id="cb28-5"><a href="processing.html#cb28-5"></a><span class="co">## [13] &quot;Bft&quot;              &quot;SwellHght&quot;        &quot;WindSpdKt&quot;        &quot;RainFog&quot;         </span></span>
<span id="cb28-6"><a href="processing.html#cb28-6"></a><span class="co">## [17] &quot;HorizSun&quot;         &quot;VertSun&quot;          &quot;Glare&quot;            &quot;Vis&quot;             </span></span>
<span id="cb28-7"><a href="processing.html#cb28-7"></a><span class="co">## [21] &quot;ObsL&quot;             &quot;Rec&quot;              &quot;ObsR&quot;             &quot;ObsInd&quot;          </span></span>
<span id="cb28-8"><a href="processing.html#cb28-8"></a><span class="co">## [25] &quot;EffortDot&quot;        &quot;EventNum&quot;         &quot;file_das&quot;         &quot;line_num&quot;        </span></span>
<span id="cb28-9"><a href="processing.html#cb28-9"></a><span class="co">## [29] &quot;stratum_HI_EEZ&quot;   &quot;stratum_WHICEAS&quot;  &quot;stratum_OtherCNP&quot; &quot;study_area&quot;      </span></span>
<span id="cb28-10"><a href="processing.html#cb28-10"></a><span class="co">## [33] &quot;year&quot;             &quot;month&quot;            &quot;day&quot;              &quot;yday&quot;            </span></span>
<span id="cb28-11"><a href="processing.html#cb28-11"></a><span class="co">## [37] &quot;km_int&quot;           &quot;km_cum&quot;           &quot;ship&quot;             &quot;stratum&quot;         </span></span>
<span id="cb28-12"><a href="processing.html#cb28-12"></a><span class="co">## [41] &quot;seg_id&quot;           &quot;use&quot;              &quot;SightNo&quot;          &quot;Subgroup&quot;        </span></span>
<span id="cb28-13"><a href="processing.html#cb28-13"></a><span class="co">## [45] &quot;SightNoDaily&quot;     &quot;Obs&quot;              &quot;ObsStd&quot;           &quot;Bearing&quot;         </span></span>
<span id="cb28-14"><a href="processing.html#cb28-14"></a><span class="co">## [49] &quot;Reticle&quot;          &quot;DistNm&quot;           &quot;Cue&quot;              &quot;Method&quot;          </span></span>
<span id="cb28-15"><a href="processing.html#cb28-15"></a><span class="co">## [53] &quot;Photos&quot;           &quot;Birds&quot;            &quot;CalibSchool&quot;      &quot;PhotosAerial&quot;    </span></span>
<span id="cb28-16"><a href="processing.html#cb28-16"></a><span class="co">## [57] &quot;Biopsy&quot;           &quot;CourseSchool&quot;     &quot;TurtleSp&quot;         &quot;TurtleGs&quot;        </span></span>
<span id="cb28-17"><a href="processing.html#cb28-17"></a><span class="co">## [61] &quot;TurtleJFR&quot;        &quot;TurtleAge&quot;        &quot;TurtleCapt&quot;       &quot;PinnipedSp&quot;      </span></span>
<span id="cb28-18"><a href="processing.html#cb28-18"></a><span class="co">## [65] &quot;PinnipedGs&quot;       &quot;BoatType&quot;         &quot;BoatGs&quot;           &quot;PerpDistKm&quot;      </span></span>
<span id="cb28-19"><a href="processing.html#cb28-19"></a><span class="co">## [69] &quot;species&quot;          &quot;best&quot;             &quot;low&quot;              &quot;high&quot;            </span></span>
<span id="cb28-20"><a href="processing.html#cb28-20"></a><span class="co">## [73] &quot;prob&quot;             &quot;mixed&quot;            &quot;ss_tot&quot;           &quot;ss_percent&quot;      </span></span>
<span id="cb28-21"><a href="processing.html#cb28-21"></a><span class="co">## [77] &quot;n_sp&quot;             &quot;n_obs&quot;            &quot;n_best&quot;           &quot;n_low&quot;           </span></span>
<span id="cb28-22"><a href="processing.html#cb28-22"></a><span class="co">## [81] &quot;n_high&quot;           &quot;calibr&quot;           &quot;included&quot;</span></span></code></pre></div>
<p>Columns 41 onwards correspond to sightings information. Columns of note:</p>
<ul>
<li><p><code>species</code> (column 68) contains the species code. There is only one species-code per row (i.e, multi-species sightings have been expanded to multiple rows).</p></li>
<li><p><code>best</code>, <code>low</code>, and <code>high</code> (columns 69- 71) contain the refined group size estimates, averaged across observers and calibrated according to the cohort’s settings specifications. For multi-species sightings, these numbers represent the number of individuals for the single species represented in the row (i.e., the original group size estimate has been scaled by the percentage attritbuted to this species).</p></li>
<li><p>The columns following those group size estimates (<code>prob</code> through <code>calibr</code>) detail how group sizes were estimated: <code>prob</code> indicates whether probable species codes were accepted; <code>mixed</code> indicates whether this species’ sighting is part of a mixed-species sighting; <code>n_sp</code> provides the number of species occurring in this sighitng; <code>n_obs</code> gives the number of observers who contributed group size estimates; <code>n_best</code> through <code>n_high</code> gives the number of valid group size estimates given; and <code>calibr</code> indicates whether or not calibration was attempted for this sighting based on the settings (see next section).</p></li>
<li><p>As explained above, the final column, <code>included</code>, indicates whether this species should be included in the analysis.</p></li>
</ul>
<p>Here is a glimpse of the data:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="processing.html#cb29-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>fkw_insular<span class="op">$</span>distance<span class="op">$</span>sightings <span class="op">%&gt;%</span><span class="st"> </span>glimpse</span>
<span id="cb29-2"><a href="processing.html#cb29-2"></a><span class="co">## Rows: 328</span></span>
<span id="cb29-3"><a href="processing.html#cb29-3"></a><span class="co">## Columns: 83</span></span>
<span id="cb29-4"><a href="processing.html#cb29-4"></a><span class="co">## $ Event            &lt;chr&gt; &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;, &quot;S&quot;…</span></span>
<span id="cb29-5"><a href="processing.html#cb29-5"></a><span class="co">## $ DateTime         &lt;dttm&gt; 2020-01-19 07:50:21, 2020-01-19 07:56:55, 2020-01-19…</span></span>
<span id="cb29-6"><a href="processing.html#cb29-6"></a><span class="co">## $ Lat              &lt;dbl&gt; 21.90533, 21.92350, 21.92350, 21.94600, 21.96067, 22.…</span></span>
<span id="cb29-7"><a href="processing.html#cb29-7"></a><span class="co">## $ Lon              &lt;dbl&gt; -159.7832, -159.7875, -159.7875, -159.7707, -159.7908…</span></span>
<span id="cb29-8"><a href="processing.html#cb29-8"></a><span class="co">## $ OnEffort         &lt;lgl&gt; TRUE, TRUE, TRUE, FALSE, TRUE, TRUE, TRUE, TRUE, TRUE…</span></span>
<span id="cb29-9"><a href="processing.html#cb29-9"></a><span class="co">## $ Cruise           &lt;dbl&gt; 2001, 2001, 2001, 2001, 2001, 2001, 2001, 2001, 2001,…</span></span>
<span id="cb29-10"><a href="processing.html#cb29-10"></a><span class="co">## $ Mode             &lt;chr&gt; &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;, &quot;C&quot;…</span></span>
<span id="cb29-11"><a href="processing.html#cb29-11"></a><span class="co">## $ OffsetGMT        &lt;int&gt; -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10…</span></span>
<span id="cb29-12"><a href="processing.html#cb29-12"></a><span class="co">## $ EffType          &lt;chr&gt; &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;…</span></span>
<span id="cb29-13"><a href="processing.html#cb29-13"></a><span class="co">## $ ESWsides         &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,…</span></span>
<span id="cb29-14"><a href="processing.html#cb29-14"></a><span class="co">## $ Course           &lt;dbl&gt; 350, 350, 350, 64, 322, 350, 350, 350, 350, 350, 353,…</span></span>
<span id="cb29-15"><a href="processing.html#cb29-15"></a><span class="co">## $ SpdKt            &lt;dbl&gt; 9.9, 9.9, 9.9, 9.3, 9.9, 9.7, 9.7, 9.7, 9.7, 9.7, 10.…</span></span>
<span id="cb29-16"><a href="processing.html#cb29-16"></a><span class="co">## $ Bft              &lt;dbl&gt; 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 6, 5, 4, 4, 4, 4,…</span></span>
<span id="cb29-17"><a href="processing.html#cb29-17"></a><span class="co">## $ SwellHght        &lt;dbl&gt; 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 8, 8, 8, 8, 8, 8,…</span></span>
<span id="cb29-18"><a href="processing.html#cb29-18"></a><span class="co">## $ WindSpdKt        &lt;dbl&gt; 10, 10, 10, 10, 10, 9, 9, 9, 9, 9, 12, 12, 22, 21, 14…</span></span>
<span id="cb29-19"><a href="processing.html#cb29-19"></a><span class="co">## $ RainFog          &lt;dbl&gt; 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,…</span></span>
<span id="cb29-20"><a href="processing.html#cb29-20"></a><span class="co">## $ HorizSun         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 4, 4, 9, 12, …</span></span>
<span id="cb29-21"><a href="processing.html#cb29-21"></a><span class="co">## $ VertSun          &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 2, 2, 1, 1, 1…</span></span>
<span id="cb29-22"><a href="processing.html#cb29-22"></a><span class="co">## $ Glare            &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, FALSE, FALSE,…</span></span>
<span id="cb29-23"><a href="processing.html#cb29-23"></a><span class="co">## $ Vis              &lt;dbl&gt; 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0…</span></span>
<span id="cb29-24"><a href="processing.html#cb29-24"></a><span class="co">## $ ObsL             &lt;chr&gt; &quot;126&quot;, &quot;126&quot;, &quot;126&quot;, &quot;126&quot;, &quot;227&quot;, &quot;197&quot;, &quot;197&quot;, &quot;197…</span></span>
<span id="cb29-25"><a href="processing.html#cb29-25"></a><span class="co">## $ Rec              &lt;chr&gt; &quot;307&quot;, &quot;307&quot;, &quot;307&quot;, &quot;307&quot;, &quot;126&quot;, &quot;227&quot;, &quot;227&quot;, &quot;227…</span></span>
<span id="cb29-26"><a href="processing.html#cb29-26"></a><span class="co">## $ ObsR             &lt;chr&gt; &quot;238&quot;, &quot;238&quot;, &quot;238&quot;, &quot;238&quot;, &quot;307&quot;, &quot;126&quot;, &quot;126&quot;, &quot;126…</span></span>
<span id="cb29-27"><a href="processing.html#cb29-27"></a><span class="co">## $ ObsInd           &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb29-28"><a href="processing.html#cb29-28"></a><span class="co">## $ EffortDot        &lt;lgl&gt; TRUE, TRUE, TRUE, FALSE, TRUE, TRUE, TRUE, TRUE, TRUE…</span></span>
<span id="cb29-29"><a href="processing.html#cb29-29"></a><span class="co">## $ EventNum         &lt;chr&gt; &quot;028&quot;, &quot;033&quot;, &quot;033&quot;, &quot;046&quot;, &quot;073&quot;, &quot;090&quot;, &quot;094&quot;, &quot;098…</span></span>
<span id="cb29-30"><a href="processing.html#cb29-30"></a><span class="co">## $ file_das         &lt;chr&gt; &quot;HICEASwinter2020.das&quot;, &quot;HICEASwinter2020.das&quot;, &quot;HICE…</span></span>
<span id="cb29-31"><a href="processing.html#cb29-31"></a><span class="co">## $ line_num         &lt;int&gt; 28, 34, 34, 50, 78, 96, 101, 107, 116, 122, 136, 141,…</span></span>
<span id="cb29-32"><a href="processing.html#cb29-32"></a><span class="co">## $ stratum_HI_EEZ   &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE,…</span></span>
<span id="cb29-33"><a href="processing.html#cb29-33"></a><span class="co">## $ stratum_WHICEAS  &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE,…</span></span>
<span id="cb29-34"><a href="processing.html#cb29-34"></a><span class="co">## $ stratum_OtherCNP &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE,…</span></span>
<span id="cb29-35"><a href="processing.html#cb29-35"></a><span class="co">## $ study_area       &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE,…</span></span>
<span id="cb29-36"><a href="processing.html#cb29-36"></a><span class="co">## $ year             &lt;dbl&gt; 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020, 2020,…</span></span>
<span id="cb29-37"><a href="processing.html#cb29-37"></a><span class="co">## $ month            &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span id="cb29-38"><a href="processing.html#cb29-38"></a><span class="co">## $ day              &lt;int&gt; 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 1…</span></span>
<span id="cb29-39"><a href="processing.html#cb29-39"></a><span class="co">## $ yday             &lt;dbl&gt; 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 1…</span></span>
<span id="cb29-40"><a href="processing.html#cb29-40"></a><span class="co">## $ km_int           &lt;dbl&gt; 0.00000e+00, 0.00000e+00, 0.00000e+00, 9.49353e-05, 0…</span></span>
<span id="cb29-41"><a href="processing.html#cb29-41"></a><span class="co">## $ km_cum           &lt;dbl&gt; 5.690975, 7.647290, 7.647290, 11.191549, 17.308522, 2…</span></span>
<span id="cb29-42"><a href="processing.html#cb29-42"></a><span class="co">## $ ship             &lt;chr&gt; &quot;OES&quot;, &quot;OES&quot;, &quot;OES&quot;, &quot;OES&quot;, &quot;OES&quot;, &quot;OES&quot;, &quot;OES&quot;, &quot;OES…</span></span>
<span id="cb29-43"><a href="processing.html#cb29-43"></a><span class="co">## $ stratum          &lt;chr&gt; &quot;HI_EEZ&amp;WHICEAS&amp;OtherCNP&quot;, &quot;HI_EEZ&amp;WHICEAS&amp;OtherCNP&quot;,…</span></span>
<span id="cb29-44"><a href="processing.html#cb29-44"></a><span class="co">## $ seg_id           &lt;int&gt; 96, 96, 96, 7, 96, 96, 96, 96, 96, 96, 96, 96, 107, 9…</span></span>
<span id="cb29-45"><a href="processing.html#cb29-45"></a><span class="co">## $ use              &lt;lgl&gt; TRUE, TRUE, TRUE, FALSE, TRUE, TRUE, TRUE, TRUE, TRUE…</span></span>
<span id="cb29-46"><a href="processing.html#cb29-46"></a><span class="co">## $ SightNo          &lt;chr&gt; &quot;001&quot;, &quot;002&quot;, &quot;002&quot;, &quot;003&quot;, &quot;004&quot;, &quot;005&quot;, &quot;006&quot;, &quot;007…</span></span>
<span id="cb29-47"><a href="processing.html#cb29-47"></a><span class="co">## $ Subgroup         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb29-48"><a href="processing.html#cb29-48"></a><span class="co">## $ SightNoDaily     &lt;chr&gt; &quot;20200119_1&quot;, &quot;20200119_2&quot;, &quot;20200119_2&quot;, &quot;20200119_3…</span></span>
<span id="cb29-49"><a href="processing.html#cb29-49"></a><span class="co">## $ Obs              &lt;chr&gt; &quot;126&quot;, &quot;238&quot;, &quot;238&quot;, &quot;126&quot;, &quot;307&quot;, &quot;126&quot;, &quot;197&quot;, &quot;126…</span></span>
<span id="cb29-50"><a href="processing.html#cb29-50"></a><span class="co">## $ ObsStd           &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE,…</span></span>
<span id="cb29-51"><a href="processing.html#cb29-51"></a><span class="co">## $ Bearing          &lt;dbl&gt; 274, 25, 25, 85, 29, 20, 321, 28, 336, 345, 45, 19, 2…</span></span>
<span id="cb29-52"><a href="processing.html#cb29-52"></a><span class="co">## $ Reticle          &lt;dbl&gt; 0.4, 1.4, 1.4, NA, 0.1, 2.2, 2.4, 0.4, 0.8, NA, NA, 3…</span></span>
<span id="cb29-53"><a href="processing.html#cb29-53"></a><span class="co">## $ DistNm           &lt;dbl&gt; 3.75, 2.17, 2.17, 0.50, 5.27, 1.66, 1.57, 3.75, 2.87,…</span></span>
<span id="cb29-54"><a href="processing.html#cb29-54"></a><span class="co">## $ Cue              &lt;dbl&gt; 6, 3, 3, 6, 3, 6, 6, 6, 6, 6, 2, 6, 3, 3, 6, 6, 6, 2,…</span></span>
<span id="cb29-55"><a href="processing.html#cb29-55"></a><span class="co">## $ Method           &lt;dbl&gt; 4, 4, 4, 1, 4, 4, 4, 4, 4, 1, 1, 4, 1, 4, 4, 1, 4, 4,…</span></span>
<span id="cb29-56"><a href="processing.html#cb29-56"></a><span class="co">## $ Photos           &lt;chr&gt; &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;Y&quot;, &quot;N&quot;…</span></span>
<span id="cb29-57"><a href="processing.html#cb29-57"></a><span class="co">## $ Birds            &lt;chr&gt; &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;…</span></span>
<span id="cb29-58"><a href="processing.html#cb29-58"></a><span class="co">## $ CalibSchool      &lt;chr&gt; &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;…</span></span>
<span id="cb29-59"><a href="processing.html#cb29-59"></a><span class="co">## $ PhotosAerial     &lt;chr&gt; &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;…</span></span>
<span id="cb29-60"><a href="processing.html#cb29-60"></a><span class="co">## $ Biopsy           &lt;chr&gt; &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;, &quot;N&quot;…</span></span>
<span id="cb29-61"><a href="processing.html#cb29-61"></a><span class="co">## $ CourseSchool     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb29-62"><a href="processing.html#cb29-62"></a><span class="co">## $ TurtleSp         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb29-63"><a href="processing.html#cb29-63"></a><span class="co">## $ TurtleGs         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb29-64"><a href="processing.html#cb29-64"></a><span class="co">## $ TurtleJFR        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb29-65"><a href="processing.html#cb29-65"></a><span class="co">## $ TurtleAge        &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb29-66"><a href="processing.html#cb29-66"></a><span class="co">## $ TurtleCapt       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb29-67"><a href="processing.html#cb29-67"></a><span class="co">## $ PinnipedSp       &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb29-68"><a href="processing.html#cb29-68"></a><span class="co">## $ PinnipedGs       &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb29-69"><a href="processing.html#cb29-69"></a><span class="co">## $ BoatType         &lt;chr&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb29-70"><a href="processing.html#cb29-70"></a><span class="co">## $ BoatGs           &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N…</span></span>
<span id="cb29-71"><a href="processing.html#cb29-71"></a><span class="co">## $ PerpDistKm       &lt;dbl&gt; 6.9280823, 1.6984352, 1.6984352, 0.9224763, 4.7317613…</span></span>
<span id="cb29-72"><a href="processing.html#cb29-72"></a><span class="co">## $ species          &lt;chr&gt; &quot;079&quot;, &quot;018&quot;, &quot;002&quot;, &quot;079&quot;, &quot;076&quot;, &quot;076&quot;, &quot;076&quot;, &quot;076…</span></span>
<span id="cb29-73"><a href="processing.html#cb29-73"></a><span class="co">## $ best             &lt;dbl&gt; 1.000000, 18.457718, 3.342736, 1.000000, 2.000000, 2.…</span></span>
<span id="cb29-74"><a href="processing.html#cb29-74"></a><span class="co">## $ low              &lt;dbl&gt; 1.000000, 14.678351, 2.658284, 1.000000, 1.000000, 2.…</span></span>
<span id="cb29-75"><a href="processing.html#cb29-75"></a><span class="co">## $ high             &lt;dbl&gt; 1.000000, 29.347776, 5.314952, 1.000000, 2.000000, 2.…</span></span>
<span id="cb29-76"><a href="processing.html#cb29-76"></a><span class="co">## $ prob             &lt;lgl&gt; FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALSE, FALS…</span></span>
<span id="cb29-77"><a href="processing.html#cb29-77"></a><span class="co">## $ mixed            &lt;lgl&gt; FALSE, TRUE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE,…</span></span>
<span id="cb29-78"><a href="processing.html#cb29-78"></a><span class="co">## $ ss_tot           &lt;dbl&gt; 1.000000, 21.800454, 21.800454, 1.000000, 2.000000, 2…</span></span>
<span id="cb29-79"><a href="processing.html#cb29-79"></a><span class="co">## $ ss_percent       &lt;dbl&gt; 1.0000000, 0.8466667, 0.1533333, 1.0000000, 1.0000000…</span></span>
<span id="cb29-80"><a href="processing.html#cb29-80"></a><span class="co">## $ n_sp             &lt;dbl&gt; 1, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…</span></span>
<span id="cb29-81"><a href="processing.html#cb29-81"></a><span class="co">## $ n_obs            &lt;int&gt; 1, 3, 3, 1, 1, 1, 2, 1, 1, 2, 1, 1, 1, 3, 1, 1, 1, 2,…</span></span>
<span id="cb29-82"><a href="processing.html#cb29-82"></a><span class="co">## $ n_best           &lt;int&gt; 1, 3, 3, 1, 1, 1, 2, 1, 1, 2, 1, 1, 1, 3, 1, 1, 1, 2,…</span></span>
<span id="cb29-83"><a href="processing.html#cb29-83"></a><span class="co">## $ n_low            &lt;int&gt; 1, 3, 3, 1, 1, 1, 2, 1, 1, 2, 1, 1, 1, 3, 1, 1, 1, 2,…</span></span>
<span id="cb29-84"><a href="processing.html#cb29-84"></a><span class="co">## $ n_high           &lt;int&gt; 1, 3, 3, 1, 1, 1, 2, 1, 1, 2, 1, 1, 1, 3, 1, 1, 1, 2,…</span></span>
<span id="cb29-85"><a href="processing.html#cb29-85"></a><span class="co">## $ calibr           &lt;lgl&gt; TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE,…</span></span>
<span id="cb29-86"><a href="processing.html#cb29-86"></a><span class="co">## $ included         &lt;lgl&gt; FALSE, TRUE, TRUE, FALSE, TRUE, TRUE, TRUE, TRUE, TRU…</span></span></code></pre></div>
<p>Note that the <code>process_sightings()</code> function draws upon <code>cruz$settings</code> for inclusion criteria, but some of those settings can be overridden with the function’s manual inputs if you want to explore your options (see below).</p>
</div>
<div id="ss_calibration" class="section level4 unnumbered">
<h4>School size estimates</h4>
<p>In the settings we are using in this tutorial, school size estimates are adjusted using the calibration models from <a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C43&amp;q=barlow+1998+group+size+caliration&amp;btnG=">Barlow, Gerrodette, and Perryman (1998)</a> (their analysis is refined slightly and further explained in <a href="https://scholar.google.com/scholar?hl=en&amp;as_sdt=0%2C43&amp;q=barlow+1998+group+size+caliration&amp;btnG=">Gerrodette, Perryman and Barlow, 2002</a>). These calibration corrections are observer-specific. Some observers tend to underestimate school size and their estimates are adjusted up; others tend to overestimate and their estimates are adjusted down. Some observers do not have calibration coefficients, and for them a generic adjustment (upwards, by dividing estimates by 0.8625) is used. Each observer’s estimate is calibrated, then all observer estimates are averaged. To do that averaging, our <code>settings</code> specify that we shall use a geometric weighted mean, instead of an arithmetic mean, that weights school size estimates from multiple observers according to the variance of their calibration coefficients.</p>
<p>Here are our current best estimates of school size:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="processing.html#cb30-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>default<span class="op">$</span>density<span class="op">$</span>sightings<span class="op">$</span>best <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">20</span>)</span>
<span id="cb30-2"><a href="processing.html#cb30-2"></a><span class="co">##  [1]  1.000000 18.457718  3.342736  1.000000  2.000000  2.000000  2.000000</span></span>
<span id="cb30-3"><a href="processing.html#cb30-3"></a><span class="co">##  [8]  3.000000  2.000000  2.000000  1.000000  1.000000  1.000000 69.279021</span></span>
<span id="cb30-4"><a href="processing.html#cb30-4"></a><span class="co">## [15]  1.000000  1.000000  4.637681  7.777628  1.000000  1.000000</span></span></code></pre></div>
<p>Let’s compare those estimates to unadjusted ones, in which calibration (and therefore weighted geometric mean) is turned off:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="processing.html#cb31-1"></a>cruz_demo &lt;-<span class="st"> </span><span class="kw">process_sightings</span>(cruz, </span>
<span id="cb31-2"><a href="processing.html#cb31-2"></a>                               <span class="dt">calibrate =</span> <span class="ot">FALSE</span>,</span>
<span id="cb31-3"><a href="processing.html#cb31-3"></a>                               <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</span>
<span id="cb31-4"><a href="processing.html#cb31-4"></a>cruz_demo<span class="op">$</span>cohorts<span class="op">$</span>default<span class="op">$</span>density<span class="op">$</span>sightings<span class="op">$</span>best <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">20</span>)</span>
<span id="cb31-5"><a href="processing.html#cb31-5"></a><span class="co">##  [1]  1.000000 19.077486  3.454978  1.000000  2.000000  2.000000  2.000000</span></span>
<span id="cb31-6"><a href="processing.html#cb31-6"></a><span class="co">##  [8]  3.000000  2.000000  2.000000  1.000000  1.000000  1.000000 62.970508</span></span>
<span id="cb31-7"><a href="processing.html#cb31-7"></a><span class="co">## [15]  1.000000  1.000000  4.000000  6.708204  1.000000  1.000000</span></span></code></pre></div>
<p>Note that, since calibration is only used for schools above a certain size, the difference between calibration and non-calibrated estimates becomes clearer in larger groups.</p>
<p>You can also carry out calibration corrections without using a geometric weighted mean (the arithmetic mean will be used instead):</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="processing.html#cb32-1"></a>cruz_demo &lt;-<span class="st"> </span><span class="kw">process_sightings</span>(cruz, </span>
<span id="cb32-2"><a href="processing.html#cb32-2"></a>                               <span class="dt">calibrate =</span> <span class="ot">TRUE</span>,</span>
<span id="cb32-3"><a href="processing.html#cb32-3"></a>                               <span class="dt">geometric_mean =</span> <span class="ot">FALSE</span>,</span>
<span id="cb32-4"><a href="processing.html#cb32-4"></a>                               <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</span>
<span id="cb32-5"><a href="processing.html#cb32-5"></a></span>
<span id="cb32-6"><a href="processing.html#cb32-6"></a>cruz_demo<span class="op">$</span>cohorts<span class="op">$</span>default<span class="op">$</span>density<span class="op">$</span>sightings<span class="op">$</span>best <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">head</span>(<span class="dv">20</span>)</span>
<span id="cb32-7"><a href="processing.html#cb32-7"></a><span class="co">##  [1]  1.000000 20.945347  3.793252  1.000000  2.000000  2.000000  2.000000</span></span>
<span id="cb32-8"><a href="processing.html#cb32-8"></a><span class="co">##  [8]  3.000000  2.000000  2.000000  1.000000  1.000000  1.000000 86.815274</span></span>
<span id="cb32-9"><a href="processing.html#cb32-9"></a><span class="co">## [15]  1.000000  1.000000  4.637681  8.115942  1.000000  1.000000</span></span></code></pre></div>
<p>Note that when <code>geometric_mean = TRUE</code> but calibration is not carried out, the simple geometric mean is calculated instead of the <em>weighted</em> geometric mean, since the weights are the variance estimates from the calibration routine.</p>
<p>Also note that school size calibration is only carried out if <code>settings$group_size_calibration</code> is not <code>NULL</code>. However, even when calibration coefficients <em>are</em> provided, calibration is only carried out for raw estimates above a minimum threshold, since observers are unlikely to mis-estimate the school size of a lone whale or pair. For observers who have calibration coefficients in the <code>settings$group_size_coefficients</code> table, that minimum is specified for each observer individually. For observers not in that table, calibration will only be applied to raw school size estimates of 4 or above.</p>
</div>
</div>
</div>
<div id="review" class="section level2 unnumbered">
<h2>Review</h2>
<p>By the end of this process, you have a single data object, <code>cruz</code>, with all the data you need to move forward into the next stages of mapping and analysis.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="processing.html#cb33-1"></a>cruz <span class="op">%&gt;%</span><span class="st"> </span>names </span>
<span id="cb33-2"><a href="processing.html#cb33-2"></a><span class="co">## [1] &quot;settings&quot;   &quot;strata&quot;     &quot;study_area&quot; &quot;cohorts&quot;</span></span></code></pre></div>
<p>Each species-specific cohort has its own list under <code>cruz$cohorts</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="processing.html#cb34-1"></a>cruz<span class="op">$</span>cohorts <span class="op">%&gt;%</span><span class="st"> </span>names </span>
<span id="cb34-2"><a href="processing.html#cb34-2"></a><span class="co">## [1] &quot;default&quot;     &quot;fkw_insular&quot;</span></span></code></pre></div>
<p>Each of these cohorts can have two lists, <code>density</code> and <code>distance</code>, which contain the data to be used in those density estimation and detection function estimation, respectively:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="processing.html#cb35-1"></a><span class="kw">str</span>(cruz<span class="op">$</span>cohorts,</span>
<span id="cb35-2"><a href="processing.html#cb35-2"></a>    <span class="dt">max.level=</span><span class="dv">2</span>,</span>
<span id="cb35-3"><a href="processing.html#cb35-3"></a>    <span class="dt">list.len =</span> <span class="dv">10</span>,</span>
<span id="cb35-4"><a href="processing.html#cb35-4"></a>    <span class="dt">vec.len =</span> <span class="dv">0</span>,</span>
<span id="cb35-5"><a href="processing.html#cb35-5"></a>    <span class="dt">give.length =</span> <span class="ot">FALSE</span>,</span>
<span id="cb35-6"><a href="processing.html#cb35-6"></a>    <span class="dt">give.attr =</span> <span class="ot">FALSE</span>)</span>
<span id="cb35-7"><a href="processing.html#cb35-7"></a><span class="co">## List of 2</span></span>
<span id="cb35-8"><a href="processing.html#cb35-8"></a><span class="co">##  $ default    :List of 1</span></span>
<span id="cb35-9"><a href="processing.html#cb35-9"></a><span class="co">##   ..$ density:List of 3</span></span>
<span id="cb35-10"><a href="processing.html#cb35-10"></a><span class="co">##  $ fkw_insular:List of 2</span></span>
<span id="cb35-11"><a href="processing.html#cb35-11"></a><span class="co">##   ..$ density :List of 3</span></span>
<span id="cb35-12"><a href="processing.html#cb35-12"></a><span class="co">##   ..$ distance:List of 3</span></span></code></pre></div>
<p>Each of these <code>analysis</code> slots is a list with the same elements:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="processing.html#cb36-1"></a>cruz<span class="op">$</span>cohorts<span class="op">$</span>default<span class="op">$</span>density <span class="op">%&gt;%</span><span class="st"> </span>names</span>
<span id="cb36-2"><a href="processing.html#cb36-2"></a><span class="co">## [1] &quot;segments&quot;  &quot;das&quot;       &quot;sightings&quot;</span></span></code></pre></div>
<ul>
<li><p><code>segments</code> is a summary table of segments.</p></li>
<li><p><code>das</code> is the raw <code>DAS</code> data, modified with <code>seg_id</code> to associate each row with a segment.</p></li>
<li><p><code>sightings</code> is a dataframe of sightings processed according to this cohort’s settings.</p></li>
</ul>
<p>In each dataframes for each cohort-analysis (e.g., <code>default$density</code>), there are three critically important columns to keep in mind:</p>
<ul>
<li><p><strong><code>seg_id</code></strong>: this column is used to indicate the segment ID a row of data belongs to.</p></li>
<li><p><strong><code>use</code></strong>: this column indicates whether a row of effort should be used in the analysis. Every row of data within a single segment with have the same <code>use</code> value.</p></li>
<li><p><strong><code>included</code></strong>: this column occurs in the <code>sightings</code> dataframe only. It indicates whether the sightings should be included in the analysis based on the specified settings. Any sighting with <code>use == FALSE</code> will also have <code>included == FALSE</code>, but it <em>is</em> possible for sightings to have <code>use == TRUE</code> with <code>included == FALSE</code>. For example, if the setting <code>abeam_sightings</code> is set to <code>FALSE</code>, a sighting with a bearing angle beyond the ship’s beam can be excluded from the analysis (<code>included == FALSE</code>) even though the effort segment it occurs within will still be used (<code>use == TRUE</code>).</p></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="settings.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="maps.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/emk-noaa/emk-noaa.github.io03-processing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["vignette.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
