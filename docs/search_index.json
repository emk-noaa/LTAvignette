[["filter.html", " 5 Filter &amp; combine surveys Filter Combine", " 5 Filter &amp; combine surveys You may soon encounter the need to filter a processed cruz object to only certain years, regions, or cruise numbers. You may also need to combine one processed cruz object with another. Here we will continue with the cruz object we created on the previous page. As a reminder, here is the data structure of that object: cruz_structure(cruz) ## &quot;cruz&quot; list structure ======================== ## ## $settings ## $strata --- with 11 polygon coordinate sets ## $survey --- with 10 input arguments ## $cohorts --- with 3 cohorts specified, each with 19 input arguments ## ## $strata ## ... containing a summary dataframe of 11 geostrata and their spatial areas ## ... geostratum names: ## HI_EEZ, OtherCNP, MHI, WHICEAS, Spotted_OU, Spotted_FI, Spotted_BI, Bottlenose_KaNi, Bottlenose_OUFI, Bottlenose_BI, NWHI ## ## $cohorts ## ## $all ## geostrata: WHICEAS, HI_EEZ, OtherCNP ## $segments --- with 1888 segments (median = 149.3 km) ## $das --- with 329609 data rows ## $sightings --- with 3932 detections ## $subgroups --- with 255 subgroups, 49 sightings, and 389 events ## ## $bottlenose ## geostrata: WHICEAS, HI_EEZ, OtherCNP, Bottlenose_BI, Bottlenose_OUFI, Bottlenose_KaNi ## $segments --- with 2049 segments (median = 148.8 km) ## $das --- with 329609 data rows ## $sightings --- with 522 detections ## ## $spotted ## geostrata: WHICEAS, HI_EEZ, OtherCNP, Spotted_OU, Spotted_FI, Spotted_BI ## $segments --- with 2053 segments (median = 148.5 km) ## $das --- with 329609 data rows ## $sightings --- with 527 detections Filter LTabundR lets you filter a cruz object using the function filter_cruz(). For example, in our WHICEAS case study, we processed surveys from 1986 - 2020, which we needed to do to model our detection functions, but our interest for mapping is specifically valid effort in 2017 and 2020 only, and only within the \"WHICEAS\" geostratum. cruz_1720 &lt;- filter_cruz(cruz, analysis_only = TRUE, years = c(2017, 2020), regions = &#39;WHICEAS&#39;) ## ======== Cohort all ======== ## --- Pre-filtering: ## --- --- DAS rows: 329609 ## --- --- Segments: 1888 ## --- --- Sightings: 3932 ## --- --- Subgroups: ## --- --- --- Sightings: 49 ## --- --- --- Subgroups: 255 ## --- --- --- Events: 389 ## ## --- Filtering ... ## ## --- Post-filtering: ## --- --- DAS rows: 29415 ## --- --- Segments: 108 ## --- --- Sightings: 379 ## --- --- Subgroups: ## --- --- --- Sightings: 8 ## --- --- --- Subgroups: 47 ## --- --- --- Events: 76 ## ## ======== Cohort bottlenose ======== ## --- Pre-filtering: ## --- --- DAS rows: 329609 ## --- --- Segments: 2049 ## --- --- Sightings: 522 ## --- --- Subgroups: ## --- --- --- Sightings: ## --- --- --- Subgroups: ## --- --- --- Events: ## ## --- Filtering ... ## ## --- Post-filtering: ## --- --- DAS rows: 29413 ## --- --- Segments: 137 ## --- --- Sightings: 49 ## --- --- Subgroups: ## --- --- --- Sightings: ## --- --- --- Subgroups: ## --- --- --- Events: ## ## ======== Cohort spotted ======== ## --- Pre-filtering: ## --- --- DAS rows: 329609 ## --- --- Segments: 2053 ## --- --- Sightings: 527 ## --- --- Subgroups: ## --- --- --- Sightings: ## --- --- --- Subgroups: ## --- --- --- Events: ## ## --- Filtering ... ## ## --- Post-filtering: ## --- --- DAS rows: 29415 ## --- --- Segments: 139 ## --- --- Sightings: 35 ## --- --- Subgroups: ## --- --- --- Sightings: ## --- --- --- Subgroups: ## --- --- --- Events: ## We will use this filtered cruz object for mapping &amp; sightings summaries downstream. save(cruz_1720,file=&#39;whiceas_cruz_1720.RData&#39;) Note that filter_cruz() has many other filter options. See ?filter_cruz() for details. Combine Say you have two processed cruz objects: one containing survey effort from the Hawaiian EEZ (HI_EEZ) geostratum area only, and one containing survey effort from everywhere else that does not include HI_EEZ effort. Letâ€™s make those fake datasets right now, using filter_cruz(): Hawaiian EEZ-only data: cruz_hi &lt;- filter_cruz(cruz, regions = &#39;HI_EEZ&#39;, verbose = FALSE) Pelagic Hawaiian EEZ - only data: cruz_other &lt;- filter_cruz(cruz, not_regions = &#39;HI_EEZ&#39;, verbose = FALSE) Say you want to combine these datasets together in order to reconstruct the equivalent of our original cruz object. You can do this with the LTabundR function, cruz_combine(). # Make a list of cruz objects cruzes &lt;- list(cruz_hi, cruz_other) # Now combine cruz_demo &lt;- cruz_combine(cruzes) ## Adding unique identifiers to each cruz object line ... ## --- cruz object 1 ... ## --- --- cohort 1 ... ## --- --- cohort 2 ... ## --- --- cohort 3 ... ## --- cruz object 2 ... ## --- --- cohort 1 ... ## --- --- cohort 2 ... ## --- --- cohort 3 ... ## ## Combining multiple cruz objects together ... ## --- processing cruz object 2 . . . ## --- --- combining cohort &quot;all&quot; ... ## --- --- --- number of segments to add from new cruz object: 875 ## --- --- --- --- (after checking for redundancy): 875 ## --- --- --- number of sightings to add from new cruz object: 2139 ## --- --- --- --- (after checking for redundancy): 2139 ## --- --- --- number of DAS rows to add from new cruz object: 126222 ## --- --- --- --- (after checking for redundancy): 126222 ## --- --- combining cohort &quot;bottlenose&quot; ... ## --- --- --- number of segments to add from new cruz object: 875 ## --- --- --- --- (after checking for redundancy): 875 ## --- --- --- number of sightings to add from new cruz object: 245 ## --- --- --- --- (after checking for redundancy): 245 ## --- --- --- number of DAS rows to add from new cruz object: 126222 ## --- --- --- --- (after checking for redundancy): 126222 ## --- --- combining cohort &quot;spotted&quot; ... ## --- --- --- number of segments to add from new cruz object: 875 ## --- --- --- --- (after checking for redundancy): 875 ## --- --- --- number of sightings to add from new cruz object: 412 ## --- --- --- --- (after checking for redundancy): 412 ## --- --- --- number of DAS rows to add from new cruz object: 126222 ## --- --- --- --- (after checking for redundancy): 126222 Re-constituted data structure: cruz_structure(cruz_demo) ## &quot;cruz&quot; list structure ======================== ## ## $settings ## $strata --- with 11 polygon coordinate sets ## $survey --- with 10 input arguments ## $cohorts --- with 3 cohorts specified, each with 19 input arguments ## ## $strata ## ... containing a summary dataframe of 11 geostrata and their spatial areas ## ... geostratum names: ## HI_EEZ, OtherCNP, MHI, WHICEAS, Spotted_OU, Spotted_FI, Spotted_BI, Bottlenose_KaNi, Bottlenose_OUFI, Bottlenose_BI, NWHI ## ## $cohorts ## ## $all ## geostrata: WHICEAS, HI_EEZ, OtherCNP ## $segments --- with 1888 segments (median = 149.3 km) ## $das --- with 329609 data rows ## $sightings --- with 3932 detections ## $subgroups --- with 237 subgroups, 37 sightings, and 345 events ## ## $bottlenose ## geostrata: WHICEAS, HI_EEZ, OtherCNP, Bottlenose_BI, Bottlenose_OUFI, Bottlenose_KaNi ## $segments --- with 2049 segments (median = 148.8 km) ## $das --- with 329609 data rows ## $sightings --- with 522 detections ## ## $spotted ## geostrata: WHICEAS, HI_EEZ, OtherCNP, Spotted_OU, Spotted_FI, Spotted_BI ## $segments --- with 2053 segments (median = 148.5 km) ## $das --- with 329609 data rows ## $sightings --- with 527 detections "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
