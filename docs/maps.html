<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 4 Maps | User’s guide for LTabundR</title>
  <meta name="description" content="vignette" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content=" 4 Maps | User’s guide for LTabundR" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="vignette" />
  <meta name="github-repo" content="emk-noaa/emk-noaa.github.io" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 4 Maps | User’s guide for LTabundR" />
  
  <meta name="twitter:description" content="vignette" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="processing.html"/>
<link rel="next" href="filter.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.23/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">WinCruz analysis</a></li>

<li class="divider"></li>
<li><a href="index.html#overview">Overview<span></span></a></li>
<li class="part"><span><b>I Data processing<span></span></b></span></li>
<li class="chapter" data-level="1" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>1</b> Install <code>LTabundR</code><span></span></a><ul>
<li><a href="install.html#option-1-install-from-github">Option 1: Install from GitHub<span></span></a></li>
<li><a href="install.html#option-2-install-locally">Option 2: Install locally<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="settings.html"><a href="settings.html"><i class="fa fa-check"></i><b>2</b> Settings<span></span></a><ul>
<li><a href="settings.html#survey-strata">Survey strata<span></span></a></li>
<li><a href="settings.html#survey-wide-settings">Survey-wide settings<span></span></a></li>
<li><a href="settings.html#cohort-specific-settings">Cohort-specific settings<span></span></a></li>
<li><a href="settings.html#example-code">Example code<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="processing.html"><a href="processing.html"><i class="fa fa-check"></i><b>3</b> Data processing<span></span></a><ul>
<li><a href="processing.html#behind-the-scenes">Behind the scenes<span></span></a></li>
<li><a href="processing.html#review">Review<span></span></a></li>
</ul></li>
<li class="part"><span><b>II Data exploration<span></span></b></span></li>
<li class="chapter" data-level="4" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>4</b> Maps<span></span></a><ul>
<li><a href="maps.html#publishable-maps">Publishable maps<span></span></a></li>
<li><a href="maps.html#interactive-maps">Interactive maps<span></span></a></li>
<li><a href="maps.html#interactive-dashboard">Interactive dashboard<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="filter.html"><a href="filter.html"><i class="fa fa-check"></i><b>5</b> Filter &amp; combine surveys<span></span></a><ul>
<li><a href="filter.html#filter-1">Filter<span></span></a></li>
<li><a href="filter.html#combine">Combine<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="summarize.html"><a href="summarize.html"><i class="fa fa-check"></i><b>6</b> Summarize survey<span></span></a><ul>
<li><a href="summarize.html#summarize-effort">Summarize effort<span></span></a></li>
<li><a href="summarize.html#summarize-by-beaufort">Summarize by Beaufort<span></span></a></li>
<li><a href="summarize.html#summarize-sightings">Summarize sightings<span></span></a></li>
<li><a href="summarize.html#summarize-certain-species">Summarize certain species<span></span></a></li>
<li><a href="summarize.html#cruz_explorer"><code>cruz_explorer()</code><span></span></a></li>
</ul></li>
<li class="part"><span><b>III Data analysis<span></span></b></span></li>
<li class="chapter" data-level="7" data-path="g0.html"><a href="g0.html"><i class="fa fa-check"></i><b>7</b> Estimating g(0)<span></span></a><ul>
<li><a href="g0.html#relative-g0">Relative <code>g(0)</code><span></span></a></li>
<li><a href="g0.html#weighted-average-g0">Weighted average <code>g(0)</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lta.html"><a href="lta.html"><i class="fa fa-check"></i><b>8</b> Line-transect analysis<span></span></a><ul>
<li><a href="lta.html#key-inputs">Key inputs<span></span></a></li>
<li><a href="lta.html#variance-estimation">Variance estimation<span></span></a></li>
<li><a href="lta.html#other-inputs">Other inputs<span></span></a></li>
<li><a href="lta.html#output">Output<span></span></a></li>
<li><a href="lta.html#unusual-estimate-scenarios">Unusual estimate scenarios<span></span></a></li>
<li><a href="lta.html#behind-the-scenes-1">Behind the scenes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="destratify.html"><a href="destratify.html"><i class="fa fa-check"></i><b>9</b> Stratified analysis<span></span></a></li>
<li class="chapter" data-level="10" data-path="trend-analysis.html"><a href="trend-analysis.html"><i class="fa fa-check"></i><b>10</b> Trend analysis<span></span></a></li>
<li class="chapter" data-level="11" data-path="subgroup-based-analysis.html"><a href="subgroup-based-analysis.html"><i class="fa fa-check"></i><b>11</b> Subgroup-based analysis<span></span></a><ul>
<li><a href="subgroup-based-analysis.html#inputs-1">Inputs<span></span></a></li>
<li><a href="subgroup-based-analysis.html#outputs-1">Outputs<span></span></a></li>
<li><a href="subgroup-based-analysis.html#behind-the-scenes-2">Behind the scenes<span></span></a></li>
</ul></li>
<li class="part"><span><b>IV Reports<span></span></b></span></li>
<li class="chapter" data-level="12" data-path="presenting-results.html"><a href="presenting-results.html"><i class="fa fa-check"></i><b>12</b> Presenting results<span></span></a><ul>
<li><a href="presenting-results.html#tables">Tables<span></span></a></li>
<li><a href="presenting-results.html#plots">Plots<span></span></a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="practicalities.html"><a href="practicalities.html"><i class="fa fa-check"></i><b>13</b> Practicalities<span></span></a></li>
<li class="part"><span><b>V Case studies<span></span></b></span></li>
<li class="chapter" data-level="14" data-path="casestudies.html"><a href="casestudies.html"><i class="fa fa-check"></i><b>14</b> Central North Pacific<span></span></a></li>
<li class="chapter" data-level="15" data-path="california-current-system.html"><a href="california-current-system.html"><i class="fa fa-check"></i><b>15</b> California Current System<span></span></a></li>
<li class="part"><span><b>VI Appendix<span></span></b></span></li>
<li class="chapter" data-level="16" data-path="stratagallery.html"><a href="stratagallery.html"><i class="fa fa-check"></i><b>16</b> Strata gallery<span></span></a><ul>
<li><a href="stratagallery.html#central-north-pacific">Central North Pacific<span></span></a></li>
<li><a href="stratagallery.html#california-current">California Current<span></span></a></li>
<li><a href="stratagallery.html#etp">ETP<span></span></a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="segmentizing.html"><a href="segmentizing.html"><i class="fa fa-check"></i><b>17</b> Segmentizing<span></span></a><ul>
<li><a href="segmentizing.html#approach">Approach<span></span></a></li>
<li><a href="segmentizing.html#defaults-2">Defaults<span></span></a></li>
<li><a href="segmentizing.html#day-vs-equal-length">Day vs Equal Length<span></span></a></li>
<li><a href="segmentizing.html#contiguous-vs.-non-contiguous-effort">Contiguous vs. non-contiguous effort<span></span></a></li>
<li><a href="segmentizing.html#segment-remainder-handling">Segment remainder handling<span></span></a></li>
<li><a href="segmentizing.html#typical-settings">Typical settings<span></span></a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="abund9_compare.html"><a href="abund9_compare.html"><i class="fa fa-check"></i><b>18</b> <code>LTabundR</code> vs. <code>ABUND9</code><span></span></a><ul>
<li><a href="abund9_compare.html#differences-in-total-effort">Differences in total effort<span></span></a></li>
<li><a href="abund9_compare.html#differences-in-on-effort-distance">Differences in on-effort distance<span></span></a></li>
<li><a href="abund9_compare.html#differences-it-total-sightings">Differences it total sightings<span></span></a></li>
<li><a href="abund9_compare.html#differences-in-on-effort-sightings">Differences in on-effort sightings<span></span></a></li>
<li><a href="abund9_compare.html#differences-in-school-size-estimation">Differences in school size estimation<span></span></a></li>
<li><a href="abund9_compare.html#processing-time">Processing time<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="spp_codes.html"><a href="spp_codes.html"><i class="fa fa-check"></i><b>19</b> NOAA/NMFS species codes<span></span></a><ul>
<li><a href="spp_codes.html#table">Table<span></span></a></li>
<li><a href="spp_codes.html#species_translator"><code>species_translator()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="misc_functions.html"><a href="misc_functions.html"><i class="fa fa-check"></i><b>20</b> Miscellaneous functions<span></span></a></li>
<li class="chapter" data-level="21" data-path="backlog.html"><a href="backlog.html"><i class="fa fa-check"></i><b>21</b> Appendix: Backlog<span></span></a></li>
<li><a href="references.html#references">References<span></span></a></li>
<li class="chapter" data-level="22" data-path="versions.html"><a href="versions.html"><i class="fa fa-check"></i><b>22</b> Appendix: Version history<span></span></a></li>
<li class="divider"></li>
<li><a href="https://github.com/emk-noaa/emk-noaa.github.io" target="blank">Eric & Amanda</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">User’s guide for <code>LTabundR</code></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="maps" class="section level1 hasAnchor">
<h1><span class="header-section-number"> 4</span> Maps<a href="maps.html#maps" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>To build a flexible system for mapping cruise data, we have the following functions:</p>
<div id="publishable-maps" class="section level2 unnumbered hasAnchor">
<h2>Publishable maps<a href="maps.html#publishable-maps" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="base-maps" class="section level3 unnumbered hasAnchor">
<h3>Base maps<a href="maps.html#base-maps" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Begin with a basic map, including EEZ borders:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="maps.html#cb54-1"></a>m &lt;-<span class="st"> </span><span class="kw">map_base</span>(<span class="dt">region=</span><span class="st">&#39;cnp&#39;</span>)</span>
<span id="cb54-2"><a href="maps.html#cb54-2"></a>m</span></code></pre></div>
<p><img src="img/map_cnp.png" style="width:95.0%" /></p>
<p>We also have a base map for the California Current …</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="maps.html#cb55-1"></a>m &lt;-<span class="st"> </span><span class="kw">map_base</span>(<span class="dt">region=</span><span class="st">&#39;ccs&#39;</span>)</span>
<span id="cb55-2"><a href="maps.html#cb55-2"></a>m</span></code></pre></div>
<p><img src="img/map_ccs.png" style="width:95.0%" /></p>
<p>And the ETP:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="maps.html#cb56-1"></a>m &lt;-<span class="st"> </span><span class="kw">map_base</span>(<span class="dt">region=</span><span class="st">&#39;etp&#39;</span>)</span>
<span id="cb56-2"><a href="maps.html#cb56-2"></a>m</span></code></pre></div>
<p><img src="img/map_etp.png" style="width:95.0%" /></p>
</div>
<div id="add-strata" class="section level3 unnumbered hasAnchor">
<h3>Add strata<a href="maps.html#add-strata" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Add your research strata to your map:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="maps.html#cb57-1"></a>m &lt;-<span class="st"> </span><span class="kw">map_base</span>(<span class="dt">region=</span><span class="st">&#39;cnp&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="maps.html#cb58-1"></a>m1 &lt;-<span class="st"> </span><span class="kw">map_strata</span>(m,</span>
<span id="cb58-2"><a href="maps.html#cb58-2"></a>                cruz_<span class="dv">1720</span><span class="op">$</span>settings, </span>
<span id="cb58-3"><a href="maps.html#cb58-3"></a>                <span class="dt">region=</span><span class="st">&#39;cnp&#39;</span>)</span></code></pre></div>
<p><img src="img/map_cnp_strata.png" style="width:95.0%" /></p>
</div>
<div id="add-survey-tracks" class="section level3 unnumbered hasAnchor">
<h3>Add survey tracks<a href="maps.html#add-survey-tracks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="maps.html#cb59-1"></a>m1 &lt;-<span class="st"> </span><span class="kw">map_effort</span>(m, cruz_<span class="dv">1720</span>)</span>
<span id="cb59-2"><a href="maps.html#cb59-2"></a>m1</span></code></pre></div>
<p><img src="img/map_tracks.png" style="width:95.0%" /></p>
<p>The defaults of <code>map_effort()</code> assume, for simplicity, that you want to see the segments to be included in density estimation for the first cohort specified in your settings. You can adjust this and other defaults using the function arguments.</p>
<div id="customizing-effort" class="section level4 unnumbered hasAnchor">
<h4>Customizing effort<a href="maps.html#customizing-effort" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="inputs" class="section level5 unnumbered hasAnchor">
<h5>Inputs<a href="maps.html#inputs" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>This map changes survey track thickness and color.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="maps.html#cb60-1"></a>m1 &lt;-<span class="st"> </span><span class="kw">map_effort</span>(m, </span>
<span id="cb60-2"><a href="maps.html#cb60-2"></a>                cruz_<span class="dv">1720</span>,</span>
<span id="cb60-3"><a href="maps.html#cb60-3"></a>                <span class="dt">effort_color=</span><span class="st">&#39;firebrick&#39;</span>,</span>
<span id="cb60-4"><a href="maps.html#cb60-4"></a>                <span class="dt">effort_stroke=</span><span class="fl">2.5</span>,</span>
<span id="cb60-5"><a href="maps.html#cb60-5"></a>                <span class="dt">effort_linetype=</span><span class="dv">1</span>,)</span></code></pre></div>
<p><img src="img/map_tracks2.png" style="width:95.0%" /></p>
</div>
<div id="color-code-conditions" class="section level5 unnumbered hasAnchor">
<h5>Color-code conditions<a href="maps.html#color-code-conditions" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Your second customization option is to add format variables to the <code>segments</code> slot of the cohort of interest in the <code>cruz</code> object. This gives you full control of line color, thickness, and line-type according to whatever specifications you wish to set, e.g., color-coding by effort type or Beaufort sea state.</p>
<p>This is possible because the function <code>map_effort()</code> looks for the variables <code>col</code> (line color), <code>lwd</code> (line thickness or stroke), and <code>lty</code> (line type) in the columns of <code>cruz$segments</code>. If these columns exist, the values therein will be used instead of the function defaults.</p>
<p>For example, color-code by Beaufort scale:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="maps.html#cb61-1"></a><span class="co"># Save copy of segments to modify</span></span>
<span id="cb61-2"><a href="maps.html#cb61-2"></a>cruzi &lt;-<span class="st"> </span>cruz_<span class="dv">1720</span></span>
<span id="cb61-3"><a href="maps.html#cb61-3"></a>segments &lt;-<span class="st"> </span>cruzi<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>segments</span>
<span id="cb61-4"><a href="maps.html#cb61-4"></a></span>
<span id="cb61-5"><a href="maps.html#cb61-5"></a><span class="co"># Add column `col`: color code by BFT sea state</span></span>
<span id="cb61-6"><a href="maps.html#cb61-6"></a>bft_colors &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;steelblue4&#39;</span>,<span class="st">&#39;steelblue2&#39;</span>,<span class="st">&#39;cadetblue1&#39;</span>,<span class="st">&#39;grey&#39;</span>)</span>
<span id="cb61-7"><a href="maps.html#cb61-7"></a>segments<span class="op">$</span>col &lt;-<span class="st"> </span>bft_colors[<span class="dv">4</span>]</span>
<span id="cb61-8"><a href="maps.html#cb61-8"></a>segments<span class="op">$</span>col[ segments<span class="op">$</span>avgBft <span class="op">&lt;=</span><span class="st"> </span><span class="dv">7</span> ] &lt;-<span class="st"> </span>bft_colors[<span class="dv">3</span>] <span class="co"># bft 5 +</span></span>
<span id="cb61-9"><a href="maps.html#cb61-9"></a>segments<span class="op">$</span>col[ segments<span class="op">$</span>avgBft <span class="op">&lt;=</span><span class="st"> </span><span class="dv">4</span> ] &lt;-<span class="st"> </span>bft_colors[<span class="dv">2</span>] <span class="co"># bft 3 - 4</span></span>
<span id="cb61-10"><a href="maps.html#cb61-10"></a>segments<span class="op">$</span>col[ segments<span class="op">$</span>avgBft <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2</span> ] &lt;-<span class="st"> </span>bft_colors[<span class="dv">1</span>] <span class="co"># bft 0 -2</span></span>
<span id="cb61-11"><a href="maps.html#cb61-11"></a></span>
<span id="cb61-12"><a href="maps.html#cb61-12"></a><span class="co"># Update sub_segments slot in `cruz` object</span></span>
<span id="cb61-13"><a href="maps.html#cb61-13"></a>cruzi<span class="op">$</span>cohorts<span class="op">$</span>all<span class="op">$</span>segments &lt;-<span class="st"> </span>segments</span>
<span id="cb61-14"><a href="maps.html#cb61-14"></a></span>
<span id="cb61-15"><a href="maps.html#cb61-15"></a><span class="co"># Update map </span></span>
<span id="cb61-16"><a href="maps.html#cb61-16"></a>m_custom2 &lt;-<span class="st"> </span><span class="kw">map_effort</span>(m, cruzi)</span>
<span id="cb61-17"><a href="maps.html#cb61-17"></a></span>
<span id="cb61-18"><a href="maps.html#cb61-18"></a><span class="co"># Add legend using native functions from mapping package `tmap`</span></span>
<span id="cb61-19"><a href="maps.html#cb61-19"></a>m_custom2 &lt;-<span class="st"> </span></span>
<span id="cb61-20"><a href="maps.html#cb61-20"></a><span class="st">  </span>m_custom2 <span class="op">+</span><span class="st"> </span></span>
<span id="cb61-21"><a href="maps.html#cb61-21"></a><span class="st">  </span>tmap<span class="op">::</span><span class="kw">tm_add_legend</span>(<span class="st">&#39;line&#39;</span>, </span>
<span id="cb61-22"><a href="maps.html#cb61-22"></a>                        <span class="dt">col =</span> bft_colors,</span>
<span id="cb61-23"><a href="maps.html#cb61-23"></a>                        <span class="dt">lwd =</span> <span class="dv">3</span>,</span>
<span id="cb61-24"><a href="maps.html#cb61-24"></a>                        <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&#39; 0 - 2&#39;</span>, </span>
<span id="cb61-25"><a href="maps.html#cb61-25"></a>                                   <span class="st">&#39; 3 - 4&#39;</span>, </span>
<span id="cb61-26"><a href="maps.html#cb61-26"></a>                                   <span class="st">&#39; 5 +&#39;</span>, </span>
<span id="cb61-27"><a href="maps.html#cb61-27"></a>                                   <span class="st">&#39; no data&#39;</span>),</span>
<span id="cb61-28"><a href="maps.html#cb61-28"></a>                         <span class="dt">title=</span><span class="st">&quot;Beaufort sea state&quot;</span>) <span class="op">+</span></span>
<span id="cb61-29"><a href="maps.html#cb61-29"></a><span class="st">  </span>tmap<span class="op">::</span><span class="kw">tm_layout</span>(<span class="dt">legend.position=</span><span class="kw">c</span>(<span class="st">&#39;left&#39;</span>,<span class="st">&#39;bottom&#39;</span>))</span>
<span id="cb61-30"><a href="maps.html#cb61-30"></a></span>
<span id="cb61-31"><a href="maps.html#cb61-31"></a><span class="co"># Show map</span></span>
<span id="cb61-32"><a href="maps.html#cb61-32"></a>m_custom2</span></code></pre></div>
<p><img src="img/map_tracks3.png" style="width:95.0%" /></p>
</div>
</div>
</div>
<div id="add-sightings" class="section level3 unnumbered hasAnchor">
<h3>Add sightings<a href="maps.html#add-sightings" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the function <code>map_sightings()</code> to add sightings to your map:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="maps.html#cb62-1"></a>m1 &lt;-<span class="st"> </span><span class="kw">map_sightings</span>(m, cruz_<span class="dv">1720</span>)</span></code></pre></div>
<p><img src="img/map_sits.png" style="width:95.0%" /></p>
<div id="customizing-sightings" class="section level4 unnumbered hasAnchor">
<h4>Customizing sightings<a href="maps.html#customizing-sightings" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To demonstrate some of the customization options, consider this map that shows sightings of false killer whales with custom dot color, shape, and size:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="maps.html#cb63-1"></a>m1 &lt;-<span class="st"> </span><span class="kw">map_sightings</span>(m,</span>
<span id="cb63-2"><a href="maps.html#cb63-2"></a>                    cruz_<span class="dv">1720</span>,</span>
<span id="cb63-3"><a href="maps.html#cb63-3"></a>                    <span class="dt">include_species =</span> <span class="st">&#39;033&#39;</span>,</span>
<span id="cb63-4"><a href="maps.html#cb63-4"></a>                    <span class="dt">color_base =</span> <span class="st">&#39;purple&#39;</span>,</span>
<span id="cb63-5"><a href="maps.html#cb63-5"></a>                    <span class="dt">shape_base =</span> <span class="dv">18</span>,</span>
<span id="cb63-6"><a href="maps.html#cb63-6"></a>                    <span class="dt">size_base =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="img/map_sits2.png" style="width:95.0%" /></p>
<p>Next is a map of humpback whales and sperm whales, color-coded by species and shape-coded by whether or not the sighting will be included in the analysis:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="maps.html#cb64-1"></a>m1 &lt;-<span class="st"> </span><span class="kw">map_sightings</span>(m, </span>
<span id="cb64-2"><a href="maps.html#cb64-2"></a>                   cruz_<span class="dv">1720</span>,</span>
<span id="cb64-3"><a href="maps.html#cb64-3"></a>                   <span class="dt">include_species =</span> <span class="kw">c</span>(<span class="st">&#39;076&#39;</span>,<span class="st">&#39;046&#39;</span>),</span>
<span id="cb64-4"><a href="maps.html#cb64-4"></a>                   <span class="dt">color_code =</span> <span class="ot">TRUE</span>,</span>
<span id="cb64-5"><a href="maps.html#cb64-5"></a>                   <span class="dt">shape_code =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="img/map_sits3.png" style="width:95.0%" /></p>
</div>
</div>
<div id="overview-1" class="section level3 unnumbered hasAnchor">
<h3>Overview<a href="maps.html#overview-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here is an overview of the steps needed to map strata, survey tracks, and sightings all together:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="maps.html#cb65-1"></a>m &lt;-<span class="st"> </span><span class="kw">map_base</span>(<span class="st">&#39;cnp&#39;</span>) </span>
<span id="cb65-2"><a href="maps.html#cb65-2"></a>m &lt;-<span class="st"> </span><span class="kw">map_strata</span>(m, cruz_<span class="dv">1720</span><span class="op">$</span>settings)</span>
<span id="cb65-3"><a href="maps.html#cb65-3"></a>m &lt;-<span class="st"> </span><span class="kw">map_effort</span>(m, cruz_<span class="dv">1720</span>)</span>
<span id="cb65-4"><a href="maps.html#cb65-4"></a>m &lt;-<span class="st"> </span><span class="kw">map_sightings</span>(m, cruz_<span class="dv">1720</span>, <span class="dt">size_base=</span>.<span class="dv">4</span>)</span>
<span id="cb65-5"><a href="maps.html#cb65-5"></a>m </span></code></pre></div>
<p><img src="img/map_overview.png" style="width:95.0%" /></p>
</div>
</div>
<div id="interactive-maps" class="section level2 unnumbered hasAnchor">
<h2>Interactive maps<a href="maps.html#interactive-maps" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>LTabundR</code> also has an interactive map function, which maps survey data using the <code>leaflet</code> package.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="maps.html#cb66-1"></a> <span class="kw">map_cruz</span>(cruz_<span class="dv">1720</span>,</span>
<span id="cb66-2"><a href="maps.html#cb66-2"></a>          <span class="dt">cohort=</span><span class="dv">1</span>,</span>
<span id="cb66-3"><a href="maps.html#cb66-3"></a>          <span class="dt">eez_show=</span><span class="ot">FALSE</span>,</span>
<span id="cb66-4"><a href="maps.html#cb66-4"></a>          <span class="dt">strata_show=</span><span class="ot">FALSE</span>,</span>
<span id="cb66-5"><a href="maps.html#cb66-5"></a>          <span class="dt">effort_show=</span><span class="ot">TRUE</span>,</span>
<span id="cb66-6"><a href="maps.html#cb66-6"></a>          <span class="dt">effort_resolution=</span><span class="dv">1</span>,</span>
<span id="cb66-7"><a href="maps.html#cb66-7"></a>          <span class="dt">sightings_show=</span><span class="ot">TRUE</span>,</span>
<span id="cb66-8"><a href="maps.html#cb66-8"></a>          <span class="dt">sightings_color =</span> <span class="st">&#39;firebrick&#39;</span>,</span>
<span id="cb66-9"><a href="maps.html#cb66-9"></a>          <span class="dt">verbose=</span><span class="ot">FALSE</span>)</span></code></pre></div>
<p>Note that you can also click on sightings and tracklines to see their details. Refer to the documentation for this function (<code>?map_cruz</code>) to see all the options available for stylizing these maps.</p>
</div>
<div id="interactive-dashboard" class="section level2 unnumbered hasAnchor">
<h2>Interactive dashboard<a href="maps.html#interactive-dashboard" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Finally, note that <code>LTabundR</code> comes with an interactive data explorer app (a <code>Shiny</code> app) for filtering survey data according to effort scenario and species code, toggling <code>map_cruz()</code> settings, and reviewing summary tables of effort and sightings (including inspection of truncation distances).</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="maps.html#cb67-1"></a><span class="kw">cruz_explorer</span>(cruz)</span></code></pre></div>
<p><em>Screenshots from this app:</em></p>
 <br />

<center>
<img src="img/app-1.png" style="width:85.0%" />
 <br />
<img src="img/app-2.png" style="width:85.0%" />
 <br />
<img src="img/app-3.png" style="width:85.0%" />
 <br />
<img src="img/app-4.png" style="width:85.0%" />
 <br />
<img src="img/app-5.png" style="width:85.0%" />
</center>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="processing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="filter.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/emk-noaa/emk-noaa.github.io04-maps.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["vignette.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
