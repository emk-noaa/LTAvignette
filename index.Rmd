--- 
title: User's guide for `LTabundR`
site: bookdown::bookdown_site
output: bookdown::gitbook
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
github-repo: emk-noaa/emk-noaa.github.io
description: "vignette"
always_allow_html: true
---


```{r setup, include=FALSE, echo = FALSE}
# Basic knitr options
library(knitr)
opts_chunk$set(comment = NA, 
               echo=FALSE,
               warning = FALSE, 
               message = FALSE, 
               error = TRUE, 
               cache = FALSE,
               fig.width = 9.64,
               fig.height = 5.9,
               fig.path = 'figures/')
options(scipen=999)

```


# Overview {-} 

The `R` package `LTabundR` offers tools that facilitate and standardize the typical workflow for estimating cetacean abundance from NOAA-NMFS ship surveys in the eastern Pacific.  

That workflow typically involves four stages: 

**(1) Data processing**  

- This step involves reading in & processing raw `DAS` files, breaking effort into discrete segments for variance estimation, correcting school size estimates according to calibration models, then averaging together school size estimates for each sighting.  

- Most importantly, this step standardizes data structure in a way that all downstream analyses depend upon. The name we will use for this standardized data object is a `cruz` object.

- The key `LTabundR` functions you will use in this stage are `load_settings()` and `process_surveys()`. 


**(2) Data exploration**

- This step involves summarizing effort and sightings totals, determining the appropriate truncation distances for each species based on their sample size, and producing maps.  

- The key functions in this stage are `cruz_explorer()` (a `Shiny` dashboard for data exploration) and the `summarize...`  functions, such as `summarize_species()` and `summarize_effort()`.


**(3) Data analysis**

- This step involves estimating Beaufort-specific "Relative" trackline detection probabilities -- i.e., *g(0)* estimates; estimating density/abundance with detection functions and determining the CV of that estimate; handling stratified analyses; and testing for the significance of interannual trends.

- The key `LTabundR` functions in this stage are `g0_table()` and `lta()`.  

- Most analyses are group-based analyses, but false killer whales (*Pseudorca crassidens*) are analyzed differently using a subgroup-based approach. For this exception the function `lta_subgroup()` will be used.  


**(4) Reports & plots**

- This step involes produces standardly-formatted results tables of your line-transect estimates; plots the best-fitting detection function model; and plots abundance estimates (and their CV).  

- They key `LTabundR` functions in this stage are `lta_report()`, `df_plot()`, and `lta_plot()`. 
 
This user's guide is structured around these four workflow stages. Those pages are followed by a set of case studies with full-fledged example code. The guide concludes with appendices that offer further details and minutiae on certain aspects of the package. 

Throughout this user's guide, we will primarily be using example data from recent 2017 & 2020 wintertime surveys in the region of the main Hawaiian Islands. That study area has been referred to "WHICEAS".   

### Installation {-} 

Once the package is public, install details will go here. 


### Credits {-}  

This `R` package is a consolidation of code developed over many years by many NOAA-NMFS scientists, primarily Jay Barlow, Tim Gerrodette, Jeff Laake, Karin Forney, and Jeff Moore. This package was developed by Eric Keen and Amanda Bradford. 
 
